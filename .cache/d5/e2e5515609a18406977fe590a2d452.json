{"id":"ks5y","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"./find_and_modify","loc":{"line":3,"column":39},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/find_one_and_update.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/find_and_modify.js"},{"name":"../utils","loc":{"line":4,"column":35},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/find_one_and_update.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/utils.js"}],"generated":{"js":"\"use strict\";function e(t){return(e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(t)}const t=require(\"./find_and_modify\"),o=require(\"../utils\").hasAtomicOperators;class r extends t{constructor(t,r,n,u){const s=Object.assign({},u);if(s.fields=u.projection,s.update=!0,s.new=\"boolean\"==typeof u.returnOriginal&&!u.returnOriginal,s.upsert=\"boolean\"==typeof u.upsert&&u.upsert,null==r||\"object\"!==e(r))throw new TypeError(\"Filter parameter must be an object\");if(null==n||\"object\"!==e(n))throw new TypeError(\"Update parameter must be an object\");if(!o(n))throw new TypeError(\"Update document requires atomic operators\");super(t,r,s.sort,n,s)}}module.exports=r;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":22}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":24}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":27}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":34}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":36}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":55}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":63}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":80}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":87}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":96}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":105}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":108}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":122}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":125}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":134}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":137}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":144}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":147}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":166}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":174}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":176}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":190}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":198}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":202}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":209}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":219}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":235}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":32,"column":0},"generated":{"line":1,"column":239}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":3,"column":0},"generated":{"line":1,"column":242}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"FindAndModifyOperation","original":{"line":3,"column":6},"generated":{"line":1,"column":248}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"require","original":{"line":3,"column":31},"generated":{"line":1,"column":250}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":3,"column":39},"generated":{"line":1,"column":258}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"hasAtomicOperators","original":{"line":4,"column":6},"generated":{"line":1,"column":279}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"require","original":{"line":4,"column":27},"generated":{"line":1,"column":281}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":4,"column":35},"generated":{"line":1,"column":289}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"hasAtomicOperators","original":{"line":4,"column":47},"generated":{"line":1,"column":301}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":6,"column":0},"generated":{"line":1,"column":320}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"FindOneAndUpdateOperation","original":{"line":6,"column":6},"generated":{"line":1,"column":326}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"FindAndModifyOperation","original":{"line":6,"column":40},"generated":{"line":1,"column":336}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"constructor","original":{"line":7,"column":2},"generated":{"line":1,"column":338}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"collection","original":{"line":7,"column":14},"generated":{"line":1,"column":350}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"filter","original":{"line":7,"column":26},"generated":{"line":1,"column":352}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"update","original":{"line":7,"column":34},"generated":{"line":1,"column":354}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"options","original":{"line":7,"column":42},"generated":{"line":1,"column":356}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"finalOptions","original":{"line":9,"column":10},"generated":{"line":1,"column":359}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"finalOptions","original":{"line":9,"column":10},"generated":{"line":1,"column":365}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"Object","original":{"line":9,"column":25},"generated":{"line":1,"column":367}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"assign","original":{"line":9,"column":32},"generated":{"line":1,"column":374}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":9,"column":39},"generated":{"line":1,"column":381}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"options","original":{"line":9,"column":43},"generated":{"line":1,"column":384}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"filter","original":{"line":16,"column":8},"generated":{"line":1,"column":387}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"finalOptions","original":{"line":10,"column":4},"generated":{"line":1,"column":390}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"fields","original":{"line":10,"column":17},"generated":{"line":1,"column":392}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"options","original":{"line":10,"column":26},"generated":{"line":1,"column":399}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"projection","original":{"line":10,"column":34},"generated":{"line":1,"column":401}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"finalOptions","original":{"line":11,"column":4},"generated":{"line":1,"column":412}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"update","original":{"line":11,"column":17},"generated":{"line":1,"column":414}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":11,"column":26},"generated":{"line":1,"column":422}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"finalOptions","original":{"line":12,"column":4},"generated":{"line":1,"column":424}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"new","original":{"line":12,"column":17},"generated":{"line":1,"column":426}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":13,"column":40},"generated":{"line":1,"column":430}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"options","original":{"line":13,"column":13},"generated":{"line":1,"column":448}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"returnOriginal","original":{"line":13,"column":21},"generated":{"line":1,"column":450}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"options","original":{"line":13,"column":53},"generated":{"line":1,"column":467}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"returnOriginal","original":{"line":13,"column":61},"generated":{"line":1,"column":469}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"finalOptions","original":{"line":14,"column":4},"generated":{"line":1,"column":484}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"upsert","original":{"line":14,"column":17},"generated":{"line":1,"column":486}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":14,"column":52},"generated":{"line":1,"column":493}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"options","original":{"line":14,"column":33},"generated":{"line":1,"column":511}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"upsert","original":{"line":14,"column":41},"generated":{"line":1,"column":513}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"options","original":{"line":14,"column":64},"generated":{"line":1,"column":521}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"upsert","original":{"line":14,"column":72},"generated":{"line":1,"column":523}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":16,"column":18},"generated":{"line":1,"column":530}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"filter","original":{"line":16,"column":8},"generated":{"line":1,"column":536}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":16,"column":44},"generated":{"line":1,"column":539}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":16,"column":26},"generated":{"line":1,"column":550}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"filter","original":{"line":16,"column":33},"generated":{"line":1,"column":552}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":17,"column":12},"generated":{"line":1,"column":555}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":17,"column":12},"generated":{"line":1,"column":561}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"TypeError","original":{"line":17,"column":16},"generated":{"line":1,"column":565}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":17,"column":26},"generated":{"line":1,"column":575}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"update","original":{"line":20,"column":8},"generated":{"line":1,"column":613}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":20,"column":18},"generated":{"line":1,"column":616}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"update","original":{"line":20,"column":8},"generated":{"line":1,"column":622}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":20,"column":44},"generated":{"line":1,"column":625}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":20,"column":26},"generated":{"line":1,"column":636}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"update","original":{"line":20,"column":33},"generated":{"line":1,"column":638}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":21,"column":12},"generated":{"line":1,"column":641}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":21,"column":12},"generated":{"line":1,"column":647}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"TypeError","original":{"line":21,"column":16},"generated":{"line":1,"column":651}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":21,"column":26},"generated":{"line":1,"column":661}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":24,"column":8},"generated":{"line":1,"column":699}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"hasAtomicOperators","original":{"line":24,"column":9},"generated":{"line":1,"column":703}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"update","original":{"line":24,"column":28},"generated":{"line":1,"column":705}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":25,"column":12},"generated":{"line":1,"column":708}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":25,"column":12},"generated":{"line":1,"column":714}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"TypeError","original":{"line":25,"column":16},"generated":{"line":1,"column":718}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","original":{"line":25,"column":26},"generated":{"line":1,"column":728}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"collection","original":{"line":28,"column":10},"generated":{"line":1,"column":773}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"collection","original":{"line":28,"column":10},"generated":{"line":1,"column":779}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"filter","original":{"line":28,"column":22},"generated":{"line":1,"column":781}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"finalOptions","original":{"line":28,"column":30},"generated":{"line":1,"column":783}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"sort","original":{"line":28,"column":43},"generated":{"line":1,"column":785}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"update","original":{"line":28,"column":49},"generated":{"line":1,"column":790}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"finalOptions","original":{"line":28,"column":57},"generated":{"line":1,"column":792}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"module","original":{"line":32,"column":0},"generated":{"line":1,"column":796}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"exports","original":{"line":32,"column":7},"generated":{"line":1,"column":803}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_update.js","name":"FindOneAndUpdateOperation","original":{"line":32,"column":17},"generated":{"line":1,"column":811}}],"sources":{"../node_modules/mongodb/lib/operations/find_one_and_update.js":"'use strict';\n\nconst FindAndModifyOperation = require('./find_and_modify');\nconst hasAtomicOperators = require('../utils').hasAtomicOperators;\n\nclass FindOneAndUpdateOperation extends FindAndModifyOperation {\n  constructor(collection, filter, update, options) {\n    // Final options\n    const finalOptions = Object.assign({}, options);\n    finalOptions.fields = options.projection;\n    finalOptions.update = true;\n    finalOptions.new =\n      typeof options.returnOriginal === 'boolean' ? !options.returnOriginal : false;\n    finalOptions.upsert = typeof options.upsert === 'boolean' ? options.upsert : false;\n\n    if (filter == null || typeof filter !== 'object') {\n      throw new TypeError('Filter parameter must be an object');\n    }\n\n    if (update == null || typeof update !== 'object') {\n      throw new TypeError('Update parameter must be an object');\n    }\n\n    if (!hasAtomicOperators(update)) {\n      throw new TypeError('Update document requires atomic operators');\n    }\n\n    super(collection, filter, finalOptions.sort, update, finalOptions);\n  }\n}\n\nmodule.exports = FindOneAndUpdateOperation;\n"},"lineCount":null}},"error":null,"hash":"e38fee2475206aa204eea5f0e90d5e91","cacheData":{"env":{}}}