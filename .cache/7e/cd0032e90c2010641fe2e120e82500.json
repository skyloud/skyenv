{"id":"NqA5","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"../connection/msg","loc":{"line":2,"column":20},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/connection/apm.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/connection/msg.js"},{"name":"../connection/commands","loc":{"line":4,"column":24},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/connection/apm.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/connection/commands.js"},{"name":"../../utils","loc":{"line":5,"column":38},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/connection/apm.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/utils.js"}],"generated":{"js":"\"use strict\";const e=require(\"../connection/msg\").Msg,s=require(\"../connection/commands\").KillCursor,t=require(\"../connection/commands\").GetMore,r=require(\"../../utils\").calculateDurationInMs,n=new Set([\"authenticate\",\"saslStart\",\"saslContinue\",\"getnonce\",\"createUser\",\"updateUser\",\"copydbgetnonce\",\"copydbsaslstart\",\"copydb\"]),o=e=>Object.keys(e)[0],c=e=>e.ns,a=e=>e.ns.split(\".\")[0],i=e=>e.ns.split(\".\")[1],u=e=>e.options?\"\".concat(e.options.host,\":\").concat(e.options.port):e.address,d=(e,s)=>n.has(e)?{}:s,m=e=>e.s&&e.queue,l={$query:\"filter\",$orderby:\"sort\",$hint:\"hint\",$comment:\"comment\",$maxScan:\"maxScan\",$max:\"max\",$min:\"min\",$returnKey:\"returnKey\",$showDiskLoc:\"showRecordId\",$maxTimeMS:\"maxTimeMS\",$snapshot:\"snapshot\"},q={numberToSkip:\"skip\",numberToReturn:\"batchSize\",returnFieldsSelector:\"projection\"},y=[\"tailable\",\"oplogReplay\",\"noCursorTimeout\",\"awaitData\",\"partial\",\"exhaust\"],p=r=>{if(r instanceof t)return{getMore:r.cursorId,collection:i(r),batchSize:r.numberToReturn};if(r instanceof s)return{killCursors:i(r),cursors:r.cursorIds};if(r instanceof e)return r.command;if(r.query&&r.query.$query){let e;return\"admin.$cmd\"===r.ns?e=Object.assign({},r.query.$query):(e={find:i(r)},Object.keys(l).forEach(s=>{void 0!==r.query[s]&&(e[l[s]]=r.query[s])})),Object.keys(q).forEach(s=>{void 0!==r[s]&&(e[q[s]]=r[s])}),y.forEach(s=>{r[s]&&(e[s]=r[s])}),void 0!==r.pre32Limit&&(e.limit=r.pre32Limit),r.query.$explain?{explain:e}:e}return r.query?r.query:r},h=(e,r)=>e instanceof t?{ok:1,cursor:{id:r.message.cursorId,ns:c(e),nextBatch:r.message.documents}}:e instanceof s?{ok:1,cursorsUnknown:e.cursorIds}:e.query&&void 0!==e.query.$query?{ok:1,cursor:{id:r.message.cursorId,ns:c(e),firstBatch:r.message.documents}}:r&&r.result?r.result:r,b=e=>{if(m(e))return{connectionId:u(e)};const s=e;return{address:s.address,connectionId:s.id}};class f{constructor(e,s){const t=p(s),r=o(t),c=b(e);n.has(r)&&(this.commandObj={},this.commandObj[r]=!0),Object.assign(this,c,{requestId:s.requestId,databaseName:a(s),commandName:r,command:t})}}class ${constructor(e,s,t,n){const c=p(s),a=o(c),i=b(e);Object.assign(this,i,{requestId:s.requestId,commandName:a,duration:r(n),reply:d(a,h(s,t))})}}class I{constructor(e,s,t,n){const c=p(s),a=o(c),i=b(e);Object.assign(this,i,{requestId:s.requestId,commandName:a,duration:r(n),failure:d(a,t)})}}module.exports={CommandStartedEvent:f,CommandSucceededEvent:$,CommandFailedEvent:I};"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":2,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Msg","original":{"line":2,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"require","original":{"line":2,"column":12},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":2,"column":20},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Msg","original":{"line":2,"column":41},"generated":{"line":1,"column":50}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"KillCursor","original":{"line":3,"column":6},"generated":{"line":1,"column":54}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"require","original":{"line":3,"column":19},"generated":{"line":1,"column":56}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":3,"column":27},"generated":{"line":1,"column":64}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"KillCursor","original":{"line":3,"column":53},"generated":{"line":1,"column":90}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"GetMore","original":{"line":4,"column":6},"generated":{"line":1,"column":101}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"require","original":{"line":4,"column":16},"generated":{"line":1,"column":103}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":4,"column":24},"generated":{"line":1,"column":111}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"GetMore","original":{"line":4,"column":50},"generated":{"line":1,"column":137}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"calculateDurationInMs","original":{"line":5,"column":6},"generated":{"line":1,"column":145}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"require","original":{"line":5,"column":30},"generated":{"line":1,"column":147}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":5,"column":38},"generated":{"line":1,"column":155}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"calculateDurationInMs","original":{"line":5,"column":53},"generated":{"line":1,"column":170}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"SENSITIVE_COMMANDS","original":{"line":8,"column":6},"generated":{"line":1,"column":192}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":8,"column":27},"generated":{"line":1,"column":194}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Set","original":{"line":8,"column":31},"generated":{"line":1,"column":198}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":8,"column":35},"generated":{"line":1,"column":202}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":9,"column":2},"generated":{"line":1,"column":203}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":10,"column":2},"generated":{"line":1,"column":218}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":11,"column":2},"generated":{"line":1,"column":230}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":12,"column":2},"generated":{"line":1,"column":245}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":13,"column":2},"generated":{"line":1,"column":256}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":14,"column":2},"generated":{"line":1,"column":269}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":15,"column":2},"generated":{"line":1,"column":282}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":16,"column":2},"generated":{"line":1,"column":299}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":17,"column":2},"generated":{"line":1,"column":317}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractCommandName","original":{"line":21,"column":6},"generated":{"line":1,"column":328}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandDoc","original":{"line":21,"column":27},"generated":{"line":1,"column":330}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Object","original":{"line":21,"column":41},"generated":{"line":1,"column":333}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"keys","original":{"line":21,"column":48},"generated":{"line":1,"column":340}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandDoc","original":{"line":21,"column":53},"generated":{"line":1,"column":345}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":21,"column":65},"generated":{"line":1,"column":348}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"namespace","original":{"line":22,"column":6},"generated":{"line":1,"column":351}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":22,"column":18},"generated":{"line":1,"column":353}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":22,"column":29},"generated":{"line":1,"column":356}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"ns","original":{"line":22,"column":37},"generated":{"line":1,"column":358}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"databaseName","original":{"line":23,"column":6},"generated":{"line":1,"column":361}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":23,"column":21},"generated":{"line":1,"column":363}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":23,"column":32},"generated":{"line":1,"column":366}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"ns","original":{"line":23,"column":40},"generated":{"line":1,"column":368}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"split","original":{"line":23,"column":43},"generated":{"line":1,"column":371}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":23,"column":49},"generated":{"line":1,"column":377}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":23,"column":54},"generated":{"line":1,"column":382}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"collectionName","original":{"line":24,"column":6},"generated":{"line":1,"column":385}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":24,"column":23},"generated":{"line":1,"column":387}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":24,"column":34},"generated":{"line":1,"column":390}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"ns","original":{"line":24,"column":42},"generated":{"line":1,"column":392}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"split","original":{"line":24,"column":45},"generated":{"line":1,"column":395}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":24,"column":51},"generated":{"line":1,"column":401}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":24,"column":56},"generated":{"line":1,"column":406}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"generateConnectionId","original":{"line":25,"column":6},"generated":{"line":1,"column":409}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":25,"column":29},"generated":{"line":1,"column":411}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":26,"column":2},"generated":{"line":1,"column":414}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"options","original":{"line":26,"column":7},"generated":{"line":1,"column":416}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":26,"column":20},"generated":{"line":1,"column":424}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":26,"column":20},"generated":{"line":1,"column":427}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":26,"column":20},"generated":{"line":1,"column":434}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"options","original":{"line":26,"column":25},"generated":{"line":1,"column":436}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"host","original":{"line":26,"column":33},"generated":{"line":1,"column":444}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":26,"column":41},"generated":{"line":1,"column":449}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":26,"column":41},"generated":{"line":1,"column":454}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":26,"column":41},"generated":{"line":1,"column":461}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"options","original":{"line":26,"column":46},"generated":{"line":1,"column":463}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"port","original":{"line":26,"column":54},"generated":{"line":1,"column":471}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":26,"column":63},"generated":{"line":1,"column":477}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"address","original":{"line":26,"column":68},"generated":{"line":1,"column":479}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"maybeRedact","original":{"line":27,"column":6},"generated":{"line":1,"column":487}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":27,"column":20},"generated":{"line":1,"column":489}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":27,"column":21},"generated":{"line":1,"column":490}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":27,"column":34},"generated":{"line":1,"column":492}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"SENSITIVE_COMMANDS","original":{"line":27,"column":46},"generated":{"line":1,"column":496}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"has","original":{"line":27,"column":65},"generated":{"line":1,"column":498}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":27,"column":69},"generated":{"line":1,"column":502}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":27,"column":84},"generated":{"line":1,"column":505}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":27,"column":89},"generated":{"line":1,"column":508}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"isLegacyPool","original":{"line":28,"column":6},"generated":{"line":1,"column":510}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":28,"column":21},"generated":{"line":1,"column":512}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":28,"column":29},"generated":{"line":1,"column":515}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"s","original":{"line":28,"column":34},"generated":{"line":1,"column":517}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":28,"column":39},"generated":{"line":1,"column":520}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"queue","original":{"line":28,"column":44},"generated":{"line":1,"column":522}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"LEGACY_FIND_QUERY_MAP","original":{"line":30,"column":6},"generated":{"line":1,"column":528}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":30,"column":30},"generated":{"line":1,"column":530}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$query","original":{"line":31,"column":2},"generated":{"line":1,"column":531}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":31,"column":10},"generated":{"line":1,"column":538}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$orderby","original":{"line":32,"column":2},"generated":{"line":1,"column":547}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":32,"column":12},"generated":{"line":1,"column":556}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$hint","original":{"line":33,"column":2},"generated":{"line":1,"column":563}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":33,"column":9},"generated":{"line":1,"column":569}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$comment","original":{"line":34,"column":2},"generated":{"line":1,"column":576}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":34,"column":12},"generated":{"line":1,"column":585}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$maxScan","original":{"line":35,"column":2},"generated":{"line":1,"column":595}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":35,"column":12},"generated":{"line":1,"column":604}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$max","original":{"line":36,"column":2},"generated":{"line":1,"column":614}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":36,"column":8},"generated":{"line":1,"column":619}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$min","original":{"line":37,"column":2},"generated":{"line":1,"column":625}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":37,"column":8},"generated":{"line":1,"column":630}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$returnKey","original":{"line":38,"column":2},"generated":{"line":1,"column":636}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":38,"column":14},"generated":{"line":1,"column":647}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$showDiskLoc","original":{"line":39,"column":2},"generated":{"line":1,"column":659}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":39,"column":16},"generated":{"line":1,"column":672}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$maxTimeMS","original":{"line":40,"column":2},"generated":{"line":1,"column":687}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":40,"column":14},"generated":{"line":1,"column":698}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$snapshot","original":{"line":41,"column":2},"generated":{"line":1,"column":710}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":41,"column":13},"generated":{"line":1,"column":720}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"LEGACY_FIND_OPTIONS_MAP","original":{"line":44,"column":6},"generated":{"line":1,"column":732}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":44,"column":32},"generated":{"line":1,"column":734}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"numberToSkip","original":{"line":45,"column":2},"generated":{"line":1,"column":735}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":45,"column":16},"generated":{"line":1,"column":748}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"numberToReturn","original":{"line":46,"column":2},"generated":{"line":1,"column":755}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":46,"column":18},"generated":{"line":1,"column":770}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"returnFieldsSelector","original":{"line":47,"column":2},"generated":{"line":1,"column":782}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":47,"column":24},"generated":{"line":1,"column":803}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"OP_QUERY_KEYS","original":{"line":50,"column":6},"generated":{"line":1,"column":817}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":50,"column":22},"generated":{"line":1,"column":819}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":51,"column":2},"generated":{"line":1,"column":820}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":52,"column":2},"generated":{"line":1,"column":831}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":53,"column":2},"generated":{"line":1,"column":845}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":54,"column":2},"generated":{"line":1,"column":863}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":55,"column":2},"generated":{"line":1,"column":875}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":56,"column":2},"generated":{"line":1,"column":885}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractCommand","original":{"line":65,"column":6},"generated":{"line":1,"column":896}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":65,"column":23},"generated":{"line":1,"column":898}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":66,"column":6},"generated":{"line":1,"column":902}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":66,"column":6},"generated":{"line":1,"column":905}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"GetMore","original":{"line":66,"column":25},"generated":{"line":1,"column":918}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":67,"column":11},"generated":{"line":1,"column":920}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":67,"column":11},"generated":{"line":1,"column":926}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"getMore","original":{"line":68,"column":6},"generated":{"line":1,"column":927}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":68,"column":15},"generated":{"line":1,"column":935}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cursorId","original":{"line":68,"column":23},"generated":{"line":1,"column":937}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"collection","original":{"line":69,"column":6},"generated":{"line":1,"column":946}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"collectionName","original":{"line":69,"column":18},"generated":{"line":1,"column":957}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":69,"column":33},"generated":{"line":1,"column":959}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"batchSize","original":{"line":70,"column":6},"generated":{"line":1,"column":962}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":70,"column":17},"generated":{"line":1,"column":972}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"numberToReturn","original":{"line":70,"column":25},"generated":{"line":1,"column":974}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":74,"column":6},"generated":{"line":1,"column":990}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":74,"column":6},"generated":{"line":1,"column":993}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"KillCursor","original":{"line":74,"column":25},"generated":{"line":1,"column":1006}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":75,"column":11},"generated":{"line":1,"column":1008}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":75,"column":11},"generated":{"line":1,"column":1014}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"killCursors","original":{"line":76,"column":6},"generated":{"line":1,"column":1015}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"collectionName","original":{"line":76,"column":19},"generated":{"line":1,"column":1027}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":76,"column":34},"generated":{"line":1,"column":1029}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cursors","original":{"line":77,"column":6},"generated":{"line":1,"column":1032}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":77,"column":15},"generated":{"line":1,"column":1040}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cursorIds","original":{"line":77,"column":23},"generated":{"line":1,"column":1042}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":81,"column":6},"generated":{"line":1,"column":1053}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":81,"column":6},"generated":{"line":1,"column":1056}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Msg","original":{"line":81,"column":25},"generated":{"line":1,"column":1069}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":82,"column":11},"generated":{"line":1,"column":1071}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":82,"column":11},"generated":{"line":1,"column":1078}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":82,"column":19},"generated":{"line":1,"column":1080}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":85,"column":6},"generated":{"line":1,"column":1088}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":85,"column":6},"generated":{"line":1,"column":1091}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"query","original":{"line":85,"column":14},"generated":{"line":1,"column":1093}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":85,"column":23},"generated":{"line":1,"column":1100}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"query","original":{"line":85,"column":31},"generated":{"line":1,"column":1102}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$query","original":{"line":85,"column":37},"generated":{"line":1,"column":1108}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":85,"column":45},"generated":{"line":1,"column":1115}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":86,"column":8},"generated":{"line":1,"column":1116}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":86,"column":8},"generated":{"line":1,"column":1120}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":111,"column":8},"generated":{"line":1,"column":1122}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":87,"column":23},"generated":{"line":1,"column":1128}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":87,"column":8},"generated":{"line":1,"column":1143}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"ns","original":{"line":87,"column":16},"generated":{"line":1,"column":1145}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":89,"column":6},"generated":{"line":1,"column":1148}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Object","original":{"line":89,"column":15},"generated":{"line":1,"column":1150}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"assign","original":{"line":89,"column":22},"generated":{"line":1,"column":1157}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":89,"column":29},"generated":{"line":1,"column":1164}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":89,"column":33},"generated":{"line":1,"column":1167}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"query","original":{"line":89,"column":41},"generated":{"line":1,"column":1169}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$query","original":{"line":89,"column":47},"generated":{"line":1,"column":1175}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":92,"column":6},"generated":{"line":1,"column":1184}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":92,"column":15},"generated":{"line":1,"column":1186}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"find","original":{"line":92,"column":17},"generated":{"line":1,"column":1187}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"collectionName","original":{"line":92,"column":23},"generated":{"line":1,"column":1192}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":92,"column":38},"generated":{"line":1,"column":1194}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Object","original":{"line":93,"column":6},"generated":{"line":1,"column":1198}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"keys","original":{"line":93,"column":13},"generated":{"line":1,"column":1205}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"LEGACY_FIND_QUERY_MAP","original":{"line":93,"column":18},"generated":{"line":1,"column":1210}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"forEach","original":{"line":93,"column":41},"generated":{"line":1,"column":1213}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":93,"column":49},"generated":{"line":1,"column":1221}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":94,"column":42},"generated":{"line":1,"column":1230}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":94,"column":19},"generated":{"line":1,"column":1234}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"query","original":{"line":94,"column":27},"generated":{"line":1,"column":1236}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":94,"column":33},"generated":{"line":1,"column":1242}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":95,"column":10},"generated":{"line":1,"column":1247}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"LEGACY_FIND_QUERY_MAP","original":{"line":95,"column":17},"generated":{"line":1,"column":1249}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":95,"column":39},"generated":{"line":1,"column":1251}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":95,"column":47},"generated":{"line":1,"column":1255}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"query","original":{"line":95,"column":55},"generated":{"line":1,"column":1257}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":95,"column":61},"generated":{"line":1,"column":1263}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Object","original":{"line":99,"column":4},"generated":{"line":1,"column":1270}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"keys","original":{"line":99,"column":11},"generated":{"line":1,"column":1277}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"LEGACY_FIND_OPTIONS_MAP","original":{"line":99,"column":16},"generated":{"line":1,"column":1282}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"forEach","original":{"line":99,"column":41},"generated":{"line":1,"column":1285}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":99,"column":49},"generated":{"line":1,"column":1293}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":100,"column":34},"generated":{"line":1,"column":1302}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":100,"column":17},"generated":{"line":1,"column":1306}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":100,"column":25},"generated":{"line":1,"column":1308}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":100,"column":47},"generated":{"line":1,"column":1313}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"LEGACY_FIND_OPTIONS_MAP","original":{"line":100,"column":54},"generated":{"line":1,"column":1315}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":100,"column":78},"generated":{"line":1,"column":1317}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":100,"column":86},"generated":{"line":1,"column":1321}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":100,"column":94},"generated":{"line":1,"column":1323}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"OP_QUERY_KEYS","original":{"line":103,"column":4},"generated":{"line":1,"column":1329}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"forEach","original":{"line":103,"column":18},"generated":{"line":1,"column":1331}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":103,"column":26},"generated":{"line":1,"column":1339}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":104,"column":10},"generated":{"line":1,"column":1343}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":104,"column":18},"generated":{"line":1,"column":1345}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":104,"column":24},"generated":{"line":1,"column":1350}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":104,"column":31},"generated":{"line":1,"column":1352}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":104,"column":38},"generated":{"line":1,"column":1355}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"key","original":{"line":104,"column":46},"generated":{"line":1,"column":1357}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":107,"column":38},"generated":{"line":1,"column":1368}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":107,"column":15},"generated":{"line":1,"column":1372}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pre32Limit","original":{"line":107,"column":23},"generated":{"line":1,"column":1374}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":108,"column":6},"generated":{"line":1,"column":1387}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"limit","original":{"line":108,"column":13},"generated":{"line":1,"column":1389}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":108,"column":21},"generated":{"line":1,"column":1395}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pre32Limit","original":{"line":108,"column":29},"generated":{"line":1,"column":1397}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":111,"column":8},"generated":{"line":1,"column":1409}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"query","original":{"line":111,"column":16},"generated":{"line":1,"column":1411}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$explain","original":{"line":111,"column":22},"generated":{"line":1,"column":1417}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":112,"column":13},"generated":{"line":1,"column":1426}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"explain","original":{"line":112,"column":15},"generated":{"line":1,"column":1427}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":112,"column":24},"generated":{"line":1,"column":1435}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":115,"column":11},"generated":{"line":1,"column":1438}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":118,"column":9},"generated":{"line":1,"column":1440}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":118,"column":9},"generated":{"line":1,"column":1447}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"query","original":{"line":118,"column":17},"generated":{"line":1,"column":1449}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":118,"column":25},"generated":{"line":1,"column":1455}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"query","original":{"line":118,"column":33},"generated":{"line":1,"column":1457}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":118,"column":41},"generated":{"line":1,"column":1463}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractReply","original":{"line":121,"column":6},"generated":{"line":1,"column":1466}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":121,"column":21},"generated":{"line":1,"column":1468}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":121,"column":22},"generated":{"line":1,"column":1469}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":121,"column":31},"generated":{"line":1,"column":1471}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":122,"column":6},"generated":{"line":1,"column":1475}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"GetMore","original":{"line":122,"column":25},"generated":{"line":1,"column":1488}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":123,"column":11},"generated":{"line":1,"column":1490}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"ok","original":{"line":124,"column":6},"generated":{"line":1,"column":1491}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":124,"column":10},"generated":{"line":1,"column":1494}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cursor","original":{"line":125,"column":6},"generated":{"line":1,"column":1496}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":125,"column":14},"generated":{"line":1,"column":1503}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"id","original":{"line":126,"column":8},"generated":{"line":1,"column":1504}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":126,"column":12},"generated":{"line":1,"column":1507}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"message","original":{"line":126,"column":18},"generated":{"line":1,"column":1509}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cursorId","original":{"line":126,"column":26},"generated":{"line":1,"column":1517}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"ns","original":{"line":127,"column":8},"generated":{"line":1,"column":1526}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"namespace","original":{"line":127,"column":12},"generated":{"line":1,"column":1529}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":127,"column":22},"generated":{"line":1,"column":1531}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"nextBatch","original":{"line":128,"column":8},"generated":{"line":1,"column":1534}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":128,"column":19},"generated":{"line":1,"column":1544}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"message","original":{"line":128,"column":25},"generated":{"line":1,"column":1546}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"documents","original":{"line":128,"column":33},"generated":{"line":1,"column":1554}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":133,"column":6},"generated":{"line":1,"column":1566}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"KillCursor","original":{"line":133,"column":25},"generated":{"line":1,"column":1579}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":134,"column":11},"generated":{"line":1,"column":1581}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"ok","original":{"line":135,"column":6},"generated":{"line":1,"column":1582}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":135,"column":10},"generated":{"line":1,"column":1585}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cursorsUnknown","original":{"line":136,"column":6},"generated":{"line":1,"column":1587}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":136,"column":22},"generated":{"line":1,"column":1602}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cursorIds","original":{"line":136,"column":30},"generated":{"line":1,"column":1604}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":141,"column":6},"generated":{"line":1,"column":1615}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"query","original":{"line":141,"column":14},"generated":{"line":1,"column":1617}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":141,"column":55},"generated":{"line":1,"column":1629}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":141,"column":30},"generated":{"line":1,"column":1633}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"query","original":{"line":141,"column":38},"generated":{"line":1,"column":1635}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"$query","original":{"line":141,"column":44},"generated":{"line":1,"column":1641}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":142,"column":11},"generated":{"line":1,"column":1648}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"ok","original":{"line":143,"column":6},"generated":{"line":1,"column":1649}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":143,"column":10},"generated":{"line":1,"column":1652}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cursor","original":{"line":144,"column":6},"generated":{"line":1,"column":1654}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":144,"column":14},"generated":{"line":1,"column":1661}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"id","original":{"line":145,"column":8},"generated":{"line":1,"column":1662}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":145,"column":12},"generated":{"line":1,"column":1665}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"message","original":{"line":145,"column":18},"generated":{"line":1,"column":1667}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cursorId","original":{"line":145,"column":26},"generated":{"line":1,"column":1675}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"ns","original":{"line":146,"column":8},"generated":{"line":1,"column":1684}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"namespace","original":{"line":146,"column":12},"generated":{"line":1,"column":1687}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":146,"column":22},"generated":{"line":1,"column":1689}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"firstBatch","original":{"line":147,"column":8},"generated":{"line":1,"column":1692}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":147,"column":20},"generated":{"line":1,"column":1703}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"message","original":{"line":147,"column":26},"generated":{"line":1,"column":1705}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"documents","original":{"line":147,"column":34},"generated":{"line":1,"column":1713}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":152,"column":9},"generated":{"line":1,"column":1725}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":152,"column":18},"generated":{"line":1,"column":1728}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":152,"column":24},"generated":{"line":1,"column":1730}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":152,"column":33},"generated":{"line":1,"column":1737}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"result","original":{"line":152,"column":39},"generated":{"line":1,"column":1739}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":152,"column":48},"generated":{"line":1,"column":1746}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractConnectionDetails","original":{"line":155,"column":6},"generated":{"line":1,"column":1748}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":155,"column":33},"generated":{"line":1,"column":1750}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"isLegacyPool","original":{"line":156,"column":6},"generated":{"line":1,"column":1754}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"isLegacyPool","original":{"line":156,"column":6},"generated":{"line":1,"column":1757}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":156,"column":19},"generated":{"line":1,"column":1759}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":157,"column":11},"generated":{"line":1,"column":1762}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":157,"column":11},"generated":{"line":1,"column":1768}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connectionId","original":{"line":158,"column":6},"generated":{"line":1,"column":1769}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"generateConnectionId","original":{"line":158,"column":20},"generated":{"line":1,"column":1782}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":158,"column":41},"generated":{"line":1,"column":1784}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connection","original":{"line":164,"column":8},"generated":{"line":1,"column":1788}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connection","original":{"line":164,"column":8},"generated":{"line":1,"column":1794}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":164,"column":21},"generated":{"line":1,"column":1796}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":165,"column":9},"generated":{"line":1,"column":1798}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":165,"column":9},"generated":{"line":1,"column":1804}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"address","original":{"line":166,"column":4},"generated":{"line":1,"column":1805}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connection","original":{"line":166,"column":13},"generated":{"line":1,"column":1813}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"address","original":{"line":166,"column":24},"generated":{"line":1,"column":1815}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connectionId","original":{"line":167,"column":4},"generated":{"line":1,"column":1823}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connection","original":{"line":167,"column":18},"generated":{"line":1,"column":1836}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"id","original":{"line":167,"column":29},"generated":{"line":1,"column":1838}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":172,"column":0},"generated":{"line":1,"column":1843}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"CommandStartedEvent","original":{"line":172,"column":6},"generated":{"line":1,"column":1849}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"constructor","original":{"line":179,"column":2},"generated":{"line":1,"column":1851}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":179,"column":14},"generated":{"line":1,"column":1863}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":179,"column":20},"generated":{"line":1,"column":1865}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cmd","original":{"line":180,"column":10},"generated":{"line":1,"column":1868}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cmd","original":{"line":180,"column":10},"generated":{"line":1,"column":1874}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractCommand","original":{"line":180,"column":16},"generated":{"line":1,"column":1876}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":180,"column":31},"generated":{"line":1,"column":1878}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":181,"column":10},"generated":{"line":1,"column":1881}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractCommandName","original":{"line":181,"column":24},"generated":{"line":1,"column":1883}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cmd","original":{"line":181,"column":43},"generated":{"line":1,"column":1885}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connectionDetails","original":{"line":182,"column":10},"generated":{"line":1,"column":1888}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractConnectionDetails","original":{"line":182,"column":30},"generated":{"line":1,"column":1890}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":182,"column":55},"generated":{"line":1,"column":1892}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"SENSITIVE_COMMANDS","original":{"line":185,"column":8},"generated":{"line":1,"column":1895}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"has","original":{"line":185,"column":27},"generated":{"line":1,"column":1897}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":185,"column":31},"generated":{"line":1,"column":1901}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandObj","original":{"line":186,"column":11},"generated":{"line":1,"column":1906}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandObj","original":{"line":186,"column":11},"generated":{"line":1,"column":1911}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":186,"column":24},"generated":{"line":1,"column":1922}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandObj","original":{"line":187,"column":11},"generated":{"line":1,"column":1925}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandObj","original":{"line":187,"column":11},"generated":{"line":1,"column":1930}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":187,"column":22},"generated":{"line":1,"column":1941}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":187,"column":37},"generated":{"line":1,"column":1945}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Object","original":{"line":190,"column":4},"generated":{"line":1,"column":1948}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"assign","original":{"line":190,"column":11},"generated":{"line":1,"column":1955}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":190,"column":18},"generated":{"line":1,"column":1962}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connectionDetails","original":{"line":190,"column":24},"generated":{"line":1,"column":1967}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":190,"column":43},"generated":{"line":1,"column":1969}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"requestId","original":{"line":191,"column":6},"generated":{"line":1,"column":1970}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":191,"column":17},"generated":{"line":1,"column":1980}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"requestId","original":{"line":191,"column":25},"generated":{"line":1,"column":1982}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"databaseName","original":{"line":192,"column":6},"generated":{"line":1,"column":1992}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"databaseName","original":{"line":192,"column":20},"generated":{"line":1,"column":2005}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":192,"column":33},"generated":{"line":1,"column":2007}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":193,"column":6},"generated":{"line":1,"column":2010}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":193,"column":6},"generated":{"line":1,"column":2022}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":194,"column":6},"generated":{"line":1,"column":2024}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cmd","original":{"line":194,"column":15},"generated":{"line":1,"column":2032}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":200,"column":0},"generated":{"line":1,"column":2037}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"CommandSucceededEvent","original":{"line":200,"column":6},"generated":{"line":1,"column":2043}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"constructor","original":{"line":209,"column":2},"generated":{"line":1,"column":2045}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":209,"column":14},"generated":{"line":1,"column":2057}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":209,"column":20},"generated":{"line":1,"column":2059}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":209,"column":29},"generated":{"line":1,"column":2061}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"started","original":{"line":209,"column":36},"generated":{"line":1,"column":2063}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cmd","original":{"line":210,"column":10},"generated":{"line":1,"column":2066}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cmd","original":{"line":210,"column":10},"generated":{"line":1,"column":2072}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractCommand","original":{"line":210,"column":16},"generated":{"line":1,"column":2074}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":210,"column":31},"generated":{"line":1,"column":2076}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":211,"column":10},"generated":{"line":1,"column":2079}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractCommandName","original":{"line":211,"column":24},"generated":{"line":1,"column":2081}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cmd","original":{"line":211,"column":43},"generated":{"line":1,"column":2083}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connectionDetails","original":{"line":212,"column":10},"generated":{"line":1,"column":2086}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractConnectionDetails","original":{"line":212,"column":30},"generated":{"line":1,"column":2088}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":212,"column":55},"generated":{"line":1,"column":2090}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Object","original":{"line":214,"column":4},"generated":{"line":1,"column":2093}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"assign","original":{"line":214,"column":11},"generated":{"line":1,"column":2100}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":214,"column":18},"generated":{"line":1,"column":2107}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connectionDetails","original":{"line":214,"column":24},"generated":{"line":1,"column":2112}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":214,"column":43},"generated":{"line":1,"column":2114}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"requestId","original":{"line":215,"column":6},"generated":{"line":1,"column":2115}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":215,"column":17},"generated":{"line":1,"column":2125}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"requestId","original":{"line":215,"column":25},"generated":{"line":1,"column":2127}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":216,"column":6},"generated":{"line":1,"column":2137}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":216,"column":6},"generated":{"line":1,"column":2149}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"duration","original":{"line":217,"column":6},"generated":{"line":1,"column":2151}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"calculateDurationInMs","original":{"line":217,"column":16},"generated":{"line":1,"column":2160}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"started","original":{"line":217,"column":38},"generated":{"line":1,"column":2162}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":218,"column":6},"generated":{"line":1,"column":2165}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"maybeRedact","original":{"line":218,"column":13},"generated":{"line":1,"column":2171}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":218,"column":25},"generated":{"line":1,"column":2173}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractReply","original":{"line":218,"column":38},"generated":{"line":1,"column":2175}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":218,"column":51},"generated":{"line":1,"column":2177}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"reply","original":{"line":218,"column":60},"generated":{"line":1,"column":2179}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":224,"column":0},"generated":{"line":1,"column":2186}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"CommandFailedEvent","original":{"line":224,"column":6},"generated":{"line":1,"column":2192}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"constructor","original":{"line":233,"column":2},"generated":{"line":1,"column":2194}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":233,"column":14},"generated":{"line":1,"column":2206}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":233,"column":20},"generated":{"line":1,"column":2208}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"error","original":{"line":233,"column":29},"generated":{"line":1,"column":2210}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"started","original":{"line":233,"column":36},"generated":{"line":1,"column":2212}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cmd","original":{"line":234,"column":10},"generated":{"line":1,"column":2215}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cmd","original":{"line":234,"column":10},"generated":{"line":1,"column":2221}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractCommand","original":{"line":234,"column":16},"generated":{"line":1,"column":2223}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":234,"column":31},"generated":{"line":1,"column":2225}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":235,"column":10},"generated":{"line":1,"column":2228}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractCommandName","original":{"line":235,"column":24},"generated":{"line":1,"column":2230}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"cmd","original":{"line":235,"column":43},"generated":{"line":1,"column":2232}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connectionDetails","original":{"line":236,"column":10},"generated":{"line":1,"column":2235}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"extractConnectionDetails","original":{"line":236,"column":30},"generated":{"line":1,"column":2237}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"pool","original":{"line":236,"column":55},"generated":{"line":1,"column":2239}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"Object","original":{"line":238,"column":4},"generated":{"line":1,"column":2242}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"assign","original":{"line":238,"column":11},"generated":{"line":1,"column":2249}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":238,"column":18},"generated":{"line":1,"column":2256}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"connectionDetails","original":{"line":238,"column":24},"generated":{"line":1,"column":2261}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":238,"column":43},"generated":{"line":1,"column":2263}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"requestId","original":{"line":239,"column":6},"generated":{"line":1,"column":2264}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"command","original":{"line":239,"column":17},"generated":{"line":1,"column":2274}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"requestId","original":{"line":239,"column":25},"generated":{"line":1,"column":2276}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":240,"column":6},"generated":{"line":1,"column":2286}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":240,"column":6},"generated":{"line":1,"column":2298}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"duration","original":{"line":241,"column":6},"generated":{"line":1,"column":2300}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"calculateDurationInMs","original":{"line":241,"column":16},"generated":{"line":1,"column":2309}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"started","original":{"line":241,"column":38},"generated":{"line":1,"column":2311}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"failure","original":{"line":242,"column":6},"generated":{"line":1,"column":2314}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"maybeRedact","original":{"line":242,"column":15},"generated":{"line":1,"column":2322}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"commandName","original":{"line":242,"column":27},"generated":{"line":1,"column":2324}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"error","original":{"line":242,"column":40},"generated":{"line":1,"column":2326}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"module","original":{"line":247,"column":0},"generated":{"line":1,"column":2332}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"exports","original":{"line":247,"column":7},"generated":{"line":1,"column":2339}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","original":{"line":247,"column":17},"generated":{"line":1,"column":2347}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"CommandStartedEvent","original":{"line":248,"column":2},"generated":{"line":1,"column":2348}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"CommandStartedEvent","original":{"line":248,"column":2},"generated":{"line":1,"column":2368}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"CommandSucceededEvent","original":{"line":249,"column":2},"generated":{"line":1,"column":2370}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"CommandSucceededEvent","original":{"line":249,"column":2},"generated":{"line":1,"column":2392}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"CommandFailedEvent","original":{"line":250,"column":2},"generated":{"line":1,"column":2394}},{"source":"../node_modules/mongodb/lib/core/connection/apm.js","name":"CommandFailedEvent","original":{"line":250,"column":2},"generated":{"line":1,"column":2413}}],"sources":{"../node_modules/mongodb/lib/core/connection/apm.js":"'use strict';\nconst Msg = require('../connection/msg').Msg;\nconst KillCursor = require('../connection/commands').KillCursor;\nconst GetMore = require('../connection/commands').GetMore;\nconst calculateDurationInMs = require('../../utils').calculateDurationInMs;\n\n/** Commands that we want to redact because of the sensitive nature of their contents */\nconst SENSITIVE_COMMANDS = new Set([\n  'authenticate',\n  'saslStart',\n  'saslContinue',\n  'getnonce',\n  'createUser',\n  'updateUser',\n  'copydbgetnonce',\n  'copydbsaslstart',\n  'copydb'\n]);\n\n// helper methods\nconst extractCommandName = commandDoc => Object.keys(commandDoc)[0];\nconst namespace = command => command.ns;\nconst databaseName = command => command.ns.split('.')[0];\nconst collectionName = command => command.ns.split('.')[1];\nconst generateConnectionId = pool =>\n  pool.options ? `${pool.options.host}:${pool.options.port}` : pool.address;\nconst maybeRedact = (commandName, result) => (SENSITIVE_COMMANDS.has(commandName) ? {} : result);\nconst isLegacyPool = pool => pool.s && pool.queue;\n\nconst LEGACY_FIND_QUERY_MAP = {\n  $query: 'filter',\n  $orderby: 'sort',\n  $hint: 'hint',\n  $comment: 'comment',\n  $maxScan: 'maxScan',\n  $max: 'max',\n  $min: 'min',\n  $returnKey: 'returnKey',\n  $showDiskLoc: 'showRecordId',\n  $maxTimeMS: 'maxTimeMS',\n  $snapshot: 'snapshot'\n};\n\nconst LEGACY_FIND_OPTIONS_MAP = {\n  numberToSkip: 'skip',\n  numberToReturn: 'batchSize',\n  returnFieldsSelector: 'projection'\n};\n\nconst OP_QUERY_KEYS = [\n  'tailable',\n  'oplogReplay',\n  'noCursorTimeout',\n  'awaitData',\n  'partial',\n  'exhaust'\n];\n\n/**\n * Extract the actual command from the query, possibly upconverting if it's a legacy\n * format\n *\n * @param {Object} command the command\n */\nconst extractCommand = command => {\n  if (command instanceof GetMore) {\n    return {\n      getMore: command.cursorId,\n      collection: collectionName(command),\n      batchSize: command.numberToReturn\n    };\n  }\n\n  if (command instanceof KillCursor) {\n    return {\n      killCursors: collectionName(command),\n      cursors: command.cursorIds\n    };\n  }\n\n  if (command instanceof Msg) {\n    return command.command;\n  }\n\n  if (command.query && command.query.$query) {\n    let result;\n    if (command.ns === 'admin.$cmd') {\n      // upconvert legacy command\n      result = Object.assign({}, command.query.$query);\n    } else {\n      // upconvert legacy find command\n      result = { find: collectionName(command) };\n      Object.keys(LEGACY_FIND_QUERY_MAP).forEach(key => {\n        if (typeof command.query[key] !== 'undefined')\n          result[LEGACY_FIND_QUERY_MAP[key]] = command.query[key];\n      });\n    }\n\n    Object.keys(LEGACY_FIND_OPTIONS_MAP).forEach(key => {\n      if (typeof command[key] !== 'undefined') result[LEGACY_FIND_OPTIONS_MAP[key]] = command[key];\n    });\n\n    OP_QUERY_KEYS.forEach(key => {\n      if (command[key]) result[key] = command[key];\n    });\n\n    if (typeof command.pre32Limit !== 'undefined') {\n      result.limit = command.pre32Limit;\n    }\n\n    if (command.query.$explain) {\n      return { explain: result };\n    }\n\n    return result;\n  }\n\n  return command.query ? command.query : command;\n};\n\nconst extractReply = (command, reply) => {\n  if (command instanceof GetMore) {\n    return {\n      ok: 1,\n      cursor: {\n        id: reply.message.cursorId,\n        ns: namespace(command),\n        nextBatch: reply.message.documents\n      }\n    };\n  }\n\n  if (command instanceof KillCursor) {\n    return {\n      ok: 1,\n      cursorsUnknown: command.cursorIds\n    };\n  }\n\n  // is this a legacy find command?\n  if (command.query && typeof command.query.$query !== 'undefined') {\n    return {\n      ok: 1,\n      cursor: {\n        id: reply.message.cursorId,\n        ns: namespace(command),\n        firstBatch: reply.message.documents\n      }\n    };\n  }\n\n  return reply && reply.result ? reply.result : reply;\n};\n\nconst extractConnectionDetails = pool => {\n  if (isLegacyPool(pool)) {\n    return {\n      connectionId: generateConnectionId(pool)\n    };\n  }\n\n  // APM in the modern pool is done at the `Connection` level, so we rename it here for\n  // readability.\n  const connection = pool;\n  return {\n    address: connection.address,\n    connectionId: connection.id\n  };\n};\n\n/** An event indicating the start of a given command */\nclass CommandStartedEvent {\n  /**\n   * Create a started event\n   *\n   * @param {Pool} pool the pool that originated the command\n   * @param {Object} command the command\n   */\n  constructor(pool, command) {\n    const cmd = extractCommand(command);\n    const commandName = extractCommandName(cmd);\n    const connectionDetails = extractConnectionDetails(pool);\n\n    // NOTE: remove in major revision, this is not spec behavior\n    if (SENSITIVE_COMMANDS.has(commandName)) {\n      this.commandObj = {};\n      this.commandObj[commandName] = true;\n    }\n\n    Object.assign(this, connectionDetails, {\n      requestId: command.requestId,\n      databaseName: databaseName(command),\n      commandName,\n      command: cmd\n    });\n  }\n}\n\n/** An event indicating the success of a given command */\nclass CommandSucceededEvent {\n  /**\n   * Create a succeeded event\n   *\n   * @param {Pool} pool the pool that originated the command\n   * @param {Object} command the command\n   * @param {Object} reply the reply for this command from the server\n   * @param {Array} started a high resolution tuple timestamp of when the command was first sent, to calculate duration\n   */\n  constructor(pool, command, reply, started) {\n    const cmd = extractCommand(command);\n    const commandName = extractCommandName(cmd);\n    const connectionDetails = extractConnectionDetails(pool);\n\n    Object.assign(this, connectionDetails, {\n      requestId: command.requestId,\n      commandName,\n      duration: calculateDurationInMs(started),\n      reply: maybeRedact(commandName, extractReply(command, reply))\n    });\n  }\n}\n\n/** An event indicating the failure of a given command */\nclass CommandFailedEvent {\n  /**\n   * Create a failure event\n   *\n   * @param {Pool} pool the pool that originated the command\n   * @param {Object} command the command\n   * @param {MongoError|Object} error the generated error or a server error response\n   * @param {Array} started a high resolution tuple timestamp of when the command was first sent, to calculate duration\n   */\n  constructor(pool, command, error, started) {\n    const cmd = extractCommand(command);\n    const commandName = extractCommandName(cmd);\n    const connectionDetails = extractConnectionDetails(pool);\n\n    Object.assign(this, connectionDetails, {\n      requestId: command.requestId,\n      commandName,\n      duration: calculateDurationInMs(started),\n      failure: maybeRedact(commandName, error)\n    });\n  }\n}\n\nmodule.exports = {\n  CommandStartedEvent,\n  CommandSucceededEvent,\n  CommandFailedEvent\n};\n"},"lineCount":null}},"error":null,"hash":"882ea7b31be47203a42fc46b40cc0b40","cacheData":{"env":{}}}