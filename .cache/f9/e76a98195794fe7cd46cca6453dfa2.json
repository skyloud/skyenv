{"id":"Rt7e","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"../core","loc":{"line":3,"column":27},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/insert_one.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/index.js"},{"name":"./operation","loc":{"line":4,"column":30},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/insert_one.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/operation.js"},{"name":"./common_functions","loc":{"line":5,"column":32},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/insert_one.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/common_functions.js"}],"generated":{"js":"\"use strict\";const e=require(\"../core\").MongoError,r=require(\"./operation\").OperationBase,t=require(\"./common_functions\").insertDocuments;class o extends r{constructor(e,r,t){super(t),this.collection=e,this.doc=r}execute(r){const o=this.collection,s=this.doc,n=this.options;if(Array.isArray(s))return r(e.create({message:\"doc parameter must be an object\",driver:!0}));t(o,[s],n,(e,t)=>{if(null!=r){if(e&&r)return r(e);if(null==t)return r(null,{result:{ok:1}});t.insertedCount=t.result.n,t.insertedId=s._id,r&&r(null,t)}})}}module.exports=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"MongoError","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"require","original":{"line":3,"column":19},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":3,"column":27},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"MongoError","original":{"line":3,"column":38},"generated":{"line":1,"column":40}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"OperationBase","original":{"line":4,"column":6},"generated":{"line":1,"column":51}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"require","original":{"line":4,"column":22},"generated":{"line":1,"column":53}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":4,"column":30},"generated":{"line":1,"column":61}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"OperationBase","original":{"line":4,"column":45},"generated":{"line":1,"column":76}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"insertDocuments","original":{"line":5,"column":6},"generated":{"line":1,"column":90}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"require","original":{"line":5,"column":24},"generated":{"line":1,"column":92}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":5,"column":32},"generated":{"line":1,"column":100}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"insertDocuments","original":{"line":5,"column":54},"generated":{"line":1,"column":122}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":7,"column":0},"generated":{"line":1,"column":138}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"InsertOneOperation","original":{"line":7,"column":6},"generated":{"line":1,"column":144}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"OperationBase","original":{"line":7,"column":33},"generated":{"line":1,"column":154}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"constructor","original":{"line":8,"column":2},"generated":{"line":1,"column":156}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"collection","original":{"line":8,"column":14},"generated":{"line":1,"column":168}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"doc","original":{"line":8,"column":26},"generated":{"line":1,"column":170}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"options","original":{"line":8,"column":31},"generated":{"line":1,"column":172}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"options","original":{"line":9,"column":10},"generated":{"line":1,"column":175}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"options","original":{"line":9,"column":10},"generated":{"line":1,"column":181}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"collection","original":{"line":11,"column":9},"generated":{"line":1,"column":184}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"collection","original":{"line":11,"column":9},"generated":{"line":1,"column":189}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"collection","original":{"line":11,"column":22},"generated":{"line":1,"column":200}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"doc","original":{"line":12,"column":9},"generated":{"line":1,"column":202}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"doc","original":{"line":12,"column":9},"generated":{"line":1,"column":207}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"doc","original":{"line":12,"column":15},"generated":{"line":1,"column":211}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"execute","original":{"line":15,"column":2},"generated":{"line":1,"column":213}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":15,"column":10},"generated":{"line":1,"column":221}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"coll","original":{"line":16,"column":10},"generated":{"line":1,"column":224}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"coll","original":{"line":16,"column":10},"generated":{"line":1,"column":230}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":16,"column":17},"generated":{"line":1,"column":232}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"collection","original":{"line":16,"column":22},"generated":{"line":1,"column":237}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"doc","original":{"line":17,"column":10},"generated":{"line":1,"column":248}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":17,"column":16},"generated":{"line":1,"column":250}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"doc","original":{"line":17,"column":21},"generated":{"line":1,"column":255}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"options","original":{"line":18,"column":10},"generated":{"line":1,"column":259}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":18,"column":20},"generated":{"line":1,"column":261}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"options","original":{"line":18,"column":25},"generated":{"line":1,"column":266}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"Array","original":{"line":20,"column":8},"generated":{"line":1,"column":274}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"Array","original":{"line":20,"column":8},"generated":{"line":1,"column":277}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"isArray","original":{"line":20,"column":14},"generated":{"line":1,"column":283}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"doc","original":{"line":20,"column":22},"generated":{"line":1,"column":291}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":21,"column":13},"generated":{"line":1,"column":294}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":21,"column":13},"generated":{"line":1,"column":301}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"MongoError","original":{"line":22,"column":8},"generated":{"line":1,"column":303}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"create","original":{"line":22,"column":19},"generated":{"line":1,"column":305}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":22,"column":26},"generated":{"line":1,"column":312}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"message","original":{"line":22,"column":28},"generated":{"line":1,"column":313}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":22,"column":37},"generated":{"line":1,"column":321}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"driver","original":{"line":22,"column":72},"generated":{"line":1,"column":355}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":22,"column":80},"generated":{"line":1,"column":363}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"insertDocuments","original":{"line":26,"column":4},"generated":{"line":1,"column":368}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"coll","original":{"line":26,"column":20},"generated":{"line":1,"column":370}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":26,"column":26},"generated":{"line":1,"column":372}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"doc","original":{"line":26,"column":27},"generated":{"line":1,"column":373}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"options","original":{"line":26,"column":33},"generated":{"line":1,"column":376}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":26,"column":42},"generated":{"line":1,"column":378}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"err","original":{"line":26,"column":43},"generated":{"line":1,"column":379}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"r","original":{"line":26,"column":48},"generated":{"line":1,"column":381}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":27,"column":10},"generated":{"line":1,"column":386}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":27,"column":22},"generated":{"line":1,"column":389}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":27,"column":10},"generated":{"line":1,"column":395}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":27,"column":10},"generated":{"line":1,"column":397}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"err","original":{"line":28,"column":10},"generated":{"line":1,"column":398}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"err","original":{"line":28,"column":10},"generated":{"line":1,"column":401}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":28,"column":17},"generated":{"line":1,"column":404}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":28,"column":27},"generated":{"line":1,"column":406}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":28,"column":34},"generated":{"line":1,"column":413}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"err","original":{"line":28,"column":43},"generated":{"line":1,"column":415}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"r","original":{"line":30,"column":10},"generated":{"line":1,"column":418}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":30,"column":15},"generated":{"line":1,"column":421}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"r","original":{"line":30,"column":10},"generated":{"line":1,"column":427}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":30,"column":21},"generated":{"line":1,"column":429}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":30,"column":28},"generated":{"line":1,"column":436}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":30,"column":37},"generated":{"line":1,"column":438}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":30,"column":43},"generated":{"line":1,"column":443}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"result","original":{"line":30,"column":45},"generated":{"line":1,"column":444}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":30,"column":53},"generated":{"line":1,"column":451}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"ok","original":{"line":30,"column":55},"generated":{"line":1,"column":452}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":30,"column":59},"generated":{"line":1,"column":455}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"r","original":{"line":32,"column":6},"generated":{"line":1,"column":460}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"insertedCount","original":{"line":32,"column":8},"generated":{"line":1,"column":462}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"r","original":{"line":32,"column":24},"generated":{"line":1,"column":476}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"result","original":{"line":32,"column":26},"generated":{"line":1,"column":478}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"n","original":{"line":32,"column":33},"generated":{"line":1,"column":485}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"r","original":{"line":33,"column":6},"generated":{"line":1,"column":487}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"insertedId","original":{"line":33,"column":8},"generated":{"line":1,"column":489}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"doc","original":{"line":33,"column":21},"generated":{"line":1,"column":500}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"_id","original":{"line":33,"column":25},"generated":{"line":1,"column":502}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":34,"column":10},"generated":{"line":1,"column":506}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"callback","original":{"line":34,"column":20},"generated":{"line":1,"column":509}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","original":{"line":34,"column":29},"generated":{"line":1,"column":511}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"r","original":{"line":34,"column":35},"generated":{"line":1,"column":516}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"module","original":{"line":39,"column":0},"generated":{"line":1,"column":523}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"exports","original":{"line":39,"column":7},"generated":{"line":1,"column":530}},{"source":"../node_modules/mongodb/lib/operations/insert_one.js","name":"InsertOneOperation","original":{"line":39,"column":17},"generated":{"line":1,"column":538}}],"sources":{"../node_modules/mongodb/lib/operations/insert_one.js":"'use strict';\n\nconst MongoError = require('../core').MongoError;\nconst OperationBase = require('./operation').OperationBase;\nconst insertDocuments = require('./common_functions').insertDocuments;\n\nclass InsertOneOperation extends OperationBase {\n  constructor(collection, doc, options) {\n    super(options);\n\n    this.collection = collection;\n    this.doc = doc;\n  }\n\n  execute(callback) {\n    const coll = this.collection;\n    const doc = this.doc;\n    const options = this.options;\n\n    if (Array.isArray(doc)) {\n      return callback(\n        MongoError.create({ message: 'doc parameter must be an object', driver: true })\n      );\n    }\n\n    insertDocuments(coll, [doc], options, (err, r) => {\n      if (callback == null) return;\n      if (err && callback) return callback(err);\n      // Workaround for pre 2.6 servers\n      if (r == null) return callback(null, { result: { ok: 1 } });\n      // Add values to top level to ensure crud spec compatibility\n      r.insertedCount = r.result.n;\n      r.insertedId = doc._id;\n      if (callback) callback(null, r);\n    });\n  }\n}\n\nmodule.exports = InsertOneOperation;\n"},"lineCount":null}},"error":null,"hash":"05bc06a38891fe23c77007ec88a0f5dd","cacheData":{"env":{}}}