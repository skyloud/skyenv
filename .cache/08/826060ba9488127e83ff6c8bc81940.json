{"id":"UfVw","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"../connection/commands","loc":{"line":3,"column":24},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/get_more.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/connection/commands.js"},{"name":"../connection/utils","loc":{"line":4,"column":29},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/get_more.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/connection/utils.js"},{"name":"../error","loc":{"line":6,"column":34},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/get_more.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/error.js"},{"name":"./shared","loc":{"line":11,"column":40},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/get_more.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/shared.js"},{"name":"../utils","loc":{"line":10,"column":31},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/get_more.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/utils.js"},{"name":"./command","loc":{"line":12,"column":24},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/get_more.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/command.js"}],"generated":{"js":"\"use strict\";const r=require(\"../connection/commands\").GetMore,e=require(\"../connection/utils\").retrieveBSON,o=require(\"../error\").MongoError,n=require(\"../error\").MongoNetworkError,t=e(),s=t.Long,u=require(\"./shared\").collectionNamespace,c=require(\"../utils\").maxWireVersion,i=require(\"./shared\").applyCommonQueryOptions,m=require(\"./command\");function d(e,t,d,l,a,f){a=a||{};const b=c(e);function I(r,e){if(r)return f(r);const t=e.message;if(t.cursorNotFound)return f(new n(\"cursor killed or timed out\"),null);if(b<4){const r=\"number\"==typeof t.cursorId?s.fromNumber(t.cursorId):t.cursorId;return d.documents=t.documents,d.cursorId=r,void f(null,null,t.connection)}if(0===t.documents[0].ok)return f(new o(t.documents[0]));const u=\"number\"==typeof t.documents[0].cursor.id?s.fromNumber(t.documents[0].cursor.id):t.documents[0].cursor.id;d.documents=t.documents[0].cursor.nextBatch,d.cursorId=u,f(null,t.documents[0],t.connection)}if(b<4){const o=e.s.bson,n=new r(o,t,d.cursorId,{numberToReturn:l}),s=i({},d);return void e.s.pool.write(n,s,I)}const p={getMore:d.cursorId instanceof s?d.cursorId:s.fromNumber(d.cursorId),collection:u(t),batchSize:Math.abs(l)};d.cmd.tailable&&\"number\"==typeof d.cmd.maxAwaitTimeMS&&(p.maxTimeMS=d.cmd.maxAwaitTimeMS);const q=Object.assign({returnFieldSelector:null,documentsReturnedIn:\"nextBatch\"},a);d.session&&(q.session=d.session),m(e,t,p,q,I)}module.exports=d;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"GetMore","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"require","original":{"line":3,"column":16},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":3,"column":24},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"GetMore","original":{"line":3,"column":50},"generated":{"line":1,"column":55}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"retrieveBSON","original":{"line":4,"column":6},"generated":{"line":1,"column":63}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"require","original":{"line":4,"column":21},"generated":{"line":1,"column":65}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":4,"column":29},"generated":{"line":1,"column":73}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"retrieveBSON","original":{"line":4,"column":52},"generated":{"line":1,"column":96}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"MongoError","original":{"line":5,"column":6},"generated":{"line":1,"column":109}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"require","original":{"line":5,"column":19},"generated":{"line":1,"column":111}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":5,"column":27},"generated":{"line":1,"column":119}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"MongoError","original":{"line":5,"column":39},"generated":{"line":1,"column":131}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"MongoNetworkError","original":{"line":6,"column":6},"generated":{"line":1,"column":142}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"require","original":{"line":6,"column":26},"generated":{"line":1,"column":144}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":6,"column":34},"generated":{"line":1,"column":152}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"MongoNetworkError","original":{"line":6,"column":46},"generated":{"line":1,"column":164}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"BSON","original":{"line":7,"column":6},"generated":{"line":1,"column":182}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"retrieveBSON","original":{"line":7,"column":13},"generated":{"line":1,"column":184}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"Long","original":{"line":8,"column":6},"generated":{"line":1,"column":188}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"BSON","original":{"line":8,"column":13},"generated":{"line":1,"column":190}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"Long","original":{"line":8,"column":18},"generated":{"line":1,"column":192}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"collectionNamespace","original":{"line":9,"column":6},"generated":{"line":1,"column":197}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"require","original":{"line":9,"column":28},"generated":{"line":1,"column":199}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":9,"column":36},"generated":{"line":1,"column":207}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"collectionNamespace","original":{"line":9,"column":48},"generated":{"line":1,"column":219}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"maxWireVersion","original":{"line":10,"column":6},"generated":{"line":1,"column":239}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"require","original":{"line":10,"column":23},"generated":{"line":1,"column":241}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":10,"column":31},"generated":{"line":1,"column":249}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"maxWireVersion","original":{"line":10,"column":43},"generated":{"line":1,"column":261}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"applyCommonQueryOptions","original":{"line":11,"column":6},"generated":{"line":1,"column":276}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"require","original":{"line":11,"column":32},"generated":{"line":1,"column":278}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":11,"column":40},"generated":{"line":1,"column":286}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"applyCommonQueryOptions","original":{"line":11,"column":52},"generated":{"line":1,"column":298}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"command","original":{"line":12,"column":6},"generated":{"line":1,"column":322}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"require","original":{"line":12,"column":16},"generated":{"line":1,"column":324}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":12,"column":24},"generated":{"line":1,"column":332}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":14,"column":0},"generated":{"line":1,"column":345}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"getMore","original":{"line":14,"column":9},"generated":{"line":1,"column":354}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"server","original":{"line":14,"column":17},"generated":{"line":1,"column":356}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"ns","original":{"line":14,"column":25},"generated":{"line":1,"column":358}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":14,"column":29},"generated":{"line":1,"column":360}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"batchSize","original":{"line":14,"column":42},"generated":{"line":1,"column":362}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"options","original":{"line":14,"column":53},"generated":{"line":1,"column":364}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"callback","original":{"line":14,"column":62},"generated":{"line":1,"column":366}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"options","original":{"line":15,"column":2},"generated":{"line":1,"column":369}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"options","original":{"line":15,"column":12},"generated":{"line":1,"column":371}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":15,"column":23},"generated":{"line":1,"column":374}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"wireVersion","original":{"line":17,"column":8},"generated":{"line":1,"column":377}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"wireVersion","original":{"line":17,"column":8},"generated":{"line":1,"column":383}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"maxWireVersion","original":{"line":17,"column":22},"generated":{"line":1,"column":385}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"server","original":{"line":17,"column":37},"generated":{"line":1,"column":387}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"queryCallback","original":{"line":18,"column":11},"generated":{"line":1,"column":390}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"queryCallback","original":{"line":18,"column":11},"generated":{"line":1,"column":399}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"err","original":{"line":18,"column":25},"generated":{"line":1,"column":401}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"result","original":{"line":18,"column":30},"generated":{"line":1,"column":403}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"err","original":{"line":19,"column":8},"generated":{"line":1,"column":406}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"err","original":{"line":19,"column":8},"generated":{"line":1,"column":409}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":19,"column":13},"generated":{"line":1,"column":411}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"callback","original":{"line":19,"column":20},"generated":{"line":1,"column":418}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"err","original":{"line":19,"column":29},"generated":{"line":1,"column":420}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":20,"column":10},"generated":{"line":1,"column":423}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":20,"column":10},"generated":{"line":1,"column":429}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"result","original":{"line":20,"column":21},"generated":{"line":1,"column":431}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"message","original":{"line":20,"column":28},"generated":{"line":1,"column":433}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":23,"column":8},"generated":{"line":1,"column":441}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":23,"column":8},"generated":{"line":1,"column":444}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorNotFound","original":{"line":23,"column":17},"generated":{"line":1,"column":446}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"callback","original":{"line":24,"column":13},"generated":{"line":1,"column":461}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"callback","original":{"line":24,"column":13},"generated":{"line":1,"column":468}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":24,"column":22},"generated":{"line":1,"column":470}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"MongoNetworkError","original":{"line":24,"column":26},"generated":{"line":1,"column":474}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":24,"column":44},"generated":{"line":1,"column":476}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":24,"column":75},"generated":{"line":1,"column":506}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"wireVersion","original":{"line":27,"column":8},"generated":{"line":1,"column":512}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"wireVersion","original":{"line":27,"column":8},"generated":{"line":1,"column":515}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":27,"column":22},"generated":{"line":1,"column":517}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":27,"column":25},"generated":{"line":1,"column":519}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":28,"column":12},"generated":{"line":1,"column":520}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":28,"column":12},"generated":{"line":1,"column":526}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":29,"column":37},"generated":{"line":1,"column":528}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":29,"column":15},"generated":{"line":1,"column":545}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":29,"column":24},"generated":{"line":1,"column":547}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"Long","original":{"line":30,"column":12},"generated":{"line":1,"column":556}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"fromNumber","original":{"line":30,"column":17},"generated":{"line":1,"column":558}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":30,"column":28},"generated":{"line":1,"column":569}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":30,"column":37},"generated":{"line":1,"column":571}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":31,"column":12},"generated":{"line":1,"column":581}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":31,"column":21},"generated":{"line":1,"column":583}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":37,"column":6},"generated":{"line":1,"column":592}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":33,"column":6},"generated":{"line":1,"column":599}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documents","original":{"line":33,"column":18},"generated":{"line":1,"column":601}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":33,"column":30},"generated":{"line":1,"column":611}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documents","original":{"line":33,"column":39},"generated":{"line":1,"column":613}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":34,"column":6},"generated":{"line":1,"column":623}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":34,"column":18},"generated":{"line":1,"column":625}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":34,"column":29},"generated":{"line":1,"column":634}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"callback","original":{"line":36,"column":6},"generated":{"line":1,"column":641}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":36,"column":15},"generated":{"line":1,"column":643}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":36,"column":21},"generated":{"line":1,"column":648}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":36,"column":27},"generated":{"line":1,"column":653}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"connection","original":{"line":36,"column":36},"generated":{"line":1,"column":655}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":41,"column":8},"generated":{"line":1,"column":667}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":41,"column":37},"generated":{"line":1,"column":670}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":41,"column":8},"generated":{"line":1,"column":674}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documents","original":{"line":41,"column":17},"generated":{"line":1,"column":676}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":41,"column":27},"generated":{"line":1,"column":686}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"ok","original":{"line":41,"column":30},"generated":{"line":1,"column":689}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"callback","original":{"line":42,"column":13},"generated":{"line":1,"column":692}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"callback","original":{"line":42,"column":13},"generated":{"line":1,"column":699}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":42,"column":22},"generated":{"line":1,"column":701}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"MongoError","original":{"line":42,"column":26},"generated":{"line":1,"column":705}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":42,"column":37},"generated":{"line":1,"column":707}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documents","original":{"line":42,"column":46},"generated":{"line":1,"column":709}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":42,"column":56},"generated":{"line":1,"column":719}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":46,"column":10},"generated":{"line":1,"column":724}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":46,"column":10},"generated":{"line":1,"column":730}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":47,"column":49},"generated":{"line":1,"column":732}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":47,"column":13},"generated":{"line":1,"column":749}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documents","original":{"line":47,"column":22},"generated":{"line":1,"column":751}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":47,"column":32},"generated":{"line":1,"column":761}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursor","original":{"line":47,"column":35},"generated":{"line":1,"column":764}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"id","original":{"line":47,"column":42},"generated":{"line":1,"column":771}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"Long","original":{"line":48,"column":10},"generated":{"line":1,"column":774}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"fromNumber","original":{"line":48,"column":15},"generated":{"line":1,"column":776}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":48,"column":26},"generated":{"line":1,"column":787}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documents","original":{"line":48,"column":35},"generated":{"line":1,"column":789}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":48,"column":45},"generated":{"line":1,"column":799}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursor","original":{"line":48,"column":48},"generated":{"line":1,"column":802}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"id","original":{"line":48,"column":55},"generated":{"line":1,"column":809}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":49,"column":10},"generated":{"line":1,"column":813}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documents","original":{"line":49,"column":19},"generated":{"line":1,"column":815}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":49,"column":29},"generated":{"line":1,"column":825}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursor","original":{"line":49,"column":32},"generated":{"line":1,"column":828}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"id","original":{"line":49,"column":39},"generated":{"line":1,"column":835}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":51,"column":4},"generated":{"line":1,"column":838}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documents","original":{"line":51,"column":16},"generated":{"line":1,"column":840}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":51,"column":28},"generated":{"line":1,"column":850}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documents","original":{"line":51,"column":37},"generated":{"line":1,"column":852}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":51,"column":47},"generated":{"line":1,"column":862}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursor","original":{"line":51,"column":50},"generated":{"line":1,"column":865}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"nextBatch","original":{"line":51,"column":57},"generated":{"line":1,"column":872}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":52,"column":4},"generated":{"line":1,"column":882}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":52,"column":16},"generated":{"line":1,"column":884}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":52,"column":27},"generated":{"line":1,"column":893}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"callback","original":{"line":54,"column":4},"generated":{"line":1,"column":895}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":54,"column":13},"generated":{"line":1,"column":897}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":54,"column":19},"generated":{"line":1,"column":902}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documents","original":{"line":54,"column":28},"generated":{"line":1,"column":904}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":54,"column":38},"generated":{"line":1,"column":914}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"response","original":{"line":54,"column":42},"generated":{"line":1,"column":917}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"connection","original":{"line":54,"column":51},"generated":{"line":1,"column":919}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"wireVersion","original":{"line":57,"column":6},"generated":{"line":1,"column":931}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"wireVersion","original":{"line":57,"column":6},"generated":{"line":1,"column":934}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":57,"column":20},"generated":{"line":1,"column":936}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":57,"column":23},"generated":{"line":1,"column":938}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"bson","original":{"line":58,"column":10},"generated":{"line":1,"column":939}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"bson","original":{"line":58,"column":10},"generated":{"line":1,"column":945}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"server","original":{"line":58,"column":17},"generated":{"line":1,"column":947}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"s","original":{"line":58,"column":24},"generated":{"line":1,"column":949}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"bson","original":{"line":58,"column":26},"generated":{"line":1,"column":951}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"getMoreOp","original":{"line":59,"column":10},"generated":{"line":1,"column":956}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":59,"column":22},"generated":{"line":1,"column":958}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"GetMore","original":{"line":59,"column":26},"generated":{"line":1,"column":962}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"bson","original":{"line":59,"column":34},"generated":{"line":1,"column":964}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"ns","original":{"line":59,"column":40},"generated":{"line":1,"column":966}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":59,"column":44},"generated":{"line":1,"column":968}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":59,"column":56},"generated":{"line":1,"column":970}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":59,"column":66},"generated":{"line":1,"column":979}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"numberToReturn","original":{"line":59,"column":68},"generated":{"line":1,"column":980}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"batchSize","original":{"line":59,"column":84},"generated":{"line":1,"column":995}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"queryOptions","original":{"line":60,"column":10},"generated":{"line":1,"column":999}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"applyCommonQueryOptions","original":{"line":60,"column":25},"generated":{"line":1,"column":1001}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":60,"column":49},"generated":{"line":1,"column":1003}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":60,"column":53},"generated":{"line":1,"column":1006}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":62,"column":4},"generated":{"line":1,"column":1009}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"server","original":{"line":61,"column":4},"generated":{"line":1,"column":1021}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"s","original":{"line":61,"column":11},"generated":{"line":1,"column":1023}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"pool","original":{"line":61,"column":13},"generated":{"line":1,"column":1025}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"write","original":{"line":61,"column":18},"generated":{"line":1,"column":1030}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"getMoreOp","original":{"line":61,"column":24},"generated":{"line":1,"column":1036}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"queryOptions","original":{"line":61,"column":35},"generated":{"line":1,"column":1038}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"queryCallback","original":{"line":61,"column":49},"generated":{"line":1,"column":1040}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":65,"column":8},"generated":{"line":1,"column":1043}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"getMoreCmd","original":{"line":70,"column":8},"generated":{"line":1,"column":1049}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":70,"column":21},"generated":{"line":1,"column":1051}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"getMore","original":{"line":71,"column":4},"generated":{"line":1,"column":1052}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":66,"column":4},"generated":{"line":1,"column":1060}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":66,"column":16},"generated":{"line":1,"column":1062}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"Long","original":{"line":66,"column":36},"generated":{"line":1,"column":1082}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":67,"column":8},"generated":{"line":1,"column":1084}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":67,"column":20},"generated":{"line":1,"column":1086}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"Long","original":{"line":68,"column":8},"generated":{"line":1,"column":1095}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"fromNumber","original":{"line":68,"column":13},"generated":{"line":1,"column":1097}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":68,"column":24},"generated":{"line":1,"column":1108}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorId","original":{"line":68,"column":36},"generated":{"line":1,"column":1110}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"collection","original":{"line":72,"column":4},"generated":{"line":1,"column":1120}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"collectionNamespace","original":{"line":72,"column":16},"generated":{"line":1,"column":1131}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"ns","original":{"line":72,"column":36},"generated":{"line":1,"column":1133}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"batchSize","original":{"line":73,"column":4},"generated":{"line":1,"column":1136}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"Math","original":{"line":73,"column":15},"generated":{"line":1,"column":1146}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"abs","original":{"line":73,"column":20},"generated":{"line":1,"column":1151}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"batchSize","original":{"line":73,"column":24},"generated":{"line":1,"column":1155}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":76,"column":6},"generated":{"line":1,"column":1159}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cmd","original":{"line":76,"column":18},"generated":{"line":1,"column":1161}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"tailable","original":{"line":76,"column":22},"generated":{"line":1,"column":1165}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":76,"column":76},"generated":{"line":1,"column":1175}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":76,"column":41},"generated":{"line":1,"column":1192}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cmd","original":{"line":76,"column":53},"generated":{"line":1,"column":1194}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"maxAwaitTimeMS","original":{"line":76,"column":57},"generated":{"line":1,"column":1198}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"getMoreCmd","original":{"line":77,"column":4},"generated":{"line":1,"column":1215}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"maxTimeMS","original":{"line":77,"column":15},"generated":{"line":1,"column":1217}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":77,"column":27},"generated":{"line":1,"column":1227}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cmd","original":{"line":77,"column":39},"generated":{"line":1,"column":1229}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"maxAwaitTimeMS","original":{"line":77,"column":43},"generated":{"line":1,"column":1233}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"commandOptions","original":{"line":80,"column":8},"generated":{"line":1,"column":1249}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"commandOptions","original":{"line":80,"column":8},"generated":{"line":1,"column":1255}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"Object","original":{"line":80,"column":25},"generated":{"line":1,"column":1257}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"assign","original":{"line":80,"column":32},"generated":{"line":1,"column":1264}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":81,"column":4},"generated":{"line":1,"column":1271}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"returnFieldSelector","original":{"line":82,"column":6},"generated":{"line":1,"column":1272}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":82,"column":27},"generated":{"line":1,"column":1292}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"documentsReturnedIn","original":{"line":83,"column":6},"generated":{"line":1,"column":1297}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","original":{"line":83,"column":27},"generated":{"line":1,"column":1317}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"options","original":{"line":85,"column":4},"generated":{"line":1,"column":1330}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":88,"column":6},"generated":{"line":1,"column":1333}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"session","original":{"line":88,"column":18},"generated":{"line":1,"column":1335}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"commandOptions","original":{"line":89,"column":4},"generated":{"line":1,"column":1345}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"session","original":{"line":89,"column":19},"generated":{"line":1,"column":1347}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"cursorState","original":{"line":89,"column":29},"generated":{"line":1,"column":1355}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"session","original":{"line":89,"column":41},"generated":{"line":1,"column":1357}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"command","original":{"line":92,"column":2},"generated":{"line":1,"column":1366}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"server","original":{"line":92,"column":10},"generated":{"line":1,"column":1368}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"ns","original":{"line":92,"column":18},"generated":{"line":1,"column":1370}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"getMoreCmd","original":{"line":92,"column":22},"generated":{"line":1,"column":1372}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"commandOptions","original":{"line":92,"column":34},"generated":{"line":1,"column":1374}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"queryCallback","original":{"line":92,"column":50},"generated":{"line":1,"column":1376}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"module","original":{"line":95,"column":0},"generated":{"line":1,"column":1379}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"exports","original":{"line":95,"column":7},"generated":{"line":1,"column":1386}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/get_more.js","name":"getMore","original":{"line":95,"column":17},"generated":{"line":1,"column":1394}}],"sources":{"../node_modules/mongodb/lib/core/wireprotocol/get_more.js":"'use strict';\n\nconst GetMore = require('../connection/commands').GetMore;\nconst retrieveBSON = require('../connection/utils').retrieveBSON;\nconst MongoError = require('../error').MongoError;\nconst MongoNetworkError = require('../error').MongoNetworkError;\nconst BSON = retrieveBSON();\nconst Long = BSON.Long;\nconst collectionNamespace = require('./shared').collectionNamespace;\nconst maxWireVersion = require('../utils').maxWireVersion;\nconst applyCommonQueryOptions = require('./shared').applyCommonQueryOptions;\nconst command = require('./command');\n\nfunction getMore(server, ns, cursorState, batchSize, options, callback) {\n  options = options || {};\n\n  const wireVersion = maxWireVersion(server);\n  function queryCallback(err, result) {\n    if (err) return callback(err);\n    const response = result.message;\n\n    // If we have a timed out query or a cursor that was killed\n    if (response.cursorNotFound) {\n      return callback(new MongoNetworkError('cursor killed or timed out'), null);\n    }\n\n    if (wireVersion < 4) {\n      const cursorId =\n        typeof response.cursorId === 'number'\n          ? Long.fromNumber(response.cursorId)\n          : response.cursorId;\n\n      cursorState.documents = response.documents;\n      cursorState.cursorId = cursorId;\n\n      callback(null, null, response.connection);\n      return;\n    }\n\n    // We have an error detected\n    if (response.documents[0].ok === 0) {\n      return callback(new MongoError(response.documents[0]));\n    }\n\n    // Ensure we have a Long valid cursor id\n    const cursorId =\n      typeof response.documents[0].cursor.id === 'number'\n        ? Long.fromNumber(response.documents[0].cursor.id)\n        : response.documents[0].cursor.id;\n\n    cursorState.documents = response.documents[0].cursor.nextBatch;\n    cursorState.cursorId = cursorId;\n\n    callback(null, response.documents[0], response.connection);\n  }\n\n  if (wireVersion < 4) {\n    const bson = server.s.bson;\n    const getMoreOp = new GetMore(bson, ns, cursorState.cursorId, { numberToReturn: batchSize });\n    const queryOptions = applyCommonQueryOptions({}, cursorState);\n    server.s.pool.write(getMoreOp, queryOptions, queryCallback);\n    return;\n  }\n\n  const cursorId =\n    cursorState.cursorId instanceof Long\n      ? cursorState.cursorId\n      : Long.fromNumber(cursorState.cursorId);\n\n  const getMoreCmd = {\n    getMore: cursorId,\n    collection: collectionNamespace(ns),\n    batchSize: Math.abs(batchSize)\n  };\n\n  if (cursorState.cmd.tailable && typeof cursorState.cmd.maxAwaitTimeMS === 'number') {\n    getMoreCmd.maxTimeMS = cursorState.cmd.maxAwaitTimeMS;\n  }\n\n  const commandOptions = Object.assign(\n    {\n      returnFieldSelector: null,\n      documentsReturnedIn: 'nextBatch'\n    },\n    options\n  );\n\n  if (cursorState.session) {\n    commandOptions.session = cursorState.session;\n  }\n\n  command(server, ns, getMoreCmd, commandOptions, queryCallback);\n}\n\nmodule.exports = getMore;\n"},"lineCount":null}},"error":null,"hash":"48e23bce1fc737e1c19c1ef436fb633e","cacheData":{"env":{}}}