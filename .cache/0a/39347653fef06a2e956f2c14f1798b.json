{"id":"rF5a","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"./operation","loc":{"line":3,"column":30},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/collections.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/operation.js"},{"name":"../utils","loc":{"line":4,"column":31},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/collections.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/utils.js"},{"name":"../collection","loc":{"line":9,"column":25},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/collections.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/collection.js"}],"generated":{"js":"\"use strict\";const e=require(\"./operation\").OperationBase,t=require(\"../utils\").handleCallback;let n;function s(){return n||(n=require(\"../collection\")),n}class o extends e{constructor(e,t){super(t),this.db=e}execute(e){const n=this.db;let o=this.options,l=s();o=Object.assign({},o,{nameOnly:!0}),n.listCollections({},o).toArray((s,o)=>{if(null!=s)return t(e,s,null);o=o.filter(e=>-1===e.name.indexOf(\"$\")),t(e,null,o.map(e=>new l(n,n.s.topology,n.databaseName,e.name,n.s.pkFactory,n.s.options)))})}}module.exports=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"OperationBase","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"require","original":{"line":3,"column":22},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":3,"column":30},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"OperationBase","original":{"line":3,"column":45},"generated":{"line":1,"column":44}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"handleCallback","original":{"line":4,"column":6},"generated":{"line":1,"column":58}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"require","original":{"line":4,"column":23},"generated":{"line":1,"column":60}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":4,"column":31},"generated":{"line":1,"column":68}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"handleCallback","original":{"line":4,"column":43},"generated":{"line":1,"column":80}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":6,"column":0},"generated":{"line":1,"column":95}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"collection","original":{"line":6,"column":4},"generated":{"line":1,"column":99}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":7,"column":0},"generated":{"line":1,"column":101}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"loadCollection","original":{"line":7,"column":9},"generated":{"line":1,"column":110}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"collection","original":{"line":11,"column":9},"generated":{"line":1,"column":114}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"collection","original":{"line":8,"column":7},"generated":{"line":1,"column":121}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"collection","original":{"line":9,"column":4},"generated":{"line":1,"column":125}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"require","original":{"line":9,"column":17},"generated":{"line":1,"column":127}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":9,"column":25},"generated":{"line":1,"column":135}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"collection","original":{"line":11,"column":9},"generated":{"line":1,"column":153}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":14,"column":0},"generated":{"line":1,"column":155}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"CollectionsOperation","original":{"line":14,"column":6},"generated":{"line":1,"column":161}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"OperationBase","original":{"line":14,"column":35},"generated":{"line":1,"column":171}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"constructor","original":{"line":15,"column":2},"generated":{"line":1,"column":173}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":15,"column":14},"generated":{"line":1,"column":185}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"options","original":{"line":15,"column":18},"generated":{"line":1,"column":187}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"options","original":{"line":16,"column":10},"generated":{"line":1,"column":190}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"options","original":{"line":16,"column":10},"generated":{"line":1,"column":196}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":18,"column":9},"generated":{"line":1,"column":199}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":18,"column":9},"generated":{"line":1,"column":204}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":18,"column":14},"generated":{"line":1,"column":207}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"execute","original":{"line":21,"column":2},"generated":{"line":1,"column":209}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"callback","original":{"line":21,"column":10},"generated":{"line":1,"column":217}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":22,"column":10},"generated":{"line":1,"column":220}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":22,"column":10},"generated":{"line":1,"column":226}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":22,"column":15},"generated":{"line":1,"column":228}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":22,"column":20},"generated":{"line":1,"column":233}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"options","original":{"line":23,"column":8},"generated":{"line":1,"column":236}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"options","original":{"line":23,"column":8},"generated":{"line":1,"column":240}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":23,"column":18},"generated":{"line":1,"column":242}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"options","original":{"line":23,"column":23},"generated":{"line":1,"column":247}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"Collection","original":{"line":25,"column":8},"generated":{"line":1,"column":255}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"loadCollection","original":{"line":25,"column":21},"generated":{"line":1,"column":257}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"options","original":{"line":27,"column":4},"generated":{"line":1,"column":261}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"Object","original":{"line":27,"column":14},"generated":{"line":1,"column":263}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"assign","original":{"line":27,"column":21},"generated":{"line":1,"column":270}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":27,"column":28},"generated":{"line":1,"column":277}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"options","original":{"line":27,"column":32},"generated":{"line":1,"column":280}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":27,"column":41},"generated":{"line":1,"column":282}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"nameOnly","original":{"line":27,"column":43},"generated":{"line":1,"column":283}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":27,"column":53},"generated":{"line":1,"column":293}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":29,"column":4},"generated":{"line":1,"column":297}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"listCollections","original":{"line":29,"column":7},"generated":{"line":1,"column":299}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":29,"column":23},"generated":{"line":1,"column":315}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"options","original":{"line":29,"column":27},"generated":{"line":1,"column":318}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"toArray","original":{"line":29,"column":36},"generated":{"line":1,"column":321}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":29,"column":44},"generated":{"line":1,"column":329}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"err","original":{"line":29,"column":45},"generated":{"line":1,"column":330}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"documents","original":{"line":29,"column":50},"generated":{"line":1,"column":332}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"err","original":{"line":30,"column":10},"generated":{"line":1,"column":337}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":30,"column":17},"generated":{"line":1,"column":340}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"err","original":{"line":30,"column":10},"generated":{"line":1,"column":346}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":30,"column":23},"generated":{"line":1,"column":348}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"handleCallback","original":{"line":30,"column":30},"generated":{"line":1,"column":355}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"callback","original":{"line":30,"column":45},"generated":{"line":1,"column":357}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"err","original":{"line":30,"column":55},"generated":{"line":1,"column":359}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":30,"column":60},"generated":{"line":1,"column":361}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"documents","original":{"line":32,"column":6},"generated":{"line":1,"column":367}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"documents","original":{"line":32,"column":18},"generated":{"line":1,"column":369}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"filter","original":{"line":32,"column":28},"generated":{"line":1,"column":371}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"doc","original":{"line":32,"column":35},"generated":{"line":1,"column":378}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":33,"column":42},"generated":{"line":1,"column":382}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"doc","original":{"line":33,"column":15},"generated":{"line":1,"column":386}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"name","original":{"line":33,"column":19},"generated":{"line":1,"column":388}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"indexOf","original":{"line":33,"column":24},"generated":{"line":1,"column":393}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":33,"column":32},"generated":{"line":1,"column":401}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"handleCallback","original":{"line":37,"column":6},"generated":{"line":1,"column":407}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"callback","original":{"line":38,"column":8},"generated":{"line":1,"column":409}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":39,"column":8},"generated":{"line":1,"column":411}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"documents","original":{"line":40,"column":8},"generated":{"line":1,"column":416}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"map","original":{"line":40,"column":18},"generated":{"line":1,"column":418}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"d","original":{"line":40,"column":22},"generated":{"line":1,"column":422}},{"source":"../node_modules/mongodb/lib/operations/collections.js","original":{"line":41,"column":17},"generated":{"line":1,"column":425}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"Collection","original":{"line":41,"column":21},"generated":{"line":1,"column":429}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":42,"column":12},"generated":{"line":1,"column":431}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":43,"column":12},"generated":{"line":1,"column":433}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"s","original":{"line":43,"column":15},"generated":{"line":1,"column":435}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"topology","original":{"line":43,"column":17},"generated":{"line":1,"column":437}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":44,"column":12},"generated":{"line":1,"column":446}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"databaseName","original":{"line":44,"column":15},"generated":{"line":1,"column":448}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"d","original":{"line":45,"column":12},"generated":{"line":1,"column":461}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"name","original":{"line":45,"column":14},"generated":{"line":1,"column":463}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":46,"column":12},"generated":{"line":1,"column":468}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"s","original":{"line":46,"column":15},"generated":{"line":1,"column":470}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"pkFactory","original":{"line":46,"column":17},"generated":{"line":1,"column":472}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"db","original":{"line":47,"column":12},"generated":{"line":1,"column":482}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"s","original":{"line":47,"column":15},"generated":{"line":1,"column":484}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"options","original":{"line":47,"column":17},"generated":{"line":1,"column":486}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"module","original":{"line":55,"column":0},"generated":{"line":1,"column":500}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"exports","original":{"line":55,"column":7},"generated":{"line":1,"column":507}},{"source":"../node_modules/mongodb/lib/operations/collections.js","name":"CollectionsOperation","original":{"line":55,"column":17},"generated":{"line":1,"column":515}}],"sources":{"../node_modules/mongodb/lib/operations/collections.js":"'use strict';\n\nconst OperationBase = require('./operation').OperationBase;\nconst handleCallback = require('../utils').handleCallback;\n\nlet collection;\nfunction loadCollection() {\n  if (!collection) {\n    collection = require('../collection');\n  }\n  return collection;\n}\n\nclass CollectionsOperation extends OperationBase {\n  constructor(db, options) {\n    super(options);\n\n    this.db = db;\n  }\n\n  execute(callback) {\n    const db = this.db;\n    let options = this.options;\n\n    let Collection = loadCollection();\n\n    options = Object.assign({}, options, { nameOnly: true });\n    // Let's get the collection names\n    db.listCollections({}, options).toArray((err, documents) => {\n      if (err != null) return handleCallback(callback, err, null);\n      // Filter collections removing any illegal ones\n      documents = documents.filter(doc => {\n        return doc.name.indexOf('$') === -1;\n      });\n\n      // Return the collection objects\n      handleCallback(\n        callback,\n        null,\n        documents.map(d => {\n          return new Collection(\n            db,\n            db.s.topology,\n            db.databaseName,\n            d.name,\n            db.s.pkFactory,\n            db.s.options\n          );\n        })\n      );\n    });\n  }\n}\n\nmodule.exports = CollectionsOperation;\n"},"lineCount":null}},"error":null,"hash":"67bc6bd55ce3a9d44cdc4b63f7f6b8fa","cacheData":{"env":{}}}