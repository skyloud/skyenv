{"id":"ICfF","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"./common","loc":{"line":3,"column":23},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/bulk/ordered.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/bulk/common.js"},{"name":"../utils","loc":{"line":7,"column":22},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/bulk/ordered.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/utils.js"}],"generated":{"js":"\"use strict\";const e=require(\"./common\"),t=e.BulkOperationBase,r=e.Batch,s=e.bson,n=require(\"../utils\"),c=n.toError;function a(t,n,a){const u=s.calculateObjectSize(a,{checkKeys:!1,ignoreUndefined:!1});if(u>=t.s.maxBsonObjectSize)throw c(\"document is larger than the maximum size \"+t.s.maxBsonObjectSize);null==t.s.currentBatch&&(t.s.currentBatch=new r(n,t.s.currentIndex));const i=t.s.maxKeySize;if((t.s.currentBatchSize+1>=t.s.maxWriteBatchSize||t.s.currentBatchSize>0&&t.s.currentBatchSizeBytes+i+u>=t.s.maxBatchSizeBytes||t.s.currentBatch.batchType!==n)&&(t.s.batches.push(t.s.currentBatch),t.s.currentBatch=new r(n,t.s.currentIndex),t.s.currentBatchSize=0,t.s.currentBatchSizeBytes=0),n===e.INSERT&&t.s.bulkResult.insertedIds.push({index:t.s.currentIndex,_id:a._id}),Array.isArray(a))throw c(\"operation passed in cannot be an Array\");return t.s.currentBatch.originalIndexes.push(t.s.currentIndex),t.s.currentBatch.operations.push(a),t.s.currentBatchSize+=1,t.s.currentBatchSizeBytes+=i+u,t.s.currentIndex+=1,t}class u extends t{constructor(e,t,r){r=r||{},super(e,t,r=Object.assign(r,{addToOperationsList:a}),!0)}}function i(e,t,r){return new u(e,t,r)}i.OrderedBulkOperation=u,module.exports=i,module.exports.Bulk=u;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"common","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"require","original":{"line":3,"column":15},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":3,"column":23},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"BulkOperationBase","original":{"line":4,"column":6},"generated":{"line":1,"column":41}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"common","original":{"line":4,"column":26},"generated":{"line":1,"column":43}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"BulkOperationBase","original":{"line":4,"column":33},"generated":{"line":1,"column":45}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"Batch","original":{"line":5,"column":6},"generated":{"line":1,"column":63}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"common","original":{"line":5,"column":14},"generated":{"line":1,"column":65}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"Batch","original":{"line":5,"column":21},"generated":{"line":1,"column":67}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bson","original":{"line":6,"column":6},"generated":{"line":1,"column":73}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"common","original":{"line":6,"column":13},"generated":{"line":1,"column":75}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bson","original":{"line":6,"column":20},"generated":{"line":1,"column":77}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"utils","original":{"line":7,"column":6},"generated":{"line":1,"column":82}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"require","original":{"line":7,"column":14},"generated":{"line":1,"column":84}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":7,"column":22},"generated":{"line":1,"column":92}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"toError","original":{"line":8,"column":6},"generated":{"line":1,"column":104}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"utils","original":{"line":8,"column":16},"generated":{"line":1,"column":106}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"toError","original":{"line":8,"column":22},"generated":{"line":1,"column":108}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":19,"column":0},"generated":{"line":1,"column":116}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"addToOperationsList","original":{"line":19,"column":9},"generated":{"line":1,"column":125}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":19,"column":29},"generated":{"line":1,"column":127}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"docType","original":{"line":19,"column":44},"generated":{"line":1,"column":129}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"document","original":{"line":19,"column":53},"generated":{"line":1,"column":131}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bsonSize","original":{"line":21,"column":8},"generated":{"line":1,"column":134}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bsonSize","original":{"line":21,"column":8},"generated":{"line":1,"column":140}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bson","original":{"line":21,"column":19},"generated":{"line":1,"column":142}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"calculateObjectSize","original":{"line":21,"column":24},"generated":{"line":1,"column":144}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"document","original":{"line":21,"column":44},"generated":{"line":1,"column":164}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":21,"column":54},"generated":{"line":1,"column":166}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"checkKeys","original":{"line":22,"column":4},"generated":{"line":1,"column":167}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":22,"column":15},"generated":{"line":1,"column":178}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"ignoreUndefined","original":{"line":26,"column":4},"generated":{"line":1,"column":180}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":26,"column":21},"generated":{"line":1,"column":197}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bsonSize","original":{"line":30,"column":6},"generated":{"line":1,"column":201}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bsonSize","original":{"line":30,"column":6},"generated":{"line":1,"column":204}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":30,"column":18},"generated":{"line":1,"column":207}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":30,"column":32},"generated":{"line":1,"column":209}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"maxBsonObjectSize","original":{"line":30,"column":34},"generated":{"line":1,"column":211}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":31,"column":4},"generated":{"line":1,"column":229}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"toError","original":{"line":31,"column":10},"generated":{"line":1,"column":235}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":31,"column":18},"generated":{"line":1,"column":237}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":31,"column":64},"generated":{"line":1,"column":281}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":31,"column":78},"generated":{"line":1,"column":283}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"maxBsonObjectSize","original":{"line":31,"column":80},"generated":{"line":1,"column":285}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":34,"column":38},"generated":{"line":1,"column":304}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":34,"column":6},"generated":{"line":1,"column":310}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":34,"column":20},"generated":{"line":1,"column":312}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatch","original":{"line":34,"column":22},"generated":{"line":1,"column":314}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":35,"column":4},"generated":{"line":1,"column":329}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":35,"column":18},"generated":{"line":1,"column":331}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatch","original":{"line":35,"column":20},"generated":{"line":1,"column":333}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":35,"column":35},"generated":{"line":1,"column":346}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"Batch","original":{"line":35,"column":39},"generated":{"line":1,"column":350}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"docType","original":{"line":35,"column":45},"generated":{"line":1,"column":352}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":35,"column":54},"generated":{"line":1,"column":354}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":35,"column":68},"generated":{"line":1,"column":356}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentIndex","original":{"line":35,"column":70},"generated":{"line":1,"column":358}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"maxKeySize","original":{"line":37,"column":8},"generated":{"line":1,"column":373}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"maxKeySize","original":{"line":37,"column":8},"generated":{"line":1,"column":379}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":37,"column":21},"generated":{"line":1,"column":381}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":37,"column":35},"generated":{"line":1,"column":383}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"maxKeySize","original":{"line":37,"column":37},"generated":{"line":1,"column":385}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"Array","original":{"line":70,"column":6},"generated":{"line":1,"column":396}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":42,"column":4},"generated":{"line":1,"column":400}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":42,"column":18},"generated":{"line":1,"column":402}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatchSize","original":{"line":42,"column":20},"generated":{"line":1,"column":404}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":42,"column":39},"generated":{"line":1,"column":421}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":42,"column":44},"generated":{"line":1,"column":424}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":42,"column":58},"generated":{"line":1,"column":426}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"maxWriteBatchSize","original":{"line":42,"column":60},"generated":{"line":1,"column":428}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":45,"column":5},"generated":{"line":1,"column":447}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":45,"column":19},"generated":{"line":1,"column":449}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatchSize","original":{"line":45,"column":21},"generated":{"line":1,"column":451}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":45,"column":40},"generated":{"line":1,"column":468}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":46,"column":6},"generated":{"line":1,"column":471}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":46,"column":20},"generated":{"line":1,"column":473}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatchSizeBytes","original":{"line":46,"column":22},"generated":{"line":1,"column":475}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"maxKeySize","original":{"line":46,"column":46},"generated":{"line":1,"column":497}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bsonSize","original":{"line":46,"column":59},"generated":{"line":1,"column":499}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":47,"column":8},"generated":{"line":1,"column":502}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":47,"column":22},"generated":{"line":1,"column":504}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"maxBatchSizeBytes","original":{"line":47,"column":24},"generated":{"line":1,"column":506}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":49,"column":4},"generated":{"line":1,"column":525}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":49,"column":18},"generated":{"line":1,"column":527}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatch","original":{"line":49,"column":20},"generated":{"line":1,"column":529}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"batchType","original":{"line":49,"column":33},"generated":{"line":1,"column":542}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"docType","original":{"line":49,"column":47},"generated":{"line":1,"column":554}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":52,"column":4},"generated":{"line":1,"column":559}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":52,"column":18},"generated":{"line":1,"column":561}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"batches","original":{"line":52,"column":20},"generated":{"line":1,"column":563}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"push","original":{"line":52,"column":28},"generated":{"line":1,"column":571}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":52,"column":33},"generated":{"line":1,"column":576}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":52,"column":47},"generated":{"line":1,"column":578}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatch","original":{"line":52,"column":49},"generated":{"line":1,"column":580}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":55,"column":4},"generated":{"line":1,"column":594}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":55,"column":18},"generated":{"line":1,"column":596}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatch","original":{"line":55,"column":20},"generated":{"line":1,"column":598}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":55,"column":35},"generated":{"line":1,"column":611}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"Batch","original":{"line":55,"column":39},"generated":{"line":1,"column":615}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"docType","original":{"line":55,"column":45},"generated":{"line":1,"column":617}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":55,"column":54},"generated":{"line":1,"column":619}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":55,"column":68},"generated":{"line":1,"column":621}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentIndex","original":{"line":55,"column":70},"generated":{"line":1,"column":623}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":58,"column":4},"generated":{"line":1,"column":637}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":58,"column":18},"generated":{"line":1,"column":639}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatchSize","original":{"line":58,"column":20},"generated":{"line":1,"column":641}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":58,"column":39},"generated":{"line":1,"column":658}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":59,"column":4},"generated":{"line":1,"column":660}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":59,"column":18},"generated":{"line":1,"column":662}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatchSizeBytes","original":{"line":59,"column":20},"generated":{"line":1,"column":664}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":59,"column":44},"generated":{"line":1,"column":686}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"docType","original":{"line":62,"column":6},"generated":{"line":1,"column":689}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"common","original":{"line":62,"column":18},"generated":{"line":1,"column":693}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"INSERT","original":{"line":62,"column":25},"generated":{"line":1,"column":695}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":63,"column":4},"generated":{"line":1,"column":703}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":63,"column":18},"generated":{"line":1,"column":705}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkResult","original":{"line":63,"column":20},"generated":{"line":1,"column":707}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"insertedIds","original":{"line":63,"column":31},"generated":{"line":1,"column":718}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"push","original":{"line":63,"column":43},"generated":{"line":1,"column":730}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":63,"column":48},"generated":{"line":1,"column":735}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"index","original":{"line":64,"column":6},"generated":{"line":1,"column":736}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":64,"column":13},"generated":{"line":1,"column":742}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":64,"column":27},"generated":{"line":1,"column":744}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentIndex","original":{"line":64,"column":29},"generated":{"line":1,"column":746}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"_id","original":{"line":65,"column":6},"generated":{"line":1,"column":759}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"document","original":{"line":65,"column":11},"generated":{"line":1,"column":763}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"_id","original":{"line":65,"column":20},"generated":{"line":1,"column":765}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"Array","original":{"line":70,"column":6},"generated":{"line":1,"column":771}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"isArray","original":{"line":70,"column":12},"generated":{"line":1,"column":777}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"document","original":{"line":70,"column":20},"generated":{"line":1,"column":785}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"toError","original":{"line":71,"column":10},"generated":{"line":1,"column":788}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"toError","original":{"line":71,"column":10},"generated":{"line":1,"column":794}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":71,"column":18},"generated":{"line":1,"column":796}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":81,"column":9},"generated":{"line":1,"column":838}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":74,"column":2},"generated":{"line":1,"column":845}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":74,"column":16},"generated":{"line":1,"column":847}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatch","original":{"line":74,"column":18},"generated":{"line":1,"column":849}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"originalIndexes","original":{"line":74,"column":31},"generated":{"line":1,"column":862}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"push","original":{"line":74,"column":47},"generated":{"line":1,"column":878}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":74,"column":52},"generated":{"line":1,"column":883}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":74,"column":66},"generated":{"line":1,"column":885}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentIndex","original":{"line":74,"column":68},"generated":{"line":1,"column":887}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":75,"column":2},"generated":{"line":1,"column":901}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":75,"column":16},"generated":{"line":1,"column":903}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatch","original":{"line":75,"column":18},"generated":{"line":1,"column":905}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"operations","original":{"line":75,"column":31},"generated":{"line":1,"column":918}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"push","original":{"line":75,"column":42},"generated":{"line":1,"column":929}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"document","original":{"line":75,"column":47},"generated":{"line":1,"column":934}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":76,"column":2},"generated":{"line":1,"column":937}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":76,"column":16},"generated":{"line":1,"column":939}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatchSize","original":{"line":76,"column":18},"generated":{"line":1,"column":941}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":76,"column":38},"generated":{"line":1,"column":959}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":77,"column":2},"generated":{"line":1,"column":961}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":77,"column":16},"generated":{"line":1,"column":963}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentBatchSizeBytes","original":{"line":77,"column":18},"generated":{"line":1,"column":965}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"maxKeySize","original":{"line":77,"column":43},"generated":{"line":1,"column":988}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bsonSize","original":{"line":77,"column":56},"generated":{"line":1,"column":990}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":78,"column":2},"generated":{"line":1,"column":992}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"s","original":{"line":78,"column":16},"generated":{"line":1,"column":994}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"currentIndex","original":{"line":78,"column":18},"generated":{"line":1,"column":996}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":78,"column":34},"generated":{"line":1,"column":1010}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"bulkOperation","original":{"line":81,"column":9},"generated":{"line":1,"column":1012}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":91,"column":0},"generated":{"line":1,"column":1014}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"OrderedBulkOperation","original":{"line":91,"column":6},"generated":{"line":1,"column":1020}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"BulkOperationBase","original":{"line":91,"column":35},"generated":{"line":1,"column":1030}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"constructor","original":{"line":92,"column":2},"generated":{"line":1,"column":1032}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"topology","original":{"line":92,"column":14},"generated":{"line":1,"column":1044}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"collection","original":{"line":92,"column":24},"generated":{"line":1,"column":1046}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"options","original":{"line":92,"column":36},"generated":{"line":1,"column":1048}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"options","original":{"line":93,"column":4},"generated":{"line":1,"column":1051}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"options","original":{"line":93,"column":14},"generated":{"line":1,"column":1053}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":93,"column":25},"generated":{"line":1,"column":1056}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"topology","original":{"line":96,"column":10},"generated":{"line":1,"column":1059}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"topology","original":{"line":96,"column":10},"generated":{"line":1,"column":1065}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"collection","original":{"line":96,"column":20},"generated":{"line":1,"column":1067}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"options","original":{"line":94,"column":4},"generated":{"line":1,"column":1069}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"Object","original":{"line":94,"column":14},"generated":{"line":1,"column":1071}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"assign","original":{"line":94,"column":21},"generated":{"line":1,"column":1078}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"options","original":{"line":94,"column":28},"generated":{"line":1,"column":1085}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":94,"column":37},"generated":{"line":1,"column":1087}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"addToOperationsList","original":{"line":94,"column":39},"generated":{"line":1,"column":1088}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"addToOperationsList","original":{"line":94,"column":39},"generated":{"line":1,"column":1108}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":96,"column":41},"generated":{"line":1,"column":1113}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":104,"column":0},"generated":{"line":1,"column":1117}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"initializeOrderedBulkOp","original":{"line":104,"column":9},"generated":{"line":1,"column":1126}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"topology","original":{"line":104,"column":33},"generated":{"line":1,"column":1128}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"collection","original":{"line":104,"column":43},"generated":{"line":1,"column":1130}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"options","original":{"line":104,"column":55},"generated":{"line":1,"column":1132}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":105,"column":9},"generated":{"line":1,"column":1135}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","original":{"line":105,"column":9},"generated":{"line":1,"column":1142}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"OrderedBulkOperation","original":{"line":105,"column":13},"generated":{"line":1,"column":1146}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"topology","original":{"line":105,"column":34},"generated":{"line":1,"column":1148}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"collection","original":{"line":105,"column":44},"generated":{"line":1,"column":1150}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"options","original":{"line":105,"column":56},"generated":{"line":1,"column":1152}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"initializeOrderedBulkOp","original":{"line":108,"column":0},"generated":{"line":1,"column":1155}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"OrderedBulkOperation","original":{"line":108,"column":24},"generated":{"line":1,"column":1157}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"OrderedBulkOperation","original":{"line":108,"column":47},"generated":{"line":1,"column":1178}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"module","original":{"line":109,"column":0},"generated":{"line":1,"column":1180}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"exports","original":{"line":109,"column":7},"generated":{"line":1,"column":1187}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"initializeOrderedBulkOp","original":{"line":109,"column":17},"generated":{"line":1,"column":1195}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"module","original":{"line":110,"column":0},"generated":{"line":1,"column":1197}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"exports","original":{"line":110,"column":7},"generated":{"line":1,"column":1204}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"Bulk","original":{"line":110,"column":15},"generated":{"line":1,"column":1212}},{"source":"../node_modules/mongodb/lib/bulk/ordered.js","name":"OrderedBulkOperation","original":{"line":110,"column":22},"generated":{"line":1,"column":1217}}],"sources":{"../node_modules/mongodb/lib/bulk/ordered.js":"'use strict';\n\nconst common = require('./common');\nconst BulkOperationBase = common.BulkOperationBase;\nconst Batch = common.Batch;\nconst bson = common.bson;\nconst utils = require('../utils');\nconst toError = utils.toError;\n\n/**\n * Add to internal list of Operations\n *\n * @ignore\n * @param {OrderedBulkOperation} bulkOperation\n * @param {number} docType number indicating the document type\n * @param {object} document\n * @return {OrderedBulkOperation}\n */\nfunction addToOperationsList(bulkOperation, docType, document) {\n  // Get the bsonSize\n  const bsonSize = bson.calculateObjectSize(document, {\n    checkKeys: false,\n\n    // Since we don't know what the user selected for BSON options here,\n    // err on the safe side, and check the size with ignoreUndefined: false.\n    ignoreUndefined: false\n  });\n\n  // Throw error if the doc is bigger than the max BSON size\n  if (bsonSize >= bulkOperation.s.maxBsonObjectSize)\n    throw toError('document is larger than the maximum size ' + bulkOperation.s.maxBsonObjectSize);\n\n  // Create a new batch object if we don't have a current one\n  if (bulkOperation.s.currentBatch == null)\n    bulkOperation.s.currentBatch = new Batch(docType, bulkOperation.s.currentIndex);\n\n  const maxKeySize = bulkOperation.s.maxKeySize;\n\n  // Check if we need to create a new batch\n  if (\n    // New batch if we exceed the max batch op size\n    bulkOperation.s.currentBatchSize + 1 >= bulkOperation.s.maxWriteBatchSize ||\n    // New batch if we exceed the maxBatchSizeBytes. Only matters if batch already has a doc,\n    // since we can't sent an empty batch\n    (bulkOperation.s.currentBatchSize > 0 &&\n      bulkOperation.s.currentBatchSizeBytes + maxKeySize + bsonSize >=\n        bulkOperation.s.maxBatchSizeBytes) ||\n    // New batch if the new op does not have the same op type as the current batch\n    bulkOperation.s.currentBatch.batchType !== docType\n  ) {\n    // Save the batch to the execution stack\n    bulkOperation.s.batches.push(bulkOperation.s.currentBatch);\n\n    // Create a new batch\n    bulkOperation.s.currentBatch = new Batch(docType, bulkOperation.s.currentIndex);\n\n    // Reset the current size trackers\n    bulkOperation.s.currentBatchSize = 0;\n    bulkOperation.s.currentBatchSizeBytes = 0;\n  }\n\n  if (docType === common.INSERT) {\n    bulkOperation.s.bulkResult.insertedIds.push({\n      index: bulkOperation.s.currentIndex,\n      _id: document._id\n    });\n  }\n\n  // We have an array of documents\n  if (Array.isArray(document)) {\n    throw toError('operation passed in cannot be an Array');\n  }\n\n  bulkOperation.s.currentBatch.originalIndexes.push(bulkOperation.s.currentIndex);\n  bulkOperation.s.currentBatch.operations.push(document);\n  bulkOperation.s.currentBatchSize += 1;\n  bulkOperation.s.currentBatchSizeBytes += maxKeySize + bsonSize;\n  bulkOperation.s.currentIndex += 1;\n\n  // Return bulkOperation\n  return bulkOperation;\n}\n\n/**\n * Create a new OrderedBulkOperation instance (INTERNAL TYPE, do not instantiate directly)\n * @class\n * @extends BulkOperationBase\n * @property {number} length Get the number of operations in the bulk.\n * @return {OrderedBulkOperation} a OrderedBulkOperation instance.\n */\nclass OrderedBulkOperation extends BulkOperationBase {\n  constructor(topology, collection, options) {\n    options = options || {};\n    options = Object.assign(options, { addToOperationsList });\n\n    super(topology, collection, options, true);\n  }\n}\n\n/**\n * Returns an unordered batch object\n * @ignore\n */\nfunction initializeOrderedBulkOp(topology, collection, options) {\n  return new OrderedBulkOperation(topology, collection, options);\n}\n\ninitializeOrderedBulkOp.OrderedBulkOperation = OrderedBulkOperation;\nmodule.exports = initializeOrderedBulkOp;\nmodule.exports.Bulk = OrderedBulkOperation;\n"},"lineCount":null}},"error":null,"hash":"67946c037f35a983c23a7a0c6819fa28","cacheData":{"env":{}}}