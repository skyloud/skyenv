{"id":"LU0j","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"../utils","loc":{"line":13,"column":24},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/map_reduce.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/utils.js"},{"name":"../core","loc":{"line":12,"column":31},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/map_reduce.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/index.js"},{"name":"./db_ops","loc":{"line":7,"column":31},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/map_reduce.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/db_ops.js"},{"name":"../dynamic_loaders","loc":{"line":10,"column":23},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/map_reduce.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/dynamic_loaders.js"},{"name":"./operation","loc":{"line":11,"column":30},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/map_reduce.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/operation.js"}],"generated":{"js":"\"use strict\";function e(t){return(e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(t)}const t=require(\"../utils\").applyWriteConcern,r=require(\"../core\").BSON.Code,o=require(\"../utils\").decorateWithCollation,n=require(\"../utils\").decorateWithReadConcern,i=require(\"./db_ops\").executeCommand,s=require(\"../utils\").handleCallback,l=require(\"../utils\").isObject,c=require(\"../dynamic_loaders\").loadDb,u=require(\"./operation\").OperationBase,a=require(\"../core\").ReadPreference,d=require(\"../utils\").toError,b=[\"readPreference\",\"session\",\"bypassDocumentValidation\",\"w\",\"wtimeout\",\"j\",\"writeConcern\"];class p extends u{constructor(e,t,r,o){super(o),this.collection=e,this.map=t,this.reduce=r}execute(r){const l=this.collection,u=this.map,p=this.reduce;let f=this.options;const y={mapReduce:l.collectionName,map:u,reduce:p};for(let e in f)\"scope\"===e?y[e]=m(f[e]):-1===b.indexOf(e)&&(y[e]=f[e]);(f=Object.assign({},f)).readPreference=a.resolve(l,f),!1!==f.readPreference&&\"primary\"!==f.readPreference&&f.out&&1!==f.out.inline&&\"inline\"!==f.out?(f.readPreference=\"primary\",t(y,{db:l.s.db,collection:l},f)):n(y,l,f),!0===f.bypassDocumentValidation&&(y.bypassDocumentValidation=f.bypassDocumentValidation);try{o(y,l,f)}catch(h){return r(h,null)}i(l.s.db,y,f,(t,o)=>{if(t)return s(r,t);if(1!==o.ok||o.err||o.errmsg)return s(r,d(o));const n={};if(o.timeMillis&&(n.processtime=o.timeMillis),o.counts&&(n.counts=o.counts),o.timing&&(n.timing=o.timing),o.results)return null!=f.verbose&&f.verbose?s(r,null,{results:o.results,stats:n}):s(r,null,o.results);let i=null;if(null!=o.result&&\"object\"===e(o.result)){const e=o.result;i=new(c())(e.db,l.s.db.s.topology,l.s.db.s.options).collection(e.collection)}else i=l.s.db.collection(o.result);if(null==f.verbose||!f.verbose)return s(r,t,i);s(r,t,{collection:i,stats:n})})}}function m(e){if(!l(e)||\"ObjectID\"===e._bsontype)return e;const t=Object.keys(e);let o;const n={};for(let i=t.length-1;i>=0;i--)\"function\"==typeof e[o=t[i]]?n[o]=new r(String(e[o])):n[o]=m(e[o]);return n}module.exports=p;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":22}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":24}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":27}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":34}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":36}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":55}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":63}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":80}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":87}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":96}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":105}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":108}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":122}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":125}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":134}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":137}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":144}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":147}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":166}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":174}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":176}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":190}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":198}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":202}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":209}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":219}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":235}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":190,"column":0},"generated":{"line":1,"column":239}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":3,"column":0},"generated":{"line":1,"column":242}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"applyWriteConcern","original":{"line":3,"column":6},"generated":{"line":1,"column":248}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":3,"column":26},"generated":{"line":1,"column":250}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":3,"column":34},"generated":{"line":1,"column":258}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"applyWriteConcern","original":{"line":3,"column":46},"generated":{"line":1,"column":270}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"Code","original":{"line":4,"column":6},"generated":{"line":1,"column":288}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":4,"column":13},"generated":{"line":1,"column":290}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":4,"column":21},"generated":{"line":1,"column":298}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"BSON","original":{"line":4,"column":32},"generated":{"line":1,"column":309}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"Code","original":{"line":4,"column":37},"generated":{"line":1,"column":314}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"decorateWithCollation","original":{"line":5,"column":6},"generated":{"line":1,"column":319}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":5,"column":30},"generated":{"line":1,"column":321}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":5,"column":38},"generated":{"line":1,"column":329}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"decorateWithCollation","original":{"line":5,"column":50},"generated":{"line":1,"column":341}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"decorateWithReadConcern","original":{"line":6,"column":6},"generated":{"line":1,"column":363}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":6,"column":32},"generated":{"line":1,"column":365}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":6,"column":40},"generated":{"line":1,"column":373}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"decorateWithReadConcern","original":{"line":6,"column":52},"generated":{"line":1,"column":385}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"executeCommand","original":{"line":7,"column":6},"generated":{"line":1,"column":409}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":7,"column":23},"generated":{"line":1,"column":411}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":7,"column":31},"generated":{"line":1,"column":419}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"executeCommand","original":{"line":7,"column":43},"generated":{"line":1,"column":431}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"handleCallback","original":{"line":8,"column":6},"generated":{"line":1,"column":446}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":8,"column":23},"generated":{"line":1,"column":448}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":8,"column":31},"generated":{"line":1,"column":456}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"handleCallback","original":{"line":8,"column":43},"generated":{"line":1,"column":468}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"isObject","original":{"line":9,"column":6},"generated":{"line":1,"column":483}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":9,"column":17},"generated":{"line":1,"column":485}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":9,"column":25},"generated":{"line":1,"column":493}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"isObject","original":{"line":9,"column":37},"generated":{"line":1,"column":505}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"loadDb","original":{"line":10,"column":6},"generated":{"line":1,"column":514}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":10,"column":15},"generated":{"line":1,"column":516}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":10,"column":23},"generated":{"line":1,"column":524}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"loadDb","original":{"line":10,"column":45},"generated":{"line":1,"column":546}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"OperationBase","original":{"line":11,"column":6},"generated":{"line":1,"column":553}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":11,"column":22},"generated":{"line":1,"column":555}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":11,"column":30},"generated":{"line":1,"column":563}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"OperationBase","original":{"line":11,"column":45},"generated":{"line":1,"column":578}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"ReadPreference","original":{"line":12,"column":6},"generated":{"line":1,"column":592}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":12,"column":23},"generated":{"line":1,"column":594}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":12,"column":31},"generated":{"line":1,"column":602}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"ReadPreference","original":{"line":12,"column":42},"generated":{"line":1,"column":613}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"toError","original":{"line":13,"column":6},"generated":{"line":1,"column":628}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"require","original":{"line":13,"column":16},"generated":{"line":1,"column":630}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":13,"column":24},"generated":{"line":1,"column":638}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"toError","original":{"line":13,"column":36},"generated":{"line":1,"column":650}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"exclusionList","original":{"line":15,"column":6},"generated":{"line":1,"column":658}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":15,"column":22},"generated":{"line":1,"column":660}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":16,"column":2},"generated":{"line":1,"column":661}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":17,"column":2},"generated":{"line":1,"column":678}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":18,"column":2},"generated":{"line":1,"column":688}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":19,"column":2},"generated":{"line":1,"column":715}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":20,"column":2},"generated":{"line":1,"column":719}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":21,"column":2},"generated":{"line":1,"column":730}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":22,"column":2},"generated":{"line":1,"column":734}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":34,"column":0},"generated":{"line":1,"column":750}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"MapReduceOperation","original":{"line":34,"column":6},"generated":{"line":1,"column":756}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"OperationBase","original":{"line":34,"column":33},"generated":{"line":1,"column":766}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"constructor","original":{"line":43,"column":2},"generated":{"line":1,"column":768}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":43,"column":14},"generated":{"line":1,"column":780}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"map","original":{"line":43,"column":26},"generated":{"line":1,"column":782}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"reduce","original":{"line":43,"column":31},"generated":{"line":1,"column":784}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":43,"column":39},"generated":{"line":1,"column":786}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":44,"column":10},"generated":{"line":1,"column":789}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":44,"column":10},"generated":{"line":1,"column":795}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":46,"column":9},"generated":{"line":1,"column":798}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":46,"column":9},"generated":{"line":1,"column":803}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":46,"column":22},"generated":{"line":1,"column":814}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"map","original":{"line":47,"column":9},"generated":{"line":1,"column":816}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"map","original":{"line":47,"column":9},"generated":{"line":1,"column":821}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"map","original":{"line":47,"column":15},"generated":{"line":1,"column":825}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"reduce","original":{"line":48,"column":9},"generated":{"line":1,"column":827}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"reduce","original":{"line":48,"column":9},"generated":{"line":1,"column":832}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"reduce","original":{"line":48,"column":18},"generated":{"line":1,"column":839}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"execute","original":{"line":56,"column":2},"generated":{"line":1,"column":841}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"callback","original":{"line":56,"column":10},"generated":{"line":1,"column":849}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":57,"column":10},"generated":{"line":1,"column":852}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":57,"column":10},"generated":{"line":1,"column":858}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":57,"column":17},"generated":{"line":1,"column":860}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":57,"column":22},"generated":{"line":1,"column":865}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"map","original":{"line":58,"column":10},"generated":{"line":1,"column":876}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":58,"column":16},"generated":{"line":1,"column":878}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"map","original":{"line":58,"column":21},"generated":{"line":1,"column":883}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"reduce","original":{"line":59,"column":10},"generated":{"line":1,"column":887}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":59,"column":19},"generated":{"line":1,"column":889}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"reduce","original":{"line":59,"column":24},"generated":{"line":1,"column":894}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":60,"column":8},"generated":{"line":1,"column":901}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":60,"column":8},"generated":{"line":1,"column":905}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":60,"column":18},"generated":{"line":1,"column":907}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":60,"column":23},"generated":{"line":1,"column":912}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"mapCommandHash","original":{"line":62,"column":10},"generated":{"line":1,"column":920}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"mapCommandHash","original":{"line":62,"column":10},"generated":{"line":1,"column":926}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":62,"column":27},"generated":{"line":1,"column":928}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"mapReduce","original":{"line":63,"column":6},"generated":{"line":1,"column":929}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":63,"column":17},"generated":{"line":1,"column":939}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collectionName","original":{"line":63,"column":22},"generated":{"line":1,"column":941}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"map","original":{"line":64,"column":6},"generated":{"line":1,"column":956}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"map","original":{"line":64,"column":11},"generated":{"line":1,"column":960}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"reduce","original":{"line":65,"column":6},"generated":{"line":1,"column":962}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"reduce","original":{"line":65,"column":14},"generated":{"line":1,"column":969}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":69,"column":9},"generated":{"line":1,"column":972}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":69,"column":9},"generated":{"line":1,"column":976}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"n","original":{"line":69,"column":13},"generated":{"line":1,"column":980}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":69,"column":18},"generated":{"line":1,"column":985}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":70,"column":10},"generated":{"line":1,"column":987}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"n","original":{"line":70,"column":22},"generated":{"line":1,"column":997}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"mapCommandHash","original":{"line":71,"column":8},"generated":{"line":1,"column":999}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"n","original":{"line":71,"column":23},"generated":{"line":1,"column":1001}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"processScope","original":{"line":71,"column":28},"generated":{"line":1,"column":1004}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":71,"column":41},"generated":{"line":1,"column":1006}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"n","original":{"line":71,"column":49},"generated":{"line":1,"column":1008}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":74,"column":42},"generated":{"line":1,"column":1013}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"exclusionList","original":{"line":74,"column":12},"generated":{"line":1,"column":1017}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"indexOf","original":{"line":74,"column":26},"generated":{"line":1,"column":1019}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"n","original":{"line":74,"column":34},"generated":{"line":1,"column":1027}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"mapCommandHash","original":{"line":75,"column":10},"generated":{"line":1,"column":1032}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"n","original":{"line":75,"column":25},"generated":{"line":1,"column":1034}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":75,"column":30},"generated":{"line":1,"column":1037}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"n","original":{"line":75,"column":38},"generated":{"line":1,"column":1039}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":80,"column":4},"generated":{"line":1,"column":1044}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"Object","original":{"line":80,"column":14},"generated":{"line":1,"column":1046}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"assign","original":{"line":80,"column":21},"generated":{"line":1,"column":1053}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":80,"column":28},"generated":{"line":1,"column":1060}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":80,"column":32},"generated":{"line":1,"column":1063}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"readPreference","original":{"line":83,"column":12},"generated":{"line":1,"column":1067}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"ReadPreference","original":{"line":83,"column":29},"generated":{"line":1,"column":1082}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"resolve","original":{"line":83,"column":44},"generated":{"line":1,"column":1084}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":83,"column":52},"generated":{"line":1,"column":1092}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":83,"column":58},"generated":{"line":1,"column":1094}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":87,"column":33},"generated":{"line":1,"column":1098}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":87,"column":6},"generated":{"line":1,"column":1102}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"readPreference","original":{"line":87,"column":14},"generated":{"line":1,"column":1104}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":88,"column":33},"generated":{"line":1,"column":1120}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":88,"column":6},"generated":{"line":1,"column":1132}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"readPreference","original":{"line":88,"column":14},"generated":{"line":1,"column":1134}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":89,"column":6},"generated":{"line":1,"column":1150}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":89,"column":13},"generated":{"line":1,"column":1152}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":90,"column":32},"generated":{"line":1,"column":1157}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":90,"column":6},"generated":{"line":1,"column":1161}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":90,"column":13},"generated":{"line":1,"column":1163}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"inline","original":{"line":90,"column":21},"generated":{"line":1,"column":1167}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":91,"column":25},"generated":{"line":1,"column":1175}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":91,"column":6},"generated":{"line":1,"column":1186}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":91,"column":13},"generated":{"line":1,"column":1188}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":94,"column":6},"generated":{"line":1,"column":1193}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"readPreference","original":{"line":94,"column":14},"generated":{"line":1,"column":1195}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":94,"column":31},"generated":{"line":1,"column":1210}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"applyWriteConcern","original":{"line":96,"column":6},"generated":{"line":1,"column":1220}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"mapCommandHash","original":{"line":96,"column":24},"generated":{"line":1,"column":1222}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":96,"column":40},"generated":{"line":1,"column":1224}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"db","original":{"line":96,"column":42},"generated":{"line":1,"column":1225}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":96,"column":46},"generated":{"line":1,"column":1228}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"s","original":{"line":96,"column":51},"generated":{"line":1,"column":1230}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"db","original":{"line":96,"column":53},"generated":{"line":1,"column":1232}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":96,"column":57},"generated":{"line":1,"column":1235}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":96,"column":69},"generated":{"line":1,"column":1246}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":96,"column":77},"generated":{"line":1,"column":1249}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"decorateWithReadConcern","original":{"line":98,"column":6},"generated":{"line":1,"column":1253}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"mapCommandHash","original":{"line":98,"column":30},"generated":{"line":1,"column":1255}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":98,"column":46},"generated":{"line":1,"column":1257}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":98,"column":52},"generated":{"line":1,"column":1259}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":102,"column":45},"generated":{"line":1,"column":1263}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":102,"column":8},"generated":{"line":1,"column":1267}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"bypassDocumentValidation","original":{"line":102,"column":16},"generated":{"line":1,"column":1269}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"mapCommandHash","original":{"line":103,"column":6},"generated":{"line":1,"column":1296}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"bypassDocumentValidation","original":{"line":103,"column":21},"generated":{"line":1,"column":1298}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":103,"column":48},"generated":{"line":1,"column":1323}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"bypassDocumentValidation","original":{"line":103,"column":56},"generated":{"line":1,"column":1325}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":107,"column":8},"generated":{"line":1,"column":1351}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"decorateWithCollation","original":{"line":108,"column":6},"generated":{"line":1,"column":1355}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"mapCommandHash","original":{"line":108,"column":28},"generated":{"line":1,"column":1357}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":108,"column":44},"generated":{"line":1,"column":1359}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":108,"column":50},"generated":{"line":1,"column":1361}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":109,"column":6},"generated":{"line":1,"column":1364}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"err","original":{"line":109,"column":13},"generated":{"line":1,"column":1370}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"callback","original":{"line":110,"column":13},"generated":{"line":1,"column":1373}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"callback","original":{"line":110,"column":13},"generated":{"line":1,"column":1380}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"err","original":{"line":110,"column":22},"generated":{"line":1,"column":1382}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":110,"column":27},"generated":{"line":1,"column":1384}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"executeCommand","original":{"line":114,"column":4},"generated":{"line":1,"column":1390}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":114,"column":19},"generated":{"line":1,"column":1392}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"s","original":{"line":114,"column":24},"generated":{"line":1,"column":1394}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"db","original":{"line":114,"column":26},"generated":{"line":1,"column":1396}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"mapCommandHash","original":{"line":114,"column":30},"generated":{"line":1,"column":1399}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":114,"column":46},"generated":{"line":1,"column":1401}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":114,"column":55},"generated":{"line":1,"column":1403}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"err","original":{"line":114,"column":56},"generated":{"line":1,"column":1404}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":114,"column":61},"generated":{"line":1,"column":1406}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"err","original":{"line":115,"column":10},"generated":{"line":1,"column":1411}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"err","original":{"line":115,"column":10},"generated":{"line":1,"column":1414}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":115,"column":15},"generated":{"line":1,"column":1416}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"handleCallback","original":{"line":115,"column":22},"generated":{"line":1,"column":1423}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"callback","original":{"line":115,"column":37},"generated":{"line":1,"column":1425}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"err","original":{"line":115,"column":47},"generated":{"line":1,"column":1427}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":117,"column":10},"generated":{"line":1,"column":1430}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":117,"column":10},"generated":{"line":1,"column":1433}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":117,"column":16},"generated":{"line":1,"column":1437}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"ok","original":{"line":117,"column":23},"generated":{"line":1,"column":1439}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":117,"column":29},"generated":{"line":1,"column":1443}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"err","original":{"line":117,"column":36},"generated":{"line":1,"column":1445}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":117,"column":43},"generated":{"line":1,"column":1450}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"errmsg","original":{"line":117,"column":50},"generated":{"line":1,"column":1452}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"handleCallback","original":{"line":118,"column":15},"generated":{"line":1,"column":1459}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"handleCallback","original":{"line":118,"column":15},"generated":{"line":1,"column":1466}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"callback","original":{"line":118,"column":30},"generated":{"line":1,"column":1468}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"toError","original":{"line":118,"column":40},"generated":{"line":1,"column":1470}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":118,"column":48},"generated":{"line":1,"column":1472}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"stats","original":{"line":122,"column":12},"generated":{"line":1,"column":1476}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"stats","original":{"line":122,"column":12},"generated":{"line":1,"column":1482}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":122,"column":20},"generated":{"line":1,"column":1484}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":128,"column":10},"generated":{"line":1,"column":1487}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":123,"column":10},"generated":{"line":1,"column":1490}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"timeMillis","original":{"line":123,"column":17},"generated":{"line":1,"column":1492}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"stats","original":{"line":123,"column":29},"generated":{"line":1,"column":1505}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":123,"column":34},"generated":{"line":1,"column":1507}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":123,"column":52},"generated":{"line":1,"column":1519}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"timeMillis","original":{"line":123,"column":59},"generated":{"line":1,"column":1521}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":124,"column":10},"generated":{"line":1,"column":1533}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"counts","original":{"line":124,"column":17},"generated":{"line":1,"column":1535}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"stats","original":{"line":124,"column":25},"generated":{"line":1,"column":1544}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":124,"column":30},"generated":{"line":1,"column":1546}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":124,"column":43},"generated":{"line":1,"column":1553}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"counts","original":{"line":124,"column":50},"generated":{"line":1,"column":1555}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":125,"column":10},"generated":{"line":1,"column":1563}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"timing","original":{"line":125,"column":17},"generated":{"line":1,"column":1565}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"stats","original":{"line":125,"column":25},"generated":{"line":1,"column":1574}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":125,"column":30},"generated":{"line":1,"column":1576}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":125,"column":43},"generated":{"line":1,"column":1583}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"timing","original":{"line":125,"column":50},"generated":{"line":1,"column":1585}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":128,"column":10},"generated":{"line":1,"column":1593}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"results","original":{"line":128,"column":17},"generated":{"line":1,"column":1595}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":130,"column":12},"generated":{"line":1,"column":1603}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":130,"column":34},"generated":{"line":1,"column":1610}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":130,"column":12},"generated":{"line":1,"column":1616}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":130,"column":19},"generated":{"line":1,"column":1618}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":130,"column":43},"generated":{"line":1,"column":1627}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":130,"column":50},"generated":{"line":1,"column":1629}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"handleCallback","original":{"line":134,"column":15},"generated":{"line":1,"column":1637}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"callback","original":{"line":134,"column":30},"generated":{"line":1,"column":1639}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":134,"column":40},"generated":{"line":1,"column":1641}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":134,"column":46},"generated":{"line":1,"column":1646}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"results","original":{"line":134,"column":48},"generated":{"line":1,"column":1647}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":134,"column":57},"generated":{"line":1,"column":1655}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"results","original":{"line":134,"column":64},"generated":{"line":1,"column":1657}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"stats","original":{"line":134,"column":73},"generated":{"line":1,"column":1665}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"stats","original":{"line":134,"column":80},"generated":{"line":1,"column":1671}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"handleCallback","original":{"line":131,"column":17},"generated":{"line":1,"column":1675}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"callback","original":{"line":131,"column":32},"generated":{"line":1,"column":1677}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":131,"column":42},"generated":{"line":1,"column":1679}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":131,"column":48},"generated":{"line":1,"column":1684}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"results","original":{"line":131,"column":55},"generated":{"line":1,"column":1686}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":138,"column":10},"generated":{"line":1,"column":1695}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":138,"column":10},"generated":{"line":1,"column":1699}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":138,"column":23},"generated":{"line":1,"column":1701}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":141,"column":10},"generated":{"line":1,"column":1706}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":141,"column":27},"generated":{"line":1,"column":1709}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":141,"column":10},"generated":{"line":1,"column":1715}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":141,"column":17},"generated":{"line":1,"column":1717}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":141,"column":60},"generated":{"line":1,"column":1725}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":141,"column":35},"generated":{"line":1,"column":1736}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":141,"column":42},"generated":{"line":1,"column":1738}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":141,"column":49},"generated":{"line":1,"column":1740}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":141,"column":70},"generated":{"line":1,"column":1748}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"doc","original":{"line":142,"column":14},"generated":{"line":1,"column":1749}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"doc","original":{"line":142,"column":14},"generated":{"line":1,"column":1755}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":142,"column":20},"generated":{"line":1,"column":1757}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":142,"column":27},"generated":{"line":1,"column":1759}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":145,"column":8},"generated":{"line":1,"column":1766}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":145,"column":21},"generated":{"line":1,"column":1768}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"loadDb","original":{"line":144,"column":17},"generated":{"line":1,"column":1772}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":145,"column":21},"generated":{"line":1,"column":1776}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"doc","original":{"line":145,"column":28},"generated":{"line":1,"column":1777}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"db","original":{"line":145,"column":32},"generated":{"line":1,"column":1779}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":145,"column":36},"generated":{"line":1,"column":1782}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"s","original":{"line":145,"column":41},"generated":{"line":1,"column":1784}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"db","original":{"line":145,"column":43},"generated":{"line":1,"column":1786}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"s","original":{"line":145,"column":46},"generated":{"line":1,"column":1789}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"topology","original":{"line":145,"column":48},"generated":{"line":1,"column":1791}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":145,"column":58},"generated":{"line":1,"column":1800}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"s","original":{"line":145,"column":63},"generated":{"line":1,"column":1802}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"db","original":{"line":145,"column":65},"generated":{"line":1,"column":1804}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"s","original":{"line":145,"column":68},"generated":{"line":1,"column":1807}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":145,"column":70},"generated":{"line":1,"column":1809}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":145,"column":79},"generated":{"line":1,"column":1818}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"doc","original":{"line":146,"column":10},"generated":{"line":1,"column":1829}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":146,"column":14},"generated":{"line":1,"column":1831}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":150,"column":8},"generated":{"line":1,"column":1848}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"coll","original":{"line":150,"column":21},"generated":{"line":1,"column":1850}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"s","original":{"line":150,"column":26},"generated":{"line":1,"column":1852}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"db","original":{"line":150,"column":28},"generated":{"line":1,"column":1854}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":150,"column":31},"generated":{"line":1,"column":1857}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":150,"column":42},"generated":{"line":1,"column":1868}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"result","original":{"line":150,"column":49},"generated":{"line":1,"column":1870}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":154,"column":10},"generated":{"line":1,"column":1878}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":154,"column":32},"generated":{"line":1,"column":1881}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":154,"column":10},"generated":{"line":1,"column":1887}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":154,"column":17},"generated":{"line":1,"column":1889}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"options","original":{"line":154,"column":41},"generated":{"line":1,"column":1899}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":154,"column":48},"generated":{"line":1,"column":1901}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"handleCallback","original":{"line":155,"column":15},"generated":{"line":1,"column":1909}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"handleCallback","original":{"line":155,"column":15},"generated":{"line":1,"column":1916}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"callback","original":{"line":155,"column":30},"generated":{"line":1,"column":1918}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"err","original":{"line":155,"column":40},"generated":{"line":1,"column":1920}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":155,"column":45},"generated":{"line":1,"column":1922}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"handleCallback","original":{"line":159,"column":6},"generated":{"line":1,"column":1925}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"callback","original":{"line":159,"column":21},"generated":{"line":1,"column":1927}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"err","original":{"line":159,"column":31},"generated":{"line":1,"column":1929}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":159,"column":36},"generated":{"line":1,"column":1931}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":159,"column":38},"generated":{"line":1,"column":1932}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"collection","original":{"line":159,"column":50},"generated":{"line":1,"column":1943}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"stats","original":{"line":159,"column":62},"generated":{"line":1,"column":1945}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"stats","original":{"line":159,"column":69},"generated":{"line":1,"column":1951}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":169,"column":0},"generated":{"line":1,"column":1958}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"processScope","original":{"line":169,"column":9},"generated":{"line":1,"column":1967}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"scope","original":{"line":169,"column":22},"generated":{"line":1,"column":1969}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":170,"column":6},"generated":{"line":1,"column":1972}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"isObject","original":{"line":170,"column":7},"generated":{"line":1,"column":1976}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"scope","original":{"line":170,"column":16},"generated":{"line":1,"column":1978}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":170,"column":46},"generated":{"line":1,"column":1982}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"scope","original":{"line":170,"column":26},"generated":{"line":1,"column":1995}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"_bsontype","original":{"line":170,"column":32},"generated":{"line":1,"column":1997}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"scope","original":{"line":171,"column":11},"generated":{"line":1,"column":2007}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"scope","original":{"line":171,"column":11},"generated":{"line":1,"column":2014}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"keys","original":{"line":174,"column":8},"generated":{"line":1,"column":2016}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"keys","original":{"line":174,"column":8},"generated":{"line":1,"column":2022}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"Object","original":{"line":174,"column":15},"generated":{"line":1,"column":2024}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"keys","original":{"line":174,"column":22},"generated":{"line":1,"column":2031}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"scope","original":{"line":174,"column":27},"generated":{"line":1,"column":2036}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"key","original":{"line":175,"column":6},"generated":{"line":1,"column":2039}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"key","original":{"line":175,"column":6},"generated":{"line":1,"column":2043}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"new_scope","original":{"line":176,"column":8},"generated":{"line":1,"column":2045}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"new_scope","original":{"line":176,"column":8},"generated":{"line":1,"column":2051}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":176,"column":20},"generated":{"line":1,"column":2053}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":178,"column":7},"generated":{"line":1,"column":2056}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":178,"column":7},"generated":{"line":1,"column":2060}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"i","original":{"line":178,"column":11},"generated":{"line":1,"column":2064}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"keys","original":{"line":178,"column":15},"generated":{"line":1,"column":2066}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"length","original":{"line":178,"column":20},"generated":{"line":1,"column":2068}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":178,"column":29},"generated":{"line":1,"column":2075}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"i","original":{"line":178,"column":32},"generated":{"line":1,"column":2077}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":178,"column":37},"generated":{"line":1,"column":2080}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"i","original":{"line":178,"column":40},"generated":{"line":1,"column":2082}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":180,"column":8},"generated":{"line":1,"column":2086}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"scope","original":{"line":180,"column":30},"generated":{"line":1,"column":2105}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"key","original":{"line":179,"column":4},"generated":{"line":1,"column":2107}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"keys","original":{"line":179,"column":10},"generated":{"line":1,"column":2109}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"i","original":{"line":179,"column":15},"generated":{"line":1,"column":2111}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"new_scope","original":{"line":181,"column":6},"generated":{"line":1,"column":2115}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"key","original":{"line":181,"column":16},"generated":{"line":1,"column":2117}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","original":{"line":181,"column":23},"generated":{"line":1,"column":2120}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"Code","original":{"line":181,"column":27},"generated":{"line":1,"column":2124}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"String","original":{"line":181,"column":32},"generated":{"line":1,"column":2126}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"scope","original":{"line":181,"column":39},"generated":{"line":1,"column":2133}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"key","original":{"line":181,"column":45},"generated":{"line":1,"column":2135}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"new_scope","original":{"line":183,"column":6},"generated":{"line":1,"column":2140}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"key","original":{"line":183,"column":16},"generated":{"line":1,"column":2142}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"processScope","original":{"line":183,"column":23},"generated":{"line":1,"column":2145}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"scope","original":{"line":183,"column":36},"generated":{"line":1,"column":2147}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"key","original":{"line":183,"column":42},"generated":{"line":1,"column":2149}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"new_scope","original":{"line":187,"column":9},"generated":{"line":1,"column":2153}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"new_scope","original":{"line":187,"column":9},"generated":{"line":1,"column":2160}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"module","original":{"line":190,"column":0},"generated":{"line":1,"column":2162}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"exports","original":{"line":190,"column":7},"generated":{"line":1,"column":2169}},{"source":"../node_modules/mongodb/lib/operations/map_reduce.js","name":"MapReduceOperation","original":{"line":190,"column":17},"generated":{"line":1,"column":2177}}],"sources":{"../node_modules/mongodb/lib/operations/map_reduce.js":"'use strict';\n\nconst applyWriteConcern = require('../utils').applyWriteConcern;\nconst Code = require('../core').BSON.Code;\nconst decorateWithCollation = require('../utils').decorateWithCollation;\nconst decorateWithReadConcern = require('../utils').decorateWithReadConcern;\nconst executeCommand = require('./db_ops').executeCommand;\nconst handleCallback = require('../utils').handleCallback;\nconst isObject = require('../utils').isObject;\nconst loadDb = require('../dynamic_loaders').loadDb;\nconst OperationBase = require('./operation').OperationBase;\nconst ReadPreference = require('../core').ReadPreference;\nconst toError = require('../utils').toError;\n\nconst exclusionList = [\n  'readPreference',\n  'session',\n  'bypassDocumentValidation',\n  'w',\n  'wtimeout',\n  'j',\n  'writeConcern'\n];\n\n/**\n * Run Map Reduce across a collection. Be aware that the inline option for out will return an array of results not a collection.\n *\n * @class\n * @property {Collection} a Collection instance.\n * @property {(function|string)} map The mapping function.\n * @property {(function|string)} reduce The reduce function.\n * @property {object} [options] Optional settings. See Collection.prototype.mapReduce for a list of options.\n */\nclass MapReduceOperation extends OperationBase {\n  /**\n   * Constructs a MapReduce operation.\n   *\n   * @param {Collection} a Collection instance.\n   * @param {(function|string)} map The mapping function.\n   * @param {(function|string)} reduce The reduce function.\n   * @param {object} [options] Optional settings. See Collection.prototype.mapReduce for a list of options.\n   */\n  constructor(collection, map, reduce, options) {\n    super(options);\n\n    this.collection = collection;\n    this.map = map;\n    this.reduce = reduce;\n  }\n\n  /**\n   * Execute the operation.\n   *\n   * @param {Collection~resultCallback} [callback] The command result callback\n   */\n  execute(callback) {\n    const coll = this.collection;\n    const map = this.map;\n    const reduce = this.reduce;\n    let options = this.options;\n\n    const mapCommandHash = {\n      mapReduce: coll.collectionName,\n      map: map,\n      reduce: reduce\n    };\n\n    // Add any other options passed in\n    for (let n in options) {\n      if ('scope' === n) {\n        mapCommandHash[n] = processScope(options[n]);\n      } else {\n        // Only include if not in exclusion list\n        if (exclusionList.indexOf(n) === -1) {\n          mapCommandHash[n] = options[n];\n        }\n      }\n    }\n\n    options = Object.assign({}, options);\n\n    // Ensure we have the right read preference inheritance\n    options.readPreference = ReadPreference.resolve(coll, options);\n\n    // If we have a read preference and inline is not set as output fail hard\n    if (\n      options.readPreference !== false &&\n      options.readPreference !== 'primary' &&\n      options['out'] &&\n      options['out'].inline !== 1 &&\n      options['out'] !== 'inline'\n    ) {\n      // Force readPreference to primary\n      options.readPreference = 'primary';\n      // Decorate command with writeConcern if supported\n      applyWriteConcern(mapCommandHash, { db: coll.s.db, collection: coll }, options);\n    } else {\n      decorateWithReadConcern(mapCommandHash, coll, options);\n    }\n\n    // Is bypassDocumentValidation specified\n    if (options.bypassDocumentValidation === true) {\n      mapCommandHash.bypassDocumentValidation = options.bypassDocumentValidation;\n    }\n\n    // Have we specified collation\n    try {\n      decorateWithCollation(mapCommandHash, coll, options);\n    } catch (err) {\n      return callback(err, null);\n    }\n\n    // Execute command\n    executeCommand(coll.s.db, mapCommandHash, options, (err, result) => {\n      if (err) return handleCallback(callback, err);\n      // Check if we have an error\n      if (1 !== result.ok || result.err || result.errmsg) {\n        return handleCallback(callback, toError(result));\n      }\n\n      // Create statistics value\n      const stats = {};\n      if (result.timeMillis) stats['processtime'] = result.timeMillis;\n      if (result.counts) stats['counts'] = result.counts;\n      if (result.timing) stats['timing'] = result.timing;\n\n      // invoked with inline?\n      if (result.results) {\n        // If we wish for no verbosity\n        if (options['verbose'] == null || !options['verbose']) {\n          return handleCallback(callback, null, result.results);\n        }\n\n        return handleCallback(callback, null, { results: result.results, stats: stats });\n      }\n\n      // The returned collection\n      let collection = null;\n\n      // If we have an object it's a different db\n      if (result.result != null && typeof result.result === 'object') {\n        const doc = result.result;\n        // Return a collection from another db\n        let Db = loadDb();\n        collection = new Db(doc.db, coll.s.db.s.topology, coll.s.db.s.options).collection(\n          doc.collection\n        );\n      } else {\n        // Create a collection object that wraps the result collection\n        collection = coll.s.db.collection(result.result);\n      }\n\n      // If we wish for no verbosity\n      if (options['verbose'] == null || !options['verbose']) {\n        return handleCallback(callback, err, collection);\n      }\n\n      // Return stats as third set of values\n      handleCallback(callback, err, { collection: collection, stats: stats });\n    });\n  }\n}\n\n/**\n * Functions that are passed as scope args must\n * be converted to Code instances.\n * @ignore\n */\nfunction processScope(scope) {\n  if (!isObject(scope) || scope._bsontype === 'ObjectID') {\n    return scope;\n  }\n\n  const keys = Object.keys(scope);\n  let key;\n  const new_scope = {};\n\n  for (let i = keys.length - 1; i >= 0; i--) {\n    key = keys[i];\n    if ('function' === typeof scope[key]) {\n      new_scope[key] = new Code(String(scope[key]));\n    } else {\n      new_scope[key] = processScope(scope[key]);\n    }\n  }\n\n  return new_scope;\n}\n\nmodule.exports = MapReduceOperation;\n"},"lineCount":null}},"error":null,"hash":"ac05e9460e1969a281b83fc307bb80aa","cacheData":{"env":{}}}