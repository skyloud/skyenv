{"id":"OjHz","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"./operation","loc":{"line":3,"column":30},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/index_exists.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/operation.js"},{"name":"../utils","loc":{"line":4,"column":31},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/index_exists.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/utils.js"},{"name":"./db_ops","loc":{"line":5,"column":35},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/index_exists.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/db_ops.js"}],"generated":{"js":"\"use strict\";const e=require(\"./operation\").OperationBase,l=require(\"../utils\").handleCallback,n=require(\"./db_ops\").indexInformation;class t extends e{constructor(e,l,n){super(n),this.collection=e,this.indexes=l}execute(e){const t=this.collection,r=this.indexes,i=this.options;n(t.s.db,t.collectionName,i,(n,t)=>{if(null!=n)return l(e,n,null);if(!Array.isArray(r))return l(e,null,null!=t[r]);for(let i=0;i<r.length;i++)if(null==t[r[i]])return l(e,null,!1);return l(e,null,!0)})}}module.exports=t;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"OperationBase","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"require","original":{"line":3,"column":22},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":3,"column":30},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"OperationBase","original":{"line":3,"column":45},"generated":{"line":1,"column":44}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"handleCallback","original":{"line":4,"column":6},"generated":{"line":1,"column":58}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"require","original":{"line":4,"column":23},"generated":{"line":1,"column":60}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":4,"column":31},"generated":{"line":1,"column":68}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"handleCallback","original":{"line":4,"column":43},"generated":{"line":1,"column":80}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexInformationDb","original":{"line":5,"column":6},"generated":{"line":1,"column":95}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"require","original":{"line":5,"column":27},"generated":{"line":1,"column":97}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":5,"column":35},"generated":{"line":1,"column":105}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexInformation","original":{"line":5,"column":47},"generated":{"line":1,"column":117}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":7,"column":0},"generated":{"line":1,"column":134}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"IndexExistsOperation","original":{"line":7,"column":6},"generated":{"line":1,"column":140}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"OperationBase","original":{"line":7,"column":35},"generated":{"line":1,"column":150}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"constructor","original":{"line":8,"column":2},"generated":{"line":1,"column":152}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"collection","original":{"line":8,"column":14},"generated":{"line":1,"column":164}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexes","original":{"line":8,"column":26},"generated":{"line":1,"column":166}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"options","original":{"line":8,"column":35},"generated":{"line":1,"column":168}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"options","original":{"line":9,"column":10},"generated":{"line":1,"column":171}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"options","original":{"line":9,"column":10},"generated":{"line":1,"column":177}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"collection","original":{"line":11,"column":9},"generated":{"line":1,"column":180}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"collection","original":{"line":11,"column":9},"generated":{"line":1,"column":185}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"collection","original":{"line":11,"column":22},"generated":{"line":1,"column":196}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexes","original":{"line":12,"column":9},"generated":{"line":1,"column":198}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexes","original":{"line":12,"column":9},"generated":{"line":1,"column":203}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexes","original":{"line":12,"column":19},"generated":{"line":1,"column":211}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"execute","original":{"line":15,"column":2},"generated":{"line":1,"column":213}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"callback","original":{"line":15,"column":10},"generated":{"line":1,"column":221}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"coll","original":{"line":16,"column":10},"generated":{"line":1,"column":224}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"coll","original":{"line":16,"column":10},"generated":{"line":1,"column":230}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":16,"column":17},"generated":{"line":1,"column":232}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"collection","original":{"line":16,"column":22},"generated":{"line":1,"column":237}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexes","original":{"line":17,"column":10},"generated":{"line":1,"column":248}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":17,"column":20},"generated":{"line":1,"column":250}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexes","original":{"line":17,"column":25},"generated":{"line":1,"column":255}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"options","original":{"line":18,"column":10},"generated":{"line":1,"column":263}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":18,"column":20},"generated":{"line":1,"column":265}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"options","original":{"line":18,"column":25},"generated":{"line":1,"column":270}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexInformationDb","original":{"line":20,"column":4},"generated":{"line":1,"column":278}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"coll","original":{"line":20,"column":23},"generated":{"line":1,"column":280}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"s","original":{"line":20,"column":28},"generated":{"line":1,"column":282}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"db","original":{"line":20,"column":30},"generated":{"line":1,"column":284}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"coll","original":{"line":20,"column":34},"generated":{"line":1,"column":287}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"collectionName","original":{"line":20,"column":39},"generated":{"line":1,"column":289}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"options","original":{"line":20,"column":55},"generated":{"line":1,"column":304}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":20,"column":64},"generated":{"line":1,"column":306}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"err","original":{"line":20,"column":65},"generated":{"line":1,"column":307}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexInformation","original":{"line":20,"column":70},"generated":{"line":1,"column":309}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"err","original":{"line":22,"column":10},"generated":{"line":1,"column":314}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":22,"column":17},"generated":{"line":1,"column":317}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"err","original":{"line":22,"column":10},"generated":{"line":1,"column":323}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":22,"column":23},"generated":{"line":1,"column":325}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"handleCallback","original":{"line":22,"column":30},"generated":{"line":1,"column":332}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"callback","original":{"line":22,"column":45},"generated":{"line":1,"column":334}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"err","original":{"line":22,"column":55},"generated":{"line":1,"column":336}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":22,"column":60},"generated":{"line":1,"column":338}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":24,"column":10},"generated":{"line":1,"column":344}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"Array","original":{"line":24,"column":11},"generated":{"line":1,"column":348}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"isArray","original":{"line":24,"column":17},"generated":{"line":1,"column":354}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexes","original":{"line":24,"column":25},"generated":{"line":1,"column":362}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":25,"column":8},"generated":{"line":1,"column":365}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"handleCallback","original":{"line":25,"column":15},"generated":{"line":1,"column":372}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"callback","original":{"line":25,"column":30},"generated":{"line":1,"column":374}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":25,"column":40},"generated":{"line":1,"column":376}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":25,"column":75},"generated":{"line":1,"column":381}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexInformation","original":{"line":25,"column":46},"generated":{"line":1,"column":387}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexes","original":{"line":25,"column":63},"generated":{"line":1,"column":389}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":27,"column":11},"generated":{"line":1,"column":393}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":27,"column":11},"generated":{"line":1,"column":397}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"i","original":{"line":27,"column":15},"generated":{"line":1,"column":401}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":27,"column":19},"generated":{"line":1,"column":403}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"i","original":{"line":27,"column":22},"generated":{"line":1,"column":405}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexes","original":{"line":27,"column":26},"generated":{"line":1,"column":407}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"length","original":{"line":27,"column":34},"generated":{"line":1,"column":409}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"i","original":{"line":27,"column":42},"generated":{"line":1,"column":416}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexInformation","original":{"line":28,"column":12},"generated":{"line":1,"column":420}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":28,"column":44},"generated":{"line":1,"column":423}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexInformation","original":{"line":28,"column":12},"generated":{"line":1,"column":429}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"indexes","original":{"line":28,"column":29},"generated":{"line":1,"column":431}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"i","original":{"line":28,"column":37},"generated":{"line":1,"column":433}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"handleCallback","original":{"line":29,"column":17},"generated":{"line":1,"column":437}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"handleCallback","original":{"line":29,"column":17},"generated":{"line":1,"column":444}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"callback","original":{"line":29,"column":32},"generated":{"line":1,"column":446}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":29,"column":42},"generated":{"line":1,"column":448}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":29,"column":48},"generated":{"line":1,"column":454}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"handleCallback","original":{"line":34,"column":13},"generated":{"line":1,"column":457}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"handleCallback","original":{"line":34,"column":13},"generated":{"line":1,"column":464}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"callback","original":{"line":34,"column":28},"generated":{"line":1,"column":466}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":34,"column":38},"generated":{"line":1,"column":468}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","original":{"line":34,"column":44},"generated":{"line":1,"column":474}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"module","original":{"line":39,"column":0},"generated":{"line":1,"column":480}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"exports","original":{"line":39,"column":7},"generated":{"line":1,"column":487}},{"source":"../node_modules/mongodb/lib/operations/index_exists.js","name":"IndexExistsOperation","original":{"line":39,"column":17},"generated":{"line":1,"column":495}}],"sources":{"../node_modules/mongodb/lib/operations/index_exists.js":"'use strict';\n\nconst OperationBase = require('./operation').OperationBase;\nconst handleCallback = require('../utils').handleCallback;\nconst indexInformationDb = require('./db_ops').indexInformation;\n\nclass IndexExistsOperation extends OperationBase {\n  constructor(collection, indexes, options) {\n    super(options);\n\n    this.collection = collection;\n    this.indexes = indexes;\n  }\n\n  execute(callback) {\n    const coll = this.collection;\n    const indexes = this.indexes;\n    const options = this.options;\n\n    indexInformationDb(coll.s.db, coll.collectionName, options, (err, indexInformation) => {\n      // If we have an error return\n      if (err != null) return handleCallback(callback, err, null);\n      // Let's check for the index names\n      if (!Array.isArray(indexes))\n        return handleCallback(callback, null, indexInformation[indexes] != null);\n      // Check in list of indexes\n      for (let i = 0; i < indexes.length; i++) {\n        if (indexInformation[indexes[i]] == null) {\n          return handleCallback(callback, null, false);\n        }\n      }\n\n      // All keys found return true\n      return handleCallback(callback, null, true);\n    });\n  }\n}\n\nmodule.exports = IndexExistsOperation;\n"},"lineCount":null}},"error":null,"hash":"d00a9d4842bdd2e5b7e4efad8432d272","cacheData":{"env":{}}}