{"id":"G0OB","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"./command","loc":{"line":3,"column":33},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/validate_collection.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/command.js"}],"generated":{"js":"\"use strict\";const l=require(\"./command\");class r extends l{constructor(l,r,e){let t={validate:r};const n=Object.keys(e);for(let o=0;o<n.length;o++)e.hasOwnProperty(n[o])&&\"session\"!==n[o]&&(t[n[o]]=e[n[o]]);super(l.s.db,e,null,t),this.collectionName=r}execute(l){const r=this.collectionName;super.execute((e,t)=>null!=e?l(e,null):0===t.ok?l(new Error(\"Error with validate command\"),null):null!=t.result&&t.result.constructor!==String?l(new Error(\"Error with validation data\"),null):null!=t.result&&null!=t.result.match(/exception|corrupt/)?l(new Error(\"Error: invalid collection \"+r),null):null==t.valid||t.valid?l(null,t):l(new Error(\"Error: invalid collection \"+r),null))}}module.exports=r;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"CommandOperation","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"require","original":{"line":3,"column":25},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":3,"column":33},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":5,"column":0},"generated":{"line":1,"column":42}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"ValidateCollectionOperation","original":{"line":5,"column":6},"generated":{"line":1,"column":48}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"CommandOperation","original":{"line":5,"column":42},"generated":{"line":1,"column":58}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"constructor","original":{"line":6,"column":2},"generated":{"line":1,"column":60}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"admin","original":{"line":6,"column":14},"generated":{"line":1,"column":72}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"collectionName","original":{"line":6,"column":21},"generated":{"line":1,"column":74}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"options","original":{"line":6,"column":37},"generated":{"line":1,"column":76}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"command","original":{"line":8,"column":8},"generated":{"line":1,"column":79}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"command","original":{"line":8,"column":8},"generated":{"line":1,"column":83}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":8,"column":18},"generated":{"line":1,"column":85}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"validate","original":{"line":8,"column":20},"generated":{"line":1,"column":86}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"collectionName","original":{"line":8,"column":30},"generated":{"line":1,"column":95}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"keys","original":{"line":9,"column":10},"generated":{"line":1,"column":98}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"keys","original":{"line":9,"column":10},"generated":{"line":1,"column":104}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"Object","original":{"line":9,"column":17},"generated":{"line":1,"column":106}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"keys","original":{"line":9,"column":24},"generated":{"line":1,"column":113}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"options","original":{"line":9,"column":29},"generated":{"line":1,"column":118}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":10,"column":9},"generated":{"line":1,"column":121}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":10,"column":9},"generated":{"line":1,"column":125}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"i","original":{"line":10,"column":13},"generated":{"line":1,"column":129}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":10,"column":17},"generated":{"line":1,"column":131}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"i","original":{"line":10,"column":20},"generated":{"line":1,"column":133}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"keys","original":{"line":10,"column":24},"generated":{"line":1,"column":135}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"length","original":{"line":10,"column":29},"generated":{"line":1,"column":137}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"i","original":{"line":10,"column":37},"generated":{"line":1,"column":144}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"options","original":{"line":11,"column":10},"generated":{"line":1,"column":148}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"hasOwnProperty","original":{"line":11,"column":18},"generated":{"line":1,"column":150}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"keys","original":{"line":11,"column":33},"generated":{"line":1,"column":165}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"i","original":{"line":11,"column":38},"generated":{"line":1,"column":167}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":11,"column":57},"generated":{"line":1,"column":172}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"keys","original":{"line":11,"column":45},"generated":{"line":1,"column":184}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"i","original":{"line":11,"column":50},"generated":{"line":1,"column":186}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"command","original":{"line":12,"column":8},"generated":{"line":1,"column":191}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"keys","original":{"line":12,"column":16},"generated":{"line":1,"column":193}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"i","original":{"line":12,"column":21},"generated":{"line":1,"column":195}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"options","original":{"line":12,"column":27},"generated":{"line":1,"column":199}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"keys","original":{"line":12,"column":35},"generated":{"line":1,"column":201}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"i","original":{"line":12,"column":40},"generated":{"line":1,"column":203}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"admin","original":{"line":16,"column":10},"generated":{"line":1,"column":208}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"admin","original":{"line":16,"column":10},"generated":{"line":1,"column":214}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"s","original":{"line":16,"column":16},"generated":{"line":1,"column":216}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"db","original":{"line":16,"column":18},"generated":{"line":1,"column":218}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"options","original":{"line":16,"column":22},"generated":{"line":1,"column":221}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":16,"column":31},"generated":{"line":1,"column":223}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"command","original":{"line":16,"column":37},"generated":{"line":1,"column":228}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"collectionName","original":{"line":17,"column":9},"generated":{"line":1,"column":231}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"collectionName","original":{"line":17,"column":9},"generated":{"line":1,"column":236}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"collectionName","original":{"line":17,"column":26},"generated":{"line":1,"column":251}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"execute","original":{"line":20,"column":2},"generated":{"line":1,"column":253}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"callback","original":{"line":20,"column":10},"generated":{"line":1,"column":261}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"collectionName","original":{"line":21,"column":10},"generated":{"line":1,"column":264}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"collectionName","original":{"line":21,"column":10},"generated":{"line":1,"column":270}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":21,"column":27},"generated":{"line":1,"column":272}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"collectionName","original":{"line":21,"column":32},"generated":{"line":1,"column":277}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"execute","original":{"line":23,"column":10},"generated":{"line":1,"column":292}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"execute","original":{"line":23,"column":10},"generated":{"line":1,"column":298}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":23,"column":18},"generated":{"line":1,"column":306}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"err","original":{"line":23,"column":19},"generated":{"line":1,"column":307}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"doc","original":{"line":23,"column":24},"generated":{"line":1,"column":309}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":24,"column":17},"generated":{"line":1,"column":313}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"err","original":{"line":24,"column":10},"generated":{"line":1,"column":319}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"callback","original":{"line":24,"column":30},"generated":{"line":1,"column":321}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"err","original":{"line":24,"column":39},"generated":{"line":1,"column":323}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":24,"column":44},"generated":{"line":1,"column":325}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":26,"column":21},"generated":{"line":1,"column":331}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"doc","original":{"line":26,"column":10},"generated":{"line":1,"column":335}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"ok","original":{"line":26,"column":14},"generated":{"line":1,"column":337}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"callback","original":{"line":26,"column":31},"generated":{"line":1,"column":340}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":26,"column":40},"generated":{"line":1,"column":342}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"Error","original":{"line":26,"column":44},"generated":{"line":1,"column":346}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":26,"column":50},"generated":{"line":1,"column":352}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":26,"column":82},"generated":{"line":1,"column":383}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":27,"column":24},"generated":{"line":1,"column":389}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"doc","original":{"line":27,"column":10},"generated":{"line":1,"column":395}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"result","original":{"line":27,"column":14},"generated":{"line":1,"column":397}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"doc","original":{"line":27,"column":32},"generated":{"line":1,"column":405}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"result","original":{"line":27,"column":36},"generated":{"line":1,"column":407}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"constructor","original":{"line":27,"column":43},"generated":{"line":1,"column":414}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"String","original":{"line":27,"column":59},"generated":{"line":1,"column":428}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"callback","original":{"line":28,"column":15},"generated":{"line":1,"column":435}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":28,"column":24},"generated":{"line":1,"column":437}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"Error","original":{"line":28,"column":28},"generated":{"line":1,"column":441}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":28,"column":34},"generated":{"line":1,"column":447}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":28,"column":65},"generated":{"line":1,"column":477}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":29,"column":24},"generated":{"line":1,"column":483}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"doc","original":{"line":29,"column":10},"generated":{"line":1,"column":489}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"result","original":{"line":29,"column":14},"generated":{"line":1,"column":491}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":29,"column":73},"generated":{"line":1,"column":499}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"doc","original":{"line":29,"column":32},"generated":{"line":1,"column":505}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"result","original":{"line":29,"column":36},"generated":{"line":1,"column":507}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"match","original":{"line":29,"column":43},"generated":{"line":1,"column":514}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":29,"column":49},"generated":{"line":1,"column":520}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"callback","original":{"line":30,"column":15},"generated":{"line":1,"column":541}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":30,"column":24},"generated":{"line":1,"column":543}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"Error","original":{"line":30,"column":28},"generated":{"line":1,"column":547}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":30,"column":34},"generated":{"line":1,"column":553}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"collectionName","original":{"line":30,"column":65},"generated":{"line":1,"column":582}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":30,"column":82},"generated":{"line":1,"column":585}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":31,"column":23},"generated":{"line":1,"column":591}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"doc","original":{"line":31,"column":10},"generated":{"line":1,"column":597}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"valid","original":{"line":31,"column":14},"generated":{"line":1,"column":599}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"doc","original":{"line":31,"column":32},"generated":{"line":1,"column":606}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"valid","original":{"line":31,"column":36},"generated":{"line":1,"column":608}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"callback","original":{"line":34,"column":13},"generated":{"line":1,"column":614}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":34,"column":22},"generated":{"line":1,"column":616}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"doc","original":{"line":34,"column":28},"generated":{"line":1,"column":621}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"callback","original":{"line":32,"column":15},"generated":{"line":1,"column":624}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":32,"column":24},"generated":{"line":1,"column":626}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"Error","original":{"line":32,"column":28},"generated":{"line":1,"column":630}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":32,"column":34},"generated":{"line":1,"column":636}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"collectionName","original":{"line":32,"column":65},"generated":{"line":1,"column":665}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","original":{"line":32,"column":82},"generated":{"line":1,"column":668}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"module","original":{"line":39,"column":0},"generated":{"line":1,"column":676}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"exports","original":{"line":39,"column":7},"generated":{"line":1,"column":683}},{"source":"../node_modules/mongodb/lib/operations/validate_collection.js","name":"ValidateCollectionOperation","original":{"line":39,"column":17},"generated":{"line":1,"column":691}}],"sources":{"../node_modules/mongodb/lib/operations/validate_collection.js":"'use strict';\n\nconst CommandOperation = require('./command');\n\nclass ValidateCollectionOperation extends CommandOperation {\n  constructor(admin, collectionName, options) {\n    // Decorate command with extra options\n    let command = { validate: collectionName };\n    const keys = Object.keys(options);\n    for (let i = 0; i < keys.length; i++) {\n      if (options.hasOwnProperty(keys[i]) && keys[i] !== 'session') {\n        command[keys[i]] = options[keys[i]];\n      }\n    }\n\n    super(admin.s.db, options, null, command);\n    this.collectionName = collectionName;\n  }\n\n  execute(callback) {\n    const collectionName = this.collectionName;\n\n    super.execute((err, doc) => {\n      if (err != null) return callback(err, null);\n\n      if (doc.ok === 0) return callback(new Error('Error with validate command'), null);\n      if (doc.result != null && doc.result.constructor !== String)\n        return callback(new Error('Error with validation data'), null);\n      if (doc.result != null && doc.result.match(/exception|corrupt/) != null)\n        return callback(new Error('Error: invalid collection ' + collectionName), null);\n      if (doc.valid != null && !doc.valid)\n        return callback(new Error('Error: invalid collection ' + collectionName), null);\n\n      return callback(null, doc);\n    });\n  }\n}\n\nmodule.exports = ValidateCollectionOperation;\n"},"lineCount":null}},"error":null,"hash":"9caddb3b3e7c5d45cc518bc30d6166c8","cacheData":{"env":{}}}