{"id":"yCtL","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"../core/error","loc":{"line":7,"column":33},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/execute_operation.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/error.js"},{"name":"./operation","loc":{"line":5,"column":30},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/execute_operation.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/operation.js"},{"name":"../core/topologies/read_preference","loc":{"line":6,"column":31},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/execute_operation.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/topologies/read_preference.js"},{"name":"../core/utils","loc":{"line":9,"column":34},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/execute_operation.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/utils.js"}],"generated":{"js":"\"use strict\";const e=require(\"../core/error\").MongoError,r=require(\"./operation\").Aspect,s=require(\"./operation\").OperationBase,n=require(\"../core/topologies/read_preference\"),o=require(\"../core/error\").isRetryableError,i=require(\"../core/utils\").maxWireVersion,t=require(\"../core/utils\").isUnifiedTopology;function c(n,o,i){if(null==n)throw new TypeError(\"This method requires a valid topology instance\");if(!(o instanceof s))throw new TypeError(\"This method requires a valid operation instance\");if(t(n)&&n.shouldCheckForSessionSupport())return l(n,o,i);const c=n.s.promiseLibrary;let u,p,f;if(n.hasSessionSupport())if(null==o.session)p=Symbol(),u=n.startSession({owner:p}),o.session=u;else if(o.session.hasEnded)throw new e(\"Use of expired sessions is not permitted\");function d(e,r){u&&u.owner===p&&(u.endSession(),o.session===u&&o.clearSession()),i(e,r)}\"function\"!=typeof i&&(f=new c((e,r)=>{i=((s,n)=>{if(s)return r(s);e(n)})}));try{o.hasAspect(r.EXECUTE_WITH_SELECTION)?a(n,o,d):o.execute(d)}catch(y){throw u&&u.owner===p&&(u.endSession(),o.session===u&&o.clearSession()),y}return f}function u(e){return i(e)>=6}function a(s,i,t){const c=i.readPreference||n.primary,a=i.session&&i.session.inTransaction();if(a&&!c.equals(n.primary))return void t(new e(\"Read preference in a transaction must be primary, not: \".concat(c.mode)));const l={readPreference:c,session:i.session};function p(e,r){return null==e?t(null,r):o(e)?void s.selectServer(l,(e,r)=>{!e&&u(r)?i.execute(r,t):t(e,null)}):t(e)}s.selectServer(l,(e,n)=>{if(e)return void t(e,null);const o=!1!==s.s.options.retryReads&&i.session&&!a&&u(n)&&i.canRetryRead;i.hasAspect(r.RETRYABLE)&&o?i.execute(n,p):i.execute(n,t)})}function l(e,r,s){const o=e.s.promiseLibrary;let i;return\"function\"!=typeof s&&(i=new o((e,r)=>{s=((s,n)=>{if(s)return r(s);e(n)})})),e.selectServer(n.primaryPreferred,n=>{n?s(n):c(e,r,s)}),i}module.exports=c;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"MongoError","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"require","original":{"line":3,"column":19},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":3,"column":27},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"MongoError","original":{"line":3,"column":44},"generated":{"line":1,"column":46}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Aspect","original":{"line":4,"column":6},"generated":{"line":1,"column":57}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"require","original":{"line":4,"column":15},"generated":{"line":1,"column":59}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":4,"column":23},"generated":{"line":1,"column":67}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Aspect","original":{"line":4,"column":38},"generated":{"line":1,"column":82}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"OperationBase","original":{"line":5,"column":6},"generated":{"line":1,"column":89}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"require","original":{"line":5,"column":22},"generated":{"line":1,"column":91}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":5,"column":30},"generated":{"line":1,"column":99}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"OperationBase","original":{"line":5,"column":45},"generated":{"line":1,"column":114}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"ReadPreference","original":{"line":6,"column":6},"generated":{"line":1,"column":128}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"require","original":{"line":6,"column":23},"generated":{"line":1,"column":130}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":6,"column":31},"generated":{"line":1,"column":138}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"isRetryableError","original":{"line":7,"column":6},"generated":{"line":1,"column":176}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"require","original":{"line":7,"column":25},"generated":{"line":1,"column":178}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":7,"column":33},"generated":{"line":1,"column":186}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"isRetryableError","original":{"line":7,"column":50},"generated":{"line":1,"column":203}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"maxWireVersion","original":{"line":8,"column":6},"generated":{"line":1,"column":220}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"require","original":{"line":8,"column":23},"generated":{"line":1,"column":222}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":8,"column":31},"generated":{"line":1,"column":230}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"maxWireVersion","original":{"line":8,"column":48},"generated":{"line":1,"column":247}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"isUnifiedTopology","original":{"line":9,"column":6},"generated":{"line":1,"column":262}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"require","original":{"line":9,"column":26},"generated":{"line":1,"column":264}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":9,"column":34},"generated":{"line":1,"column":272}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"isUnifiedTopology","original":{"line":9,"column":51},"generated":{"line":1,"column":289}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":24,"column":0},"generated":{"line":1,"column":307}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"executeOperation","original":{"line":24,"column":9},"generated":{"line":1,"column":316}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":24,"column":26},"generated":{"line":1,"column":318}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":24,"column":36},"generated":{"line":1,"column":320}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":24,"column":47},"generated":{"line":1,"column":322}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":25,"column":6},"generated":{"line":1,"column":325}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":25,"column":18},"generated":{"line":1,"column":328}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":25,"column":6},"generated":{"line":1,"column":334}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":26,"column":10},"generated":{"line":1,"column":336}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":26,"column":10},"generated":{"line":1,"column":342}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"TypeError","original":{"line":26,"column":14},"generated":{"line":1,"column":346}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":26,"column":24},"generated":{"line":1,"column":356}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":29,"column":6},"generated":{"line":1,"column":406}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":29,"column":8},"generated":{"line":1,"column":411}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"OperationBase","original":{"line":29,"column":29},"generated":{"line":1,"column":424}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":30,"column":10},"generated":{"line":1,"column":427}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":30,"column":10},"generated":{"line":1,"column":433}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"TypeError","original":{"line":30,"column":14},"generated":{"line":1,"column":437}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":30,"column":24},"generated":{"line":1,"column":447}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"isUnifiedTopology","original":{"line":33,"column":6},"generated":{"line":1,"column":498}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"isUnifiedTopology","original":{"line":33,"column":6},"generated":{"line":1,"column":501}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":33,"column":24},"generated":{"line":1,"column":503}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":33,"column":37},"generated":{"line":1,"column":507}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"shouldCheckForSessionSupport","original":{"line":33,"column":46},"generated":{"line":1,"column":509}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"selectServerForSessionSupport","original":{"line":34,"column":11},"generated":{"line":1,"column":540}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"selectServerForSessionSupport","original":{"line":34,"column":11},"generated":{"line":1,"column":547}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":34,"column":41},"generated":{"line":1,"column":549}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":34,"column":51},"generated":{"line":1,"column":551}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":34,"column":62},"generated":{"line":1,"column":553}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Promise","original":{"line":37,"column":8},"generated":{"line":1,"column":556}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Promise","original":{"line":37,"column":8},"generated":{"line":1,"column":562}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":37,"column":18},"generated":{"line":1,"column":564}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"s","original":{"line":37,"column":27},"generated":{"line":1,"column":566}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"promiseLibrary","original":{"line":37,"column":29},"generated":{"line":1,"column":568}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":41,"column":6},"generated":{"line":1,"column":583}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":41,"column":6},"generated":{"line":1,"column":587}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"owner","original":{"line":41,"column":15},"generated":{"line":1,"column":589}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":52,"column":6},"generated":{"line":1,"column":591}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":42,"column":6},"generated":{"line":1,"column":593}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":42,"column":6},"generated":{"line":1,"column":596}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"hasSessionSupport","original":{"line":42,"column":15},"generated":{"line":1,"column":598}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":43,"column":8},"generated":{"line":1,"column":618}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":43,"column":29},"generated":{"line":1,"column":621}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":43,"column":8},"generated":{"line":1,"column":627}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":43,"column":18},"generated":{"line":1,"column":629}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"owner","original":{"line":44,"column":6},"generated":{"line":1,"column":637}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Symbol","original":{"line":44,"column":14},"generated":{"line":1,"column":639}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":45,"column":6},"generated":{"line":1,"column":648}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":45,"column":16},"generated":{"line":1,"column":650}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"startSession","original":{"line":45,"column":25},"generated":{"line":1,"column":652}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":45,"column":38},"generated":{"line":1,"column":665}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"owner","original":{"line":45,"column":40},"generated":{"line":1,"column":666}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"owner","original":{"line":45,"column":40},"generated":{"line":1,"column":672}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":46,"column":6},"generated":{"line":1,"column":676}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":46,"column":16},"generated":{"line":1,"column":678}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":46,"column":26},"generated":{"line":1,"column":686}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":47,"column":11},"generated":{"line":1,"column":693}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":47,"column":15},"generated":{"line":1,"column":696}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":47,"column":25},"generated":{"line":1,"column":698}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"hasEnded","original":{"line":47,"column":33},"generated":{"line":1,"column":706}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":48,"column":12},"generated":{"line":1,"column":715}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":48,"column":12},"generated":{"line":1,"column":721}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"MongoError","original":{"line":48,"column":16},"generated":{"line":1,"column":725}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":48,"column":27},"generated":{"line":1,"column":727}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"executeCallback","original":{"line":62,"column":11},"generated":{"line":1,"column":771}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"executeCallback","original":{"line":62,"column":11},"generated":{"line":1,"column":780}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":62,"column":27},"generated":{"line":1,"column":782}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":62,"column":32},"generated":{"line":1,"column":784}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":63,"column":8},"generated":{"line":1,"column":787}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":63,"column":19},"generated":{"line":1,"column":790}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"owner","original":{"line":63,"column":27},"generated":{"line":1,"column":792}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"owner","original":{"line":63,"column":37},"generated":{"line":1,"column":800}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":64,"column":6},"generated":{"line":1,"column":804}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"endSession","original":{"line":64,"column":14},"generated":{"line":1,"column":806}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":65,"column":10},"generated":{"line":1,"column":819}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":65,"column":20},"generated":{"line":1,"column":821}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":65,"column":32},"generated":{"line":1,"column":831}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":66,"column":8},"generated":{"line":1,"column":834}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"clearSession","original":{"line":66,"column":18},"generated":{"line":1,"column":836}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":70,"column":4},"generated":{"line":1,"column":852}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":70,"column":13},"generated":{"line":1,"column":854}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":70,"column":18},"generated":{"line":1,"column":856}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":53,"column":26},"generated":{"line":1,"column":859}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":53,"column":13},"generated":{"line":1,"column":878}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":54,"column":4},"generated":{"line":1,"column":882}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":54,"column":13},"generated":{"line":1,"column":884}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Promise","original":{"line":54,"column":17},"generated":{"line":1,"column":888}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":54,"column":25},"generated":{"line":1,"column":890}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"resolve","original":{"line":54,"column":26},"generated":{"line":1,"column":891}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"reject","original":{"line":54,"column":35},"generated":{"line":1,"column":893}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":55,"column":6},"generated":{"line":1,"column":898}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":55,"column":17},"generated":{"line":1,"column":900}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":55,"column":18},"generated":{"line":1,"column":902}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"res","original":{"line":55,"column":23},"generated":{"line":1,"column":904}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":56,"column":12},"generated":{"line":1,"column":909}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":56,"column":12},"generated":{"line":1,"column":912}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":56,"column":17},"generated":{"line":1,"column":914}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"reject","original":{"line":56,"column":24},"generated":{"line":1,"column":921}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":56,"column":31},"generated":{"line":1,"column":923}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"resolve","original":{"line":57,"column":8},"generated":{"line":1,"column":926}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"res","original":{"line":57,"column":16},"generated":{"line":1,"column":928}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":73,"column":6},"generated":{"line":1,"column":936}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":74,"column":8},"generated":{"line":1,"column":940}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"hasAspect","original":{"line":74,"column":18},"generated":{"line":1,"column":942}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Aspect","original":{"line":74,"column":28},"generated":{"line":1,"column":952}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"EXECUTE_WITH_SELECTION","original":{"line":74,"column":35},"generated":{"line":1,"column":954}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"executeWithServerSelection","original":{"line":75,"column":6},"generated":{"line":1,"column":978}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":75,"column":33},"generated":{"line":1,"column":980}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":75,"column":43},"generated":{"line":1,"column":982}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"executeCallback","original":{"line":75,"column":54},"generated":{"line":1,"column":984}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":77,"column":6},"generated":{"line":1,"column":987}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"execute","original":{"line":77,"column":16},"generated":{"line":1,"column":989}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"executeCallback","original":{"line":77,"column":24},"generated":{"line":1,"column":997}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":79,"column":4},"generated":{"line":1,"column":1000}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"e","original":{"line":79,"column":11},"generated":{"line":1,"column":1006}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"e","original":{"line":87,"column":10},"generated":{"line":1,"column":1009}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":80,"column":8},"generated":{"line":1,"column":1015}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":80,"column":19},"generated":{"line":1,"column":1018}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"owner","original":{"line":80,"column":27},"generated":{"line":1,"column":1020}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"owner","original":{"line":80,"column":37},"generated":{"line":1,"column":1028}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":81,"column":6},"generated":{"line":1,"column":1032}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"endSession","original":{"line":81,"column":14},"generated":{"line":1,"column":1034}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":82,"column":10},"generated":{"line":1,"column":1047}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":82,"column":20},"generated":{"line":1,"column":1049}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":82,"column":32},"generated":{"line":1,"column":1059}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":83,"column":8},"generated":{"line":1,"column":1062}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"clearSession","original":{"line":83,"column":18},"generated":{"line":1,"column":1064}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"e","original":{"line":87,"column":10},"generated":{"line":1,"column":1080}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":90,"column":9},"generated":{"line":1,"column":1082}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":90,"column":9},"generated":{"line":1,"column":1089}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1091}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"supportsRetryableReads","original":{"line":93,"column":9},"generated":{"line":1,"column":1100}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"server","original":{"line":93,"column":32},"generated":{"line":1,"column":1102}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"maxWireVersion","original":{"line":94,"column":9},"generated":{"line":1,"column":1105}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"maxWireVersion","original":{"line":94,"column":9},"generated":{"line":1,"column":1112}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"server","original":{"line":94,"column":24},"generated":{"line":1,"column":1114}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":94,"column":35},"generated":{"line":1,"column":1118}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":97,"column":0},"generated":{"line":1,"column":1120}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"executeWithServerSelection","original":{"line":97,"column":9},"generated":{"line":1,"column":1129}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":97,"column":36},"generated":{"line":1,"column":1131}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":97,"column":46},"generated":{"line":1,"column":1133}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":97,"column":57},"generated":{"line":1,"column":1135}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"readPreference","original":{"line":98,"column":8},"generated":{"line":1,"column":1138}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"readPreference","original":{"line":98,"column":8},"generated":{"line":1,"column":1144}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":98,"column":25},"generated":{"line":1,"column":1146}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"readPreference","original":{"line":98,"column":35},"generated":{"line":1,"column":1148}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"ReadPreference","original":{"line":98,"column":53},"generated":{"line":1,"column":1164}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"primary","original":{"line":98,"column":68},"generated":{"line":1,"column":1166}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"inTransaction","original":{"line":99,"column":8},"generated":{"line":1,"column":1174}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":99,"column":24},"generated":{"line":1,"column":1176}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":99,"column":34},"generated":{"line":1,"column":1178}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":99,"column":45},"generated":{"line":1,"column":1187}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":99,"column":55},"generated":{"line":1,"column":1189}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"inTransaction","original":{"line":99,"column":63},"generated":{"line":1,"column":1197}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"inTransaction","original":{"line":101,"column":6},"generated":{"line":1,"column":1213}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"inTransaction","original":{"line":101,"column":6},"generated":{"line":1,"column":1216}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"readPreference","original":{"line":101,"column":24},"generated":{"line":1,"column":1220}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"equals","original":{"line":101,"column":39},"generated":{"line":1,"column":1222}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"ReadPreference","original":{"line":101,"column":46},"generated":{"line":1,"column":1229}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"primary","original":{"line":101,"column":61},"generated":{"line":1,"column":1231}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":108,"column":4},"generated":{"line":1,"column":1240}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":102,"column":4},"generated":{"line":1,"column":1252}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":103,"column":6},"generated":{"line":1,"column":1254}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"MongoError","original":{"line":103,"column":10},"generated":{"line":1,"column":1258}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"readPreference","original":{"line":104,"column":66},"generated":{"line":1,"column":1260}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"readPreference","original":{"line":104,"column":66},"generated":{"line":1,"column":1318}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"readPreference","original":{"line":104,"column":66},"generated":{"line":1,"column":1325}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"mode","original":{"line":104,"column":81},"generated":{"line":1,"column":1327}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"serverSelectionOptions","original":{"line":111,"column":8},"generated":{"line":1,"column":1335}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"serverSelectionOptions","original":{"line":111,"column":8},"generated":{"line":1,"column":1341}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":111,"column":33},"generated":{"line":1,"column":1343}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"readPreference","original":{"line":112,"column":4},"generated":{"line":1,"column":1344}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"readPreference","original":{"line":112,"column":4},"generated":{"line":1,"column":1359}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":113,"column":4},"generated":{"line":1,"column":1361}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":113,"column":13},"generated":{"line":1,"column":1369}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":113,"column":23},"generated":{"line":1,"column":1371}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callbackWithRetry","original":{"line":116,"column":11},"generated":{"line":1,"column":1380}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callbackWithRetry","original":{"line":116,"column":11},"generated":{"line":1,"column":1389}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":116,"column":29},"generated":{"line":1,"column":1391}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":116,"column":34},"generated":{"line":1,"column":1393}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":117,"column":8},"generated":{"line":1,"column":1396}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":117,"column":15},"generated":{"line":1,"column":1403}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":117,"column":8},"generated":{"line":1,"column":1409}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":118,"column":13},"generated":{"line":1,"column":1411}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":118,"column":22},"generated":{"line":1,"column":1413}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":118,"column":28},"generated":{"line":1,"column":1418}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"isRetryableError","original":{"line":121,"column":9},"generated":{"line":1,"column":1421}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":121,"column":26},"generated":{"line":1,"column":1423}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":126,"column":4},"generated":{"line":1,"column":1431}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"selectServer","original":{"line":126,"column":13},"generated":{"line":1,"column":1433}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"serverSelectionOptions","original":{"line":126,"column":26},"generated":{"line":1,"column":1446}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":126,"column":50},"generated":{"line":1,"column":1448}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":126,"column":51},"generated":{"line":1,"column":1449}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"server","original":{"line":126,"column":56},"generated":{"line":1,"column":1451}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":127,"column":10},"generated":{"line":1,"column":1457}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"supportsRetryableReads","original":{"line":127,"column":18},"generated":{"line":1,"column":1460}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"server","original":{"line":127,"column":41},"generated":{"line":1,"column":1462}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":132,"column":6},"generated":{"line":1,"column":1465}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"execute","original":{"line":132,"column":16},"generated":{"line":1,"column":1467}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"server","original":{"line":132,"column":24},"generated":{"line":1,"column":1475}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":132,"column":32},"generated":{"line":1,"column":1477}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":128,"column":8},"generated":{"line":1,"column":1480}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":128,"column":17},"generated":{"line":1,"column":1482}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":128,"column":22},"generated":{"line":1,"column":1484}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":122,"column":13},"generated":{"line":1,"column":1492}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":122,"column":22},"generated":{"line":1,"column":1494}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":137,"column":2},"generated":{"line":1,"column":1497}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"selectServer","original":{"line":137,"column":11},"generated":{"line":1,"column":1499}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"serverSelectionOptions","original":{"line":137,"column":24},"generated":{"line":1,"column":1512}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":137,"column":48},"generated":{"line":1,"column":1514}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":137,"column":49},"generated":{"line":1,"column":1515}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"server","original":{"line":137,"column":54},"generated":{"line":1,"column":1517}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":138,"column":8},"generated":{"line":1,"column":1522}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":138,"column":8},"generated":{"line":1,"column":1525}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":140,"column":6},"generated":{"line":1,"column":1527}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":139,"column":6},"generated":{"line":1,"column":1539}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":139,"column":15},"generated":{"line":1,"column":1541}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":139,"column":20},"generated":{"line":1,"column":1543}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"shouldRetryReads","original":{"line":143,"column":10},"generated":{"line":1,"column":1549}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"shouldRetryReads","original":{"line":143,"column":10},"generated":{"line":1,"column":1555}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":144,"column":40},"generated":{"line":1,"column":1558}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":144,"column":6},"generated":{"line":1,"column":1562}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"s","original":{"line":144,"column":15},"generated":{"line":1,"column":1564}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"options","original":{"line":144,"column":17},"generated":{"line":1,"column":1566}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"retryReads","original":{"line":144,"column":25},"generated":{"line":1,"column":1574}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":145,"column":6},"generated":{"line":1,"column":1586}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"session","original":{"line":145,"column":16},"generated":{"line":1,"column":1588}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"inTransaction","original":{"line":146,"column":7},"generated":{"line":1,"column":1598}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"supportsRetryableReads","original":{"line":147,"column":6},"generated":{"line":1,"column":1601}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"server","original":{"line":147,"column":29},"generated":{"line":1,"column":1603}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":148,"column":6},"generated":{"line":1,"column":1607}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"canRetryRead","original":{"line":148,"column":16},"generated":{"line":1,"column":1609}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":150,"column":8},"generated":{"line":1,"column":1622}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"hasAspect","original":{"line":150,"column":18},"generated":{"line":1,"column":1624}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Aspect","original":{"line":150,"column":28},"generated":{"line":1,"column":1634}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"RETRYABLE","original":{"line":150,"column":35},"generated":{"line":1,"column":1636}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"shouldRetryReads","original":{"line":150,"column":49},"generated":{"line":1,"column":1648}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":151,"column":6},"generated":{"line":1,"column":1650}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"execute","original":{"line":151,"column":16},"generated":{"line":1,"column":1652}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"server","original":{"line":151,"column":24},"generated":{"line":1,"column":1660}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callbackWithRetry","original":{"line":151,"column":32},"generated":{"line":1,"column":1662}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":155,"column":4},"generated":{"line":1,"column":1665}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"execute","original":{"line":155,"column":14},"generated":{"line":1,"column":1667}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"server","original":{"line":155,"column":22},"generated":{"line":1,"column":1675}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":155,"column":30},"generated":{"line":1,"column":1677}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":161,"column":0},"generated":{"line":1,"column":1682}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"selectServerForSessionSupport","original":{"line":161,"column":9},"generated":{"line":1,"column":1691}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":161,"column":39},"generated":{"line":1,"column":1693}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":161,"column":49},"generated":{"line":1,"column":1695}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":161,"column":60},"generated":{"line":1,"column":1697}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Promise","original":{"line":162,"column":8},"generated":{"line":1,"column":1700}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Promise","original":{"line":162,"column":8},"generated":{"line":1,"column":1706}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":162,"column":18},"generated":{"line":1,"column":1708}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"s","original":{"line":162,"column":27},"generated":{"line":1,"column":1710}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"promiseLibrary","original":{"line":162,"column":29},"generated":{"line":1,"column":1712}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":164,"column":6},"generated":{"line":1,"column":1727}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":164,"column":6},"generated":{"line":1,"column":1731}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":183,"column":9},"generated":{"line":1,"column":1733}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":165,"column":26},"generated":{"line":1,"column":1739}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":165,"column":13},"generated":{"line":1,"column":1758}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":166,"column":4},"generated":{"line":1,"column":1762}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":166,"column":13},"generated":{"line":1,"column":1764}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"Promise","original":{"line":166,"column":17},"generated":{"line":1,"column":1768}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":166,"column":25},"generated":{"line":1,"column":1770}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"resolve","original":{"line":166,"column":26},"generated":{"line":1,"column":1771}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"reject","original":{"line":166,"column":35},"generated":{"line":1,"column":1773}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":167,"column":6},"generated":{"line":1,"column":1778}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":167,"column":17},"generated":{"line":1,"column":1780}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":167,"column":18},"generated":{"line":1,"column":1782}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":167,"column":23},"generated":{"line":1,"column":1784}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":168,"column":12},"generated":{"line":1,"column":1789}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":168,"column":12},"generated":{"line":1,"column":1792}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","original":{"line":168,"column":17},"generated":{"line":1,"column":1794}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"reject","original":{"line":168,"column":24},"generated":{"line":1,"column":1801}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":168,"column":31},"generated":{"line":1,"column":1803}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"resolve","original":{"line":169,"column":8},"generated":{"line":1,"column":1806}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":169,"column":16},"generated":{"line":1,"column":1808}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":174,"column":2},"generated":{"line":1,"column":1816}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"selectServer","original":{"line":174,"column":11},"generated":{"line":1,"column":1818}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"ReadPreference","original":{"line":174,"column":24},"generated":{"line":1,"column":1831}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"primaryPreferred","original":{"line":174,"column":39},"generated":{"line":1,"column":1833}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":174,"column":57},"generated":{"line":1,"column":1850}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":175,"column":8},"generated":{"line":1,"column":1854}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":176,"column":6},"generated":{"line":1,"column":1856}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"err","original":{"line":176,"column":15},"generated":{"line":1,"column":1858}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"executeOperation","original":{"line":180,"column":4},"generated":{"line":1,"column":1861}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"topology","original":{"line":180,"column":21},"generated":{"line":1,"column":1863}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"operation","original":{"line":180,"column":31},"generated":{"line":1,"column":1865}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"callback","original":{"line":180,"column":42},"generated":{"line":1,"column":1867}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"result","original":{"line":183,"column":9},"generated":{"line":1,"column":1872}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"module","original":{"line":186,"column":0},"generated":{"line":1,"column":1874}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"exports","original":{"line":186,"column":7},"generated":{"line":1,"column":1881}},{"source":"../node_modules/mongodb/lib/operations/execute_operation.js","name":"executeOperation","original":{"line":186,"column":17},"generated":{"line":1,"column":1889}}],"sources":{"../node_modules/mongodb/lib/operations/execute_operation.js":"'use strict';\n\nconst MongoError = require('../core/error').MongoError;\nconst Aspect = require('./operation').Aspect;\nconst OperationBase = require('./operation').OperationBase;\nconst ReadPreference = require('../core/topologies/read_preference');\nconst isRetryableError = require('../core/error').isRetryableError;\nconst maxWireVersion = require('../core/utils').maxWireVersion;\nconst isUnifiedTopology = require('../core/utils').isUnifiedTopology;\n\n/**\n * Executes the given operation with provided arguments.\n *\n * This method reduces large amounts of duplication in the entire codebase by providing\n * a single point for determining whether callbacks or promises should be used. Additionally\n * it allows for a single point of entry to provide features such as implicit sessions, which\n * are required by the Driver Sessions specification in the event that a ClientSession is\n * not provided\n *\n * @param {object} topology The topology to execute this operation on\n * @param {Operation} operation The operation to execute\n * @param {function} callback The command result callback\n */\nfunction executeOperation(topology, operation, callback) {\n  if (topology == null) {\n    throw new TypeError('This method requires a valid topology instance');\n  }\n\n  if (!(operation instanceof OperationBase)) {\n    throw new TypeError('This method requires a valid operation instance');\n  }\n\n  if (isUnifiedTopology(topology) && topology.shouldCheckForSessionSupport()) {\n    return selectServerForSessionSupport(topology, operation, callback);\n  }\n\n  const Promise = topology.s.promiseLibrary;\n\n  // The driver sessions spec mandates that we implicitly create sessions for operations\n  // that are not explicitly provided with a session.\n  let session, owner;\n  if (topology.hasSessionSupport()) {\n    if (operation.session == null) {\n      owner = Symbol();\n      session = topology.startSession({ owner });\n      operation.session = session;\n    } else if (operation.session.hasEnded) {\n      throw new MongoError('Use of expired sessions is not permitted');\n    }\n  }\n\n  let result;\n  if (typeof callback !== 'function') {\n    result = new Promise((resolve, reject) => {\n      callback = (err, res) => {\n        if (err) return reject(err);\n        resolve(res);\n      };\n    });\n  }\n\n  function executeCallback(err, result) {\n    if (session && session.owner === owner) {\n      session.endSession();\n      if (operation.session === session) {\n        operation.clearSession();\n      }\n    }\n\n    callback(err, result);\n  }\n\n  try {\n    if (operation.hasAspect(Aspect.EXECUTE_WITH_SELECTION)) {\n      executeWithServerSelection(topology, operation, executeCallback);\n    } else {\n      operation.execute(executeCallback);\n    }\n  } catch (e) {\n    if (session && session.owner === owner) {\n      session.endSession();\n      if (operation.session === session) {\n        operation.clearSession();\n      }\n    }\n\n    throw e;\n  }\n\n  return result;\n}\n\nfunction supportsRetryableReads(server) {\n  return maxWireVersion(server) >= 6;\n}\n\nfunction executeWithServerSelection(topology, operation, callback) {\n  const readPreference = operation.readPreference || ReadPreference.primary;\n  const inTransaction = operation.session && operation.session.inTransaction();\n\n  if (inTransaction && !readPreference.equals(ReadPreference.primary)) {\n    callback(\n      new MongoError(\n        `Read preference in a transaction must be primary, not: ${readPreference.mode}`\n      )\n    );\n\n    return;\n  }\n\n  const serverSelectionOptions = {\n    readPreference,\n    session: operation.session\n  };\n\n  function callbackWithRetry(err, result) {\n    if (err == null) {\n      return callback(null, result);\n    }\n\n    if (!isRetryableError(err)) {\n      return callback(err);\n    }\n\n    // select a new server, and attempt to retry the operation\n    topology.selectServer(serverSelectionOptions, (err, server) => {\n      if (err || !supportsRetryableReads(server)) {\n        callback(err, null);\n        return;\n      }\n\n      operation.execute(server, callback);\n    });\n  }\n\n  // select a server, and execute the operation against it\n  topology.selectServer(serverSelectionOptions, (err, server) => {\n    if (err) {\n      callback(err, null);\n      return;\n    }\n\n    const shouldRetryReads =\n      topology.s.options.retryReads !== false &&\n      operation.session &&\n      !inTransaction &&\n      supportsRetryableReads(server) &&\n      operation.canRetryRead;\n\n    if (operation.hasAspect(Aspect.RETRYABLE) && shouldRetryReads) {\n      operation.execute(server, callbackWithRetry);\n      return;\n    }\n\n    operation.execute(server, callback);\n  });\n}\n\n// TODO: This is only supported for unified topology, it should go away once\n//       we remove support for legacy topology types.\nfunction selectServerForSessionSupport(topology, operation, callback) {\n  const Promise = topology.s.promiseLibrary;\n\n  let result;\n  if (typeof callback !== 'function') {\n    result = new Promise((resolve, reject) => {\n      callback = (err, result) => {\n        if (err) return reject(err);\n        resolve(result);\n      };\n    });\n  }\n\n  topology.selectServer(ReadPreference.primaryPreferred, err => {\n    if (err) {\n      callback(err);\n      return;\n    }\n\n    executeOperation(topology, operation, callback);\n  });\n\n  return result;\n}\n\nmodule.exports = executeOperation;\n"},"lineCount":null}},"error":null,"hash":"0f809913f88610ec667c21bb6ae4fd60","cacheData":{"env":{}}}