{"id":"VQyw","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"./common","loc":{"line":3,"column":29},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/sdam/server_selection.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/sdam/common.js"},{"name":"../topologies/read_preference","loc":{"line":4,"column":31},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/sdam/server_selection.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/topologies/read_preference.js"},{"name":"../error","loc":{"line":5,"column":27},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/sdam/server_selection.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/error.js"}],"generated":{"js":"\"use strict\";const e=require(\"./common\").ServerType,r=require(\"./common\").TopologyType,t=require(\"../topologies/read_preference\"),n=require(\"../error\").MongoError,i=1e4,o=90;function s(){return function(e,r){return l(e,r.filter(e=>e.isWritable))}}function a(e,t,s){if(null==e.maxStalenessSeconds||e.maxStalenessSeconds<0)return s;const a=e.maxStalenessSeconds,u=(t.heartbeatFrequencyMS+i)/1e3;if(a<u)throw new n(\"maxStalenessSeconds must be at least \".concat(u,\" seconds\"));if(a<o)throw new n(\"maxStalenessSeconds must be at least \".concat(o,\" seconds\"));if(t.type===r.ReplicaSetWithPrimary){const r=Array.from(t.servers.values()).filter(f)[0];return s.reduce((n,i)=>{return(i.lastUpdateTime-i.lastWriteDate-(r.lastUpdateTime-r.lastWriteDate)+t.heartbeatFrequencyMS)/1e3<=e.maxStalenessSeconds&&n.push(i),n},[])}if(t.type===r.ReplicaSetNoPrimary){if(0===s.length)return s;const r=s.reduce((e,r)=>r.lastWriteDate>e.lastWriteDate?r:e);return s.reduce((n,i)=>{return(r.lastWriteDate-i.lastWriteDate+t.heartbeatFrequencyMS)/1e3<=e.maxStalenessSeconds&&n.push(i),n},[])}return s}function u(e,r){const t=Object.keys(e),n=Object.keys(r);for(let i=0;i<t.length;++i){const o=t[i];if(-1===n.indexOf(o)||r[o]!==e[o])return!1}return!0}function c(e,r){if(null==e.tags||Array.isArray(e.tags)&&0===e.tags.length)return r;for(let t=0;t<e.tags.length;++t){const n=e.tags[t],i=r.reduce((e,r)=>(u(n,r.tags)&&e.push(r),e),[]);if(i.length)return i}return[]}function l(e,r){const t=r.reduce((e,r)=>-1===e?r.roundTripTime:Math.min(r.roundTripTime,e),-1),n=t+e.localThresholdMS;return r.reduce((e,r)=>(r.roundTripTime<=n&&r.roundTripTime>=t&&e.push(r),e),[])}function f(r){return r.type===e.RSPrimary}function d(r){return r.type===e.RSSecondary}function S(r){return r.type===e.RSSecondary||r.type===e.RSPrimary}function m(r){return r.type!==e.Unknown}function p(e){if(!e.isValid())throw new TypeError(\"Invalid read preference specified\");return function(i,o){const s=i.commonWireVersion;if(s&&e.minWireVersion&&e.minWireVersion>s)throw new n(\"Minimum wire version '\".concat(e.minWireVersion,\"' required, but found '\").concat(s,\"'\"));if(i.type===r.Unknown)return[];if(i.type===r.Single||i.type===r.Sharded)return l(i,o.filter(m));const u=e.mode;if(u===t.PRIMARY)return o.filter(f);if(u===t.PRIMARY_PREFERRED){const e=o.filter(f);if(e.length)return e}const p=u===t.NEAREST?S:d,y=l(i,c(e,a(e,i,o.filter(p))));return u===t.SECONDARY_PREFERRED&&0===y.length?o.filter(f):y}}module.exports={writableServerSelector:s,readPreferenceServerSelector:p};"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":2,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ServerType","original":{"line":2,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"require","original":{"line":2,"column":19},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":2,"column":27},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ServerType","original":{"line":2,"column":39},"generated":{"line":1,"column":41}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"TopologyType","original":{"line":3,"column":6},"generated":{"line":1,"column":52}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"require","original":{"line":3,"column":21},"generated":{"line":1,"column":54}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":3,"column":29},"generated":{"line":1,"column":62}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"TopologyType","original":{"line":3,"column":41},"generated":{"line":1,"column":74}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ReadPreference","original":{"line":4,"column":6},"generated":{"line":1,"column":87}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"require","original":{"line":4,"column":23},"generated":{"line":1,"column":89}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":4,"column":31},"generated":{"line":1,"column":97}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"MongoError","original":{"line":5,"column":6},"generated":{"line":1,"column":130}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"require","original":{"line":5,"column":19},"generated":{"line":1,"column":132}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":5,"column":27},"generated":{"line":1,"column":140}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"MongoError","original":{"line":5,"column":39},"generated":{"line":1,"column":152}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"IDLE_WRITE_PERIOD","original":{"line":8,"column":6},"generated":{"line":1,"column":163}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":8,"column":26},"generated":{"line":1,"column":165}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"SMALLEST_MAX_STALENESS_SECONDS","original":{"line":9,"column":6},"generated":{"line":1,"column":169}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":9,"column":39},"generated":{"line":1,"column":171}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":14,"column":0},"generated":{"line":1,"column":174}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"writableServerSelector","original":{"line":14,"column":9},"generated":{"line":1,"column":183}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":15,"column":9},"generated":{"line":1,"column":187}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":15,"column":9},"generated":{"line":1,"column":194}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":15,"column":18},"generated":{"line":1,"column":203}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":15,"column":39},"generated":{"line":1,"column":205}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"latencyWindowReducer","original":{"line":16,"column":11},"generated":{"line":1,"column":208}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"latencyWindowReducer","original":{"line":16,"column":11},"generated":{"line":1,"column":215}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":17,"column":6},"generated":{"line":1,"column":217}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":18,"column":6},"generated":{"line":1,"column":219}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"filter","original":{"line":18,"column":14},"generated":{"line":1,"column":221}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"s","original":{"line":18,"column":21},"generated":{"line":1,"column":228}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"s","original":{"line":18,"column":26},"generated":{"line":1,"column":231}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"isWritable","original":{"line":18,"column":28},"generated":{"line":1,"column":233}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":32,"column":0},"generated":{"line":1,"column":247}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessReducer","original":{"line":32,"column":9},"generated":{"line":1,"column":256}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":32,"column":29},"generated":{"line":1,"column":258}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":32,"column":45},"generated":{"line":1,"column":260}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":32,"column":66},"generated":{"line":1,"column":262}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":33,"column":6},"generated":{"line":1,"column":265}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":33,"column":44},"generated":{"line":1,"column":268}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":33,"column":6},"generated":{"line":1,"column":274}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessSeconds","original":{"line":33,"column":21},"generated":{"line":1,"column":276}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":33,"column":52},"generated":{"line":1,"column":297}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessSeconds","original":{"line":33,"column":67},"generated":{"line":1,"column":299}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":33,"column":89},"generated":{"line":1,"column":319}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":34,"column":11},"generated":{"line":1,"column":321}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":34,"column":11},"generated":{"line":1,"column":328}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStaleness","original":{"line":37,"column":8},"generated":{"line":1,"column":330}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStaleness","original":{"line":37,"column":8},"generated":{"line":1,"column":336}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":37,"column":23},"generated":{"line":1,"column":338}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessSeconds","original":{"line":37,"column":38},"generated":{"line":1,"column":340}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessVariance","original":{"line":38,"column":8},"generated":{"line":1,"column":360}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":39,"column":5},"generated":{"line":1,"column":363}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"heartbeatFrequencyMS","original":{"line":39,"column":25},"generated":{"line":1,"column":365}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"IDLE_WRITE_PERIOD","original":{"line":39,"column":48},"generated":{"line":1,"column":386}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":39,"column":69},"generated":{"line":1,"column":389}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStaleness","original":{"line":40,"column":6},"generated":{"line":1,"column":393}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStaleness","original":{"line":40,"column":6},"generated":{"line":1,"column":396}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessVariance","original":{"line":40,"column":21},"generated":{"line":1,"column":398}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":41,"column":10},"generated":{"line":1,"column":400}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":41,"column":10},"generated":{"line":1,"column":406}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"MongoError","original":{"line":41,"column":14},"generated":{"line":1,"column":410}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessVariance","original":{"line":41,"column":65},"generated":{"line":1,"column":412}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessVariance","original":{"line":41,"column":65},"generated":{"line":1,"column":452}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessVariance","original":{"line":41,"column":65},"generated":{"line":1,"column":459}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":41,"column":4},"generated":{"line":1,"column":461}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStaleness","original":{"line":44,"column":6},"generated":{"line":1,"column":474}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStaleness","original":{"line":44,"column":6},"generated":{"line":1,"column":477}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"SMALLEST_MAX_STALENESS_SECONDS","original":{"line":44,"column":21},"generated":{"line":1,"column":479}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":45,"column":10},"generated":{"line":1,"column":481}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":45,"column":10},"generated":{"line":1,"column":487}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"MongoError","original":{"line":45,"column":14},"generated":{"line":1,"column":491}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"SMALLEST_MAX_STALENESS_SECONDS","original":{"line":46,"column":46},"generated":{"line":1,"column":493}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"SMALLEST_MAX_STALENESS_SECONDS","original":{"line":46,"column":46},"generated":{"line":1,"column":533}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"SMALLEST_MAX_STALENESS_SECONDS","original":{"line":46,"column":46},"generated":{"line":1,"column":540}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":45,"column":4},"generated":{"line":1,"column":542}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":50,"column":6},"generated":{"line":1,"column":555}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":50,"column":6},"generated":{"line":1,"column":558}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"type","original":{"line":50,"column":26},"generated":{"line":1,"column":560}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"TopologyType","original":{"line":50,"column":35},"generated":{"line":1,"column":567}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ReplicaSetWithPrimary","original":{"line":50,"column":48},"generated":{"line":1,"column":569}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":50,"column":71},"generated":{"line":1,"column":591}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"primary","original":{"line":51,"column":10},"generated":{"line":1,"column":592}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"primary","original":{"line":51,"column":10},"generated":{"line":1,"column":598}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"Array","original":{"line":51,"column":20},"generated":{"line":1,"column":600}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"from","original":{"line":51,"column":26},"generated":{"line":1,"column":606}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":51,"column":31},"generated":{"line":1,"column":611}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":51,"column":51},"generated":{"line":1,"column":613}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"values","original":{"line":51,"column":59},"generated":{"line":1,"column":621}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"filter","original":{"line":51,"column":69},"generated":{"line":1,"column":631}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"primaryFilter","original":{"line":51,"column":76},"generated":{"line":1,"column":638}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":51,"column":91},"generated":{"line":1,"column":641}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":52,"column":11},"generated":{"line":1,"column":644}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":52,"column":11},"generated":{"line":1,"column":651}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"reduce","original":{"line":52,"column":19},"generated":{"line":1,"column":653}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":52,"column":26},"generated":{"line":1,"column":660}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":52,"column":27},"generated":{"line":1,"column":661}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":52,"column":35},"generated":{"line":1,"column":663}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":61,"column":13},"generated":{"line":1,"column":668}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":54,"column":8},"generated":{"line":1,"column":675}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"lastUpdateTime","original":{"line":54,"column":15},"generated":{"line":1,"column":677}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":55,"column":8},"generated":{"line":1,"column":692}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"lastWriteDate","original":{"line":55,"column":15},"generated":{"line":1,"column":694}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"primary","original":{"line":56,"column":9},"generated":{"line":1,"column":709}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"lastUpdateTime","original":{"line":56,"column":17},"generated":{"line":1,"column":711}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"primary","original":{"line":56,"column":34},"generated":{"line":1,"column":726}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"lastWriteDate","original":{"line":56,"column":42},"generated":{"line":1,"column":728}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":57,"column":8},"generated":{"line":1,"column":743}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"heartbeatFrequencyMS","original":{"line":57,"column":28},"generated":{"line":1,"column":745}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":59,"column":38},"generated":{"line":1,"column":767}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":60,"column":23},"generated":{"line":1,"column":772}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessSeconds","original":{"line":60,"column":38},"generated":{"line":1,"column":774}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":60,"column":59},"generated":{"line":1,"column":795}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"push","original":{"line":60,"column":66},"generated":{"line":1,"column":797}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":60,"column":71},"generated":{"line":1,"column":802}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":61,"column":13},"generated":{"line":1,"column":805}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":62,"column":7},"generated":{"line":1,"column":808}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":65,"column":6},"generated":{"line":1,"column":812}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":65,"column":6},"generated":{"line":1,"column":815}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"type","original":{"line":65,"column":26},"generated":{"line":1,"column":817}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"TopologyType","original":{"line":65,"column":35},"generated":{"line":1,"column":824}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ReplicaSetNoPrimary","original":{"line":65,"column":48},"generated":{"line":1,"column":826}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":65,"column":69},"generated":{"line":1,"column":846}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":66,"column":8},"generated":{"line":1,"column":847}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":66,"column":27},"generated":{"line":1,"column":850}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":66,"column":8},"generated":{"line":1,"column":854}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"length","original":{"line":66,"column":16},"generated":{"line":1,"column":856}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":67,"column":13},"generated":{"line":1,"column":863}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":67,"column":13},"generated":{"line":1,"column":870}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"sMax","original":{"line":70,"column":10},"generated":{"line":1,"column":872}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"sMax","original":{"line":70,"column":10},"generated":{"line":1,"column":878}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":70,"column":17},"generated":{"line":1,"column":880}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"reduce","original":{"line":70,"column":25},"generated":{"line":1,"column":882}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":70,"column":32},"generated":{"line":1,"column":889}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"max","original":{"line":70,"column":33},"generated":{"line":1,"column":890}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"s","original":{"line":70,"column":38},"generated":{"line":1,"column":892}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"s","original":{"line":70,"column":45},"generated":{"line":1,"column":896}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"lastWriteDate","original":{"line":70,"column":47},"generated":{"line":1,"column":898}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"max","original":{"line":70,"column":63},"generated":{"line":1,"column":912}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"lastWriteDate","original":{"line":70,"column":67},"generated":{"line":1,"column":914}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"s","original":{"line":70,"column":83},"generated":{"line":1,"column":928}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"max","original":{"line":70,"column":87},"generated":{"line":1,"column":930}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":71,"column":11},"generated":{"line":1,"column":933}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":71,"column":11},"generated":{"line":1,"column":940}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"reduce","original":{"line":71,"column":19},"generated":{"line":1,"column":942}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":71,"column":26},"generated":{"line":1,"column":949}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":71,"column":27},"generated":{"line":1,"column":950}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":71,"column":35},"generated":{"line":1,"column":952}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":77,"column":13},"generated":{"line":1,"column":957}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"sMax","original":{"line":73,"column":8},"generated":{"line":1,"column":964}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"lastWriteDate","original":{"line":73,"column":13},"generated":{"line":1,"column":966}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":73,"column":29},"generated":{"line":1,"column":980}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"lastWriteDate","original":{"line":73,"column":36},"generated":{"line":1,"column":982}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":73,"column":52},"generated":{"line":1,"column":996}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"heartbeatFrequencyMS","original":{"line":73,"column":72},"generated":{"line":1,"column":998}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":75,"column":38},"generated":{"line":1,"column":1020}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":76,"column":23},"generated":{"line":1,"column":1025}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessSeconds","original":{"line":76,"column":38},"generated":{"line":1,"column":1027}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":76,"column":59},"generated":{"line":1,"column":1048}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"push","original":{"line":76,"column":66},"generated":{"line":1,"column":1050}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":76,"column":71},"generated":{"line":1,"column":1055}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":77,"column":13},"generated":{"line":1,"column":1058}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":78,"column":7},"generated":{"line":1,"column":1061}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":81,"column":9},"generated":{"line":1,"column":1065}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":81,"column":9},"generated":{"line":1,"column":1072}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":90,"column":0},"generated":{"line":1,"column":1074}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tagSetMatch","original":{"line":90,"column":9},"generated":{"line":1,"column":1083}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tagSet","original":{"line":90,"column":21},"generated":{"line":1,"column":1085}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serverTags","original":{"line":90,"column":29},"generated":{"line":1,"column":1087}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"keys","original":{"line":91,"column":8},"generated":{"line":1,"column":1090}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"keys","original":{"line":91,"column":8},"generated":{"line":1,"column":1096}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"Object","original":{"line":91,"column":15},"generated":{"line":1,"column":1098}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"keys","original":{"line":91,"column":22},"generated":{"line":1,"column":1105}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tagSet","original":{"line":91,"column":27},"generated":{"line":1,"column":1110}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serverTagKeys","original":{"line":92,"column":8},"generated":{"line":1,"column":1113}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"Object","original":{"line":92,"column":24},"generated":{"line":1,"column":1115}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"keys","original":{"line":92,"column":31},"generated":{"line":1,"column":1122}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serverTags","original":{"line":92,"column":36},"generated":{"line":1,"column":1127}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":93,"column":7},"generated":{"line":1,"column":1130}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":93,"column":7},"generated":{"line":1,"column":1134}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"i","original":{"line":93,"column":11},"generated":{"line":1,"column":1138}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":93,"column":15},"generated":{"line":1,"column":1140}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"i","original":{"line":93,"column":18},"generated":{"line":1,"column":1142}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"keys","original":{"line":93,"column":22},"generated":{"line":1,"column":1144}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"length","original":{"line":93,"column":27},"generated":{"line":1,"column":1146}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"i","original":{"line":93,"column":37},"generated":{"line":1,"column":1155}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":93,"column":40},"generated":{"line":1,"column":1157}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"key","original":{"line":94,"column":10},"generated":{"line":1,"column":1158}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"key","original":{"line":94,"column":10},"generated":{"line":1,"column":1164}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"keys","original":{"line":94,"column":16},"generated":{"line":1,"column":1166}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"i","original":{"line":94,"column":21},"generated":{"line":1,"column":1168}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serverTagKeys","original":{"line":95,"column":8},"generated":{"line":1,"column":1171}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":95,"column":40},"generated":{"line":1,"column":1175}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serverTagKeys","original":{"line":95,"column":8},"generated":{"line":1,"column":1179}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"indexOf","original":{"line":95,"column":22},"generated":{"line":1,"column":1181}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"key","original":{"line":95,"column":30},"generated":{"line":1,"column":1189}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serverTags","original":{"line":95,"column":45},"generated":{"line":1,"column":1193}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"key","original":{"line":95,"column":56},"generated":{"line":1,"column":1195}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tagSet","original":{"line":95,"column":65},"generated":{"line":1,"column":1200}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"key","original":{"line":95,"column":72},"generated":{"line":1,"column":1202}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":96,"column":13},"generated":{"line":1,"column":1205}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":96,"column":13},"generated":{"line":1,"column":1212}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":100,"column":9},"generated":{"line":1,"column":1214}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":100,"column":9},"generated":{"line":1,"column":1221}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":110,"column":0},"generated":{"line":1,"column":1223}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tagSetReducer","original":{"line":110,"column":9},"generated":{"line":1,"column":1232}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":110,"column":23},"generated":{"line":1,"column":1234}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":110,"column":39},"generated":{"line":1,"column":1236}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":112,"column":4},"generated":{"line":1,"column":1239}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":112,"column":27},"generated":{"line":1,"column":1242}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":112,"column":4},"generated":{"line":1,"column":1248}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tags","original":{"line":112,"column":19},"generated":{"line":1,"column":1250}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"Array","original":{"line":113,"column":5},"generated":{"line":1,"column":1256}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"isArray","original":{"line":113,"column":11},"generated":{"line":1,"column":1262}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":113,"column":19},"generated":{"line":1,"column":1270}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tags","original":{"line":113,"column":34},"generated":{"line":1,"column":1272}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":113,"column":74},"generated":{"line":1,"column":1279}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":113,"column":43},"generated":{"line":1,"column":1283}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tags","original":{"line":113,"column":58},"generated":{"line":1,"column":1285}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"length","original":{"line":113,"column":63},"generated":{"line":1,"column":1290}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":115,"column":11},"generated":{"line":1,"column":1297}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":115,"column":11},"generated":{"line":1,"column":1304}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":118,"column":7},"generated":{"line":1,"column":1306}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":118,"column":7},"generated":{"line":1,"column":1310}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"i","original":{"line":118,"column":11},"generated":{"line":1,"column":1314}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":118,"column":15},"generated":{"line":1,"column":1316}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"i","original":{"line":118,"column":18},"generated":{"line":1,"column":1318}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":118,"column":22},"generated":{"line":1,"column":1320}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tags","original":{"line":118,"column":37},"generated":{"line":1,"column":1322}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"length","original":{"line":118,"column":42},"generated":{"line":1,"column":1327}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"i","original":{"line":118,"column":52},"generated":{"line":1,"column":1336}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":118,"column":55},"generated":{"line":1,"column":1338}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tagSet","original":{"line":119,"column":10},"generated":{"line":1,"column":1339}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tagSet","original":{"line":119,"column":10},"generated":{"line":1,"column":1345}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":119,"column":19},"generated":{"line":1,"column":1347}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tags","original":{"line":119,"column":34},"generated":{"line":1,"column":1349}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"i","original":{"line":119,"column":39},"generated":{"line":1,"column":1354}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serversMatchingTagset","original":{"line":120,"column":10},"generated":{"line":1,"column":1357}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":120,"column":34},"generated":{"line":1,"column":1359}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"reduce","original":{"line":120,"column":42},"generated":{"line":1,"column":1361}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":120,"column":49},"generated":{"line":1,"column":1368}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"matched","original":{"line":120,"column":50},"generated":{"line":1,"column":1369}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":120,"column":59},"generated":{"line":1,"column":1371}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tagSetMatch","original":{"line":121,"column":10},"generated":{"line":1,"column":1376}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tagSet","original":{"line":121,"column":22},"generated":{"line":1,"column":1378}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":121,"column":30},"generated":{"line":1,"column":1380}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tags","original":{"line":121,"column":37},"generated":{"line":1,"column":1382}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"matched","original":{"line":121,"column":44},"generated":{"line":1,"column":1389}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"push","original":{"line":121,"column":52},"generated":{"line":1,"column":1391}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":121,"column":57},"generated":{"line":1,"column":1396}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"matched","original":{"line":122,"column":13},"generated":{"line":1,"column":1399}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":123,"column":7},"generated":{"line":1,"column":1402}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serversMatchingTagset","original":{"line":125,"column":8},"generated":{"line":1,"column":1406}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serversMatchingTagset","original":{"line":125,"column":8},"generated":{"line":1,"column":1409}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"length","original":{"line":125,"column":30},"generated":{"line":1,"column":1411}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serversMatchingTagset","original":{"line":126,"column":13},"generated":{"line":1,"column":1418}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"serversMatchingTagset","original":{"line":126,"column":13},"generated":{"line":1,"column":1425}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":130,"column":9},"generated":{"line":1,"column":1427}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":130,"column":9},"generated":{"line":1,"column":1433}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":142,"column":0},"generated":{"line":1,"column":1436}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"latencyWindowReducer","original":{"line":142,"column":9},"generated":{"line":1,"column":1445}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":142,"column":30},"generated":{"line":1,"column":1447}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":142,"column":51},"generated":{"line":1,"column":1449}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"low","original":{"line":143,"column":8},"generated":{"line":1,"column":1452}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"low","original":{"line":143,"column":8},"generated":{"line":1,"column":1458}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":143,"column":14},"generated":{"line":1,"column":1460}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"reduce","original":{"line":143,"column":22},"generated":{"line":1,"column":1462}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":144,"column":4},"generated":{"line":1,"column":1469}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"min","original":{"line":144,"column":5},"generated":{"line":1,"column":1470}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":144,"column":10},"generated":{"line":1,"column":1472}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":144,"column":31},"generated":{"line":1,"column":1477}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"min","original":{"line":144,"column":22},"generated":{"line":1,"column":1481}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":144,"column":35},"generated":{"line":1,"column":1483}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"roundTripTime","original":{"line":144,"column":42},"generated":{"line":1,"column":1485}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"Math","original":{"line":144,"column":58},"generated":{"line":1,"column":1499}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"min","original":{"line":144,"column":63},"generated":{"line":1,"column":1504}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":144,"column":67},"generated":{"line":1,"column":1508}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"roundTripTime","original":{"line":144,"column":74},"generated":{"line":1,"column":1510}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"min","original":{"line":144,"column":89},"generated":{"line":1,"column":1524}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":145,"column":5},"generated":{"line":1,"column":1528}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"high","original":{"line":148,"column":8},"generated":{"line":1,"column":1531}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"low","original":{"line":148,"column":15},"generated":{"line":1,"column":1533}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":148,"column":21},"generated":{"line":1,"column":1535}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"localThresholdMS","original":{"line":148,"column":41},"generated":{"line":1,"column":1537}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":150,"column":9},"generated":{"line":1,"column":1554}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":150,"column":9},"generated":{"line":1,"column":1561}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"reduce","original":{"line":150,"column":17},"generated":{"line":1,"column":1563}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":150,"column":24},"generated":{"line":1,"column":1570}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":150,"column":25},"generated":{"line":1,"column":1571}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":150,"column":33},"generated":{"line":1,"column":1573}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":151,"column":8},"generated":{"line":1,"column":1578}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"roundTripTime","original":{"line":151,"column":15},"generated":{"line":1,"column":1580}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"high","original":{"line":151,"column":32},"generated":{"line":1,"column":1595}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":151,"column":40},"generated":{"line":1,"column":1598}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"roundTripTime","original":{"line":151,"column":47},"generated":{"line":1,"column":1600}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"low","original":{"line":151,"column":64},"generated":{"line":1,"column":1615}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":151,"column":69},"generated":{"line":1,"column":1618}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"push","original":{"line":151,"column":76},"generated":{"line":1,"column":1620}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":151,"column":81},"generated":{"line":1,"column":1625}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":152,"column":11},"generated":{"line":1,"column":1628}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":153,"column":5},"generated":{"line":1,"column":1631}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":157,"column":0},"generated":{"line":1,"column":1635}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"primaryFilter","original":{"line":157,"column":9},"generated":{"line":1,"column":1644}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":157,"column":23},"generated":{"line":1,"column":1646}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":158,"column":9},"generated":{"line":1,"column":1649}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":158,"column":9},"generated":{"line":1,"column":1656}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"type","original":{"line":158,"column":16},"generated":{"line":1,"column":1658}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ServerType","original":{"line":158,"column":25},"generated":{"line":1,"column":1665}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"RSPrimary","original":{"line":158,"column":36},"generated":{"line":1,"column":1667}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":161,"column":0},"generated":{"line":1,"column":1677}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"secondaryFilter","original":{"line":161,"column":9},"generated":{"line":1,"column":1686}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":161,"column":25},"generated":{"line":1,"column":1688}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":162,"column":9},"generated":{"line":1,"column":1691}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":162,"column":9},"generated":{"line":1,"column":1698}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"type","original":{"line":162,"column":16},"generated":{"line":1,"column":1700}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ServerType","original":{"line":162,"column":25},"generated":{"line":1,"column":1707}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"RSSecondary","original":{"line":162,"column":36},"generated":{"line":1,"column":1709}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":165,"column":0},"generated":{"line":1,"column":1721}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"nearestFilter","original":{"line":165,"column":9},"generated":{"line":1,"column":1730}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":165,"column":23},"generated":{"line":1,"column":1732}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":166,"column":9},"generated":{"line":1,"column":1735}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":166,"column":9},"generated":{"line":1,"column":1742}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"type","original":{"line":166,"column":16},"generated":{"line":1,"column":1744}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ServerType","original":{"line":166,"column":25},"generated":{"line":1,"column":1751}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"RSSecondary","original":{"line":166,"column":36},"generated":{"line":1,"column":1753}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":166,"column":51},"generated":{"line":1,"column":1766}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"type","original":{"line":166,"column":58},"generated":{"line":1,"column":1768}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ServerType","original":{"line":166,"column":67},"generated":{"line":1,"column":1775}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"RSPrimary","original":{"line":166,"column":78},"generated":{"line":1,"column":1777}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":169,"column":0},"generated":{"line":1,"column":1787}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"knownFilter","original":{"line":169,"column":9},"generated":{"line":1,"column":1796}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":169,"column":21},"generated":{"line":1,"column":1798}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":170,"column":9},"generated":{"line":1,"column":1801}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"server","original":{"line":170,"column":9},"generated":{"line":1,"column":1808}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"type","original":{"line":170,"column":16},"generated":{"line":1,"column":1810}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ServerType","original":{"line":170,"column":25},"generated":{"line":1,"column":1817}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"Unknown","original":{"line":170,"column":36},"generated":{"line":1,"column":1819}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":178,"column":0},"generated":{"line":1,"column":1827}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreferenceServerSelector","original":{"line":178,"column":9},"generated":{"line":1,"column":1836}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":178,"column":38},"generated":{"line":1,"column":1838}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":179,"column":6},"generated":{"line":1,"column":1841}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":179,"column":7},"generated":{"line":1,"column":1845}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"isValid","original":{"line":179,"column":22},"generated":{"line":1,"column":1847}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":180,"column":10},"generated":{"line":1,"column":1857}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":180,"column":10},"generated":{"line":1,"column":1863}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"TypeError","original":{"line":180,"column":14},"generated":{"line":1,"column":1867}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":180,"column":24},"generated":{"line":1,"column":1877}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":183,"column":9},"generated":{"line":1,"column":1914}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":183,"column":9},"generated":{"line":1,"column":1921}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":183,"column":18},"generated":{"line":1,"column":1930}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":183,"column":39},"generated":{"line":1,"column":1932}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"commonWireVersion","original":{"line":184,"column":10},"generated":{"line":1,"column":1935}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"commonWireVersion","original":{"line":184,"column":10},"generated":{"line":1,"column":1941}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":184,"column":30},"generated":{"line":1,"column":1943}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"commonWireVersion","original":{"line":184,"column":50},"generated":{"line":1,"column":1945}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"commonWireVersion","original":{"line":186,"column":6},"generated":{"line":1,"column":1963}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"commonWireVersion","original":{"line":186,"column":6},"generated":{"line":1,"column":1966}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":187,"column":6},"generated":{"line":1,"column":1969}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"minWireVersion","original":{"line":187,"column":21},"generated":{"line":1,"column":1971}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":188,"column":6},"generated":{"line":1,"column":1987}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"minWireVersion","original":{"line":188,"column":21},"generated":{"line":1,"column":1989}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"commonWireVersion","original":{"line":188,"column":38},"generated":{"line":1,"column":2004}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":190,"column":12},"generated":{"line":1,"column":2006}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":190,"column":12},"generated":{"line":1,"column":2012}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"MongoError","original":{"line":190,"column":16},"generated":{"line":1,"column":2016}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":191,"column":33},"generated":{"line":1,"column":2018}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":191,"column":33},"generated":{"line":1,"column":2043}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":191,"column":33},"generated":{"line":1,"column":2050}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"minWireVersion","original":{"line":191,"column":48},"generated":{"line":1,"column":2052}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"commonWireVersion","original":{"line":191,"column":88},"generated":{"line":1,"column":2067}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"commonWireVersion","original":{"line":191,"column":88},"generated":{"line":1,"column":2094}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"commonWireVersion","original":{"line":191,"column":88},"generated":{"line":1,"column":2101}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":190,"column":6},"generated":{"line":1,"column":2103}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":195,"column":8},"generated":{"line":1,"column":2109}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":195,"column":8},"generated":{"line":1,"column":2112}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"type","original":{"line":195,"column":28},"generated":{"line":1,"column":2114}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"TopologyType","original":{"line":195,"column":37},"generated":{"line":1,"column":2121}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"Unknown","original":{"line":195,"column":50},"generated":{"line":1,"column":2123}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":196,"column":13},"generated":{"line":1,"column":2131}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":196,"column":13},"generated":{"line":1,"column":2137}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":200,"column":6},"generated":{"line":1,"column":2140}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":200,"column":6},"generated":{"line":1,"column":2143}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"type","original":{"line":200,"column":26},"generated":{"line":1,"column":2145}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"TopologyType","original":{"line":200,"column":35},"generated":{"line":1,"column":2152}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"Single","original":{"line":200,"column":48},"generated":{"line":1,"column":2154}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":201,"column":6},"generated":{"line":1,"column":2162}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"type","original":{"line":201,"column":26},"generated":{"line":1,"column":2164}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"TopologyType","original":{"line":201,"column":35},"generated":{"line":1,"column":2171}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"Sharded","original":{"line":201,"column":48},"generated":{"line":1,"column":2173}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"latencyWindowReducer","original":{"line":203,"column":13},"generated":{"line":1,"column":2181}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"latencyWindowReducer","original":{"line":203,"column":13},"generated":{"line":1,"column":2188}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":203,"column":34},"generated":{"line":1,"column":2190}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":203,"column":55},"generated":{"line":1,"column":2192}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"filter","original":{"line":203,"column":63},"generated":{"line":1,"column":2194}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"knownFilter","original":{"line":203,"column":70},"generated":{"line":1,"column":2201}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"mode","original":{"line":206,"column":10},"generated":{"line":1,"column":2205}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"mode","original":{"line":206,"column":10},"generated":{"line":1,"column":2211}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":206,"column":17},"generated":{"line":1,"column":2213}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"mode","original":{"line":206,"column":32},"generated":{"line":1,"column":2215}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"mode","original":{"line":207,"column":8},"generated":{"line":1,"column":2220}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"mode","original":{"line":207,"column":8},"generated":{"line":1,"column":2223}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ReadPreference","original":{"line":207,"column":17},"generated":{"line":1,"column":2227}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"PRIMARY","original":{"line":207,"column":32},"generated":{"line":1,"column":2229}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":208,"column":13},"generated":{"line":1,"column":2237}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":208,"column":13},"generated":{"line":1,"column":2244}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"filter","original":{"line":208,"column":21},"generated":{"line":1,"column":2246}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"primaryFilter","original":{"line":208,"column":28},"generated":{"line":1,"column":2253}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"mode","original":{"line":211,"column":8},"generated":{"line":1,"column":2256}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"mode","original":{"line":211,"column":8},"generated":{"line":1,"column":2259}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ReadPreference","original":{"line":211,"column":17},"generated":{"line":1,"column":2263}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"PRIMARY_PREFERRED","original":{"line":211,"column":32},"generated":{"line":1,"column":2265}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":211,"column":51},"generated":{"line":1,"column":2283}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":212,"column":12},"generated":{"line":1,"column":2284}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":212,"column":12},"generated":{"line":1,"column":2290}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":212,"column":21},"generated":{"line":1,"column":2292}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"filter","original":{"line":212,"column":29},"generated":{"line":1,"column":2294}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"primaryFilter","original":{"line":212,"column":36},"generated":{"line":1,"column":2301}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":213,"column":10},"generated":{"line":1,"column":2304}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":213,"column":10},"generated":{"line":1,"column":2307}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"length","original":{"line":213,"column":17},"generated":{"line":1,"column":2309}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":214,"column":15},"generated":{"line":1,"column":2316}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"result","original":{"line":214,"column":15},"generated":{"line":1,"column":2323}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"filter","original":{"line":218,"column":10},"generated":{"line":1,"column":2325}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"filter","original":{"line":218,"column":10},"generated":{"line":1,"column":2331}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"mode","original":{"line":218,"column":19},"generated":{"line":1,"column":2333}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ReadPreference","original":{"line":218,"column":28},"generated":{"line":1,"column":2337}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"NEAREST","original":{"line":218,"column":43},"generated":{"line":1,"column":2339}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"nearestFilter","original":{"line":218,"column":53},"generated":{"line":1,"column":2347}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"secondaryFilter","original":{"line":218,"column":69},"generated":{"line":1,"column":2349}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"selectedServers","original":{"line":219,"column":10},"generated":{"line":1,"column":2351}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"latencyWindowReducer","original":{"line":219,"column":28},"generated":{"line":1,"column":2353}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":220,"column":6},"generated":{"line":1,"column":2355}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"tagSetReducer","original":{"line":221,"column":6},"generated":{"line":1,"column":2357}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":222,"column":8},"generated":{"line":1,"column":2359}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"maxStalenessReducer","original":{"line":223,"column":8},"generated":{"line":1,"column":2361}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreference","original":{"line":223,"column":28},"generated":{"line":1,"column":2363}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"topologyDescription","original":{"line":223,"column":44},"generated":{"line":1,"column":2365}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":223,"column":65},"generated":{"line":1,"column":2367}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"filter","original":{"line":223,"column":73},"generated":{"line":1,"column":2369}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"filter","original":{"line":223,"column":80},"generated":{"line":1,"column":2376}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"mode","original":{"line":227,"column":8},"generated":{"line":1,"column":2382}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"mode","original":{"line":227,"column":8},"generated":{"line":1,"column":2389}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"ReadPreference","original":{"line":227,"column":17},"generated":{"line":1,"column":2393}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"SECONDARY_PREFERRED","original":{"line":227,"column":32},"generated":{"line":1,"column":2395}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":227,"column":82},"generated":{"line":1,"column":2416}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"selectedServers","original":{"line":227,"column":55},"generated":{"line":1,"column":2420}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"length","original":{"line":227,"column":71},"generated":{"line":1,"column":2422}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"servers","original":{"line":228,"column":13},"generated":{"line":1,"column":2429}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"filter","original":{"line":228,"column":21},"generated":{"line":1,"column":2431}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"primaryFilter","original":{"line":228,"column":28},"generated":{"line":1,"column":2438}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"selectedServers","original":{"line":231,"column":11},"generated":{"line":1,"column":2441}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"module","original":{"line":235,"column":0},"generated":{"line":1,"column":2444}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"exports","original":{"line":235,"column":7},"generated":{"line":1,"column":2451}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","original":{"line":235,"column":17},"generated":{"line":1,"column":2459}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"writableServerSelector","original":{"line":236,"column":2},"generated":{"line":1,"column":2460}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"writableServerSelector","original":{"line":236,"column":2},"generated":{"line":1,"column":2483}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreferenceServerSelector","original":{"line":237,"column":2},"generated":{"line":1,"column":2485}},{"source":"../node_modules/mongodb/lib/core/sdam/server_selection.js","name":"readPreferenceServerSelector","original":{"line":237,"column":2},"generated":{"line":1,"column":2514}}],"sources":{"../node_modules/mongodb/lib/core/sdam/server_selection.js":"'use strict';\nconst ServerType = require('./common').ServerType;\nconst TopologyType = require('./common').TopologyType;\nconst ReadPreference = require('../topologies/read_preference');\nconst MongoError = require('../error').MongoError;\n\n// max staleness constants\nconst IDLE_WRITE_PERIOD = 10000;\nconst SMALLEST_MAX_STALENESS_SECONDS = 90;\n\n/**\n * Returns a server selector that selects for writable servers\n */\nfunction writableServerSelector() {\n  return function(topologyDescription, servers) {\n    return latencyWindowReducer(\n      topologyDescription,\n      servers.filter(s => s.isWritable)\n    );\n  };\n}\n\n/**\n * Reduces the passed in array of servers by the rules of the \"Max Staleness\" specification\n * found here: https://github.com/mongodb/specifications/blob/master/source/max-staleness/max-staleness.rst\n *\n * @param {ReadPreference} readPreference The read preference providing max staleness guidance\n * @param {topologyDescription} topologyDescription The topology description\n * @param {ServerDescription[]} servers The list of server descriptions to be reduced\n * @return {ServerDescription[]} The list of servers that satisfy the requirements of max staleness\n */\nfunction maxStalenessReducer(readPreference, topologyDescription, servers) {\n  if (readPreference.maxStalenessSeconds == null || readPreference.maxStalenessSeconds < 0) {\n    return servers;\n  }\n\n  const maxStaleness = readPreference.maxStalenessSeconds;\n  const maxStalenessVariance =\n    (topologyDescription.heartbeatFrequencyMS + IDLE_WRITE_PERIOD) / 1000;\n  if (maxStaleness < maxStalenessVariance) {\n    throw new MongoError(`maxStalenessSeconds must be at least ${maxStalenessVariance} seconds`);\n  }\n\n  if (maxStaleness < SMALLEST_MAX_STALENESS_SECONDS) {\n    throw new MongoError(\n      `maxStalenessSeconds must be at least ${SMALLEST_MAX_STALENESS_SECONDS} seconds`\n    );\n  }\n\n  if (topologyDescription.type === TopologyType.ReplicaSetWithPrimary) {\n    const primary = Array.from(topologyDescription.servers.values()).filter(primaryFilter)[0];\n    return servers.reduce((result, server) => {\n      const stalenessMS =\n        server.lastUpdateTime -\n        server.lastWriteDate -\n        (primary.lastUpdateTime - primary.lastWriteDate) +\n        topologyDescription.heartbeatFrequencyMS;\n\n      const staleness = stalenessMS / 1000;\n      if (staleness <= readPreference.maxStalenessSeconds) result.push(server);\n      return result;\n    }, []);\n  }\n\n  if (topologyDescription.type === TopologyType.ReplicaSetNoPrimary) {\n    if (servers.length === 0) {\n      return servers;\n    }\n\n    const sMax = servers.reduce((max, s) => (s.lastWriteDate > max.lastWriteDate ? s : max));\n    return servers.reduce((result, server) => {\n      const stalenessMS =\n        sMax.lastWriteDate - server.lastWriteDate + topologyDescription.heartbeatFrequencyMS;\n\n      const staleness = stalenessMS / 1000;\n      if (staleness <= readPreference.maxStalenessSeconds) result.push(server);\n      return result;\n    }, []);\n  }\n\n  return servers;\n}\n\n/**\n * Determines whether a server's tags match a given set of tags\n *\n * @param {String[]} tagSet The requested tag set to match\n * @param {String[]} serverTags The server's tags\n */\nfunction tagSetMatch(tagSet, serverTags) {\n  const keys = Object.keys(tagSet);\n  const serverTagKeys = Object.keys(serverTags);\n  for (let i = 0; i < keys.length; ++i) {\n    const key = keys[i];\n    if (serverTagKeys.indexOf(key) === -1 || serverTags[key] !== tagSet[key]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Reduces a set of server descriptions based on tags requested by the read preference\n *\n * @param {ReadPreference} readPreference The read preference providing the requested tags\n * @param {ServerDescription[]} servers The list of server descriptions to reduce\n * @return {ServerDescription[]} The list of servers matching the requested tags\n */\nfunction tagSetReducer(readPreference, servers) {\n  if (\n    readPreference.tags == null ||\n    (Array.isArray(readPreference.tags) && readPreference.tags.length === 0)\n  ) {\n    return servers;\n  }\n\n  for (let i = 0; i < readPreference.tags.length; ++i) {\n    const tagSet = readPreference.tags[i];\n    const serversMatchingTagset = servers.reduce((matched, server) => {\n      if (tagSetMatch(tagSet, server.tags)) matched.push(server);\n      return matched;\n    }, []);\n\n    if (serversMatchingTagset.length) {\n      return serversMatchingTagset;\n    }\n  }\n\n  return [];\n}\n\n/**\n * Reduces a list of servers to ensure they fall within an acceptable latency window. This is\n * further specified in the \"Server Selection\" specification, found here:\n * https://github.com/mongodb/specifications/blob/master/source/server-selection/server-selection.rst\n *\n * @param {topologyDescription} topologyDescription The topology description\n * @param {ServerDescription[]} servers The list of servers to reduce\n * @returns {ServerDescription[]} The servers which fall within an acceptable latency window\n */\nfunction latencyWindowReducer(topologyDescription, servers) {\n  const low = servers.reduce(\n    (min, server) => (min === -1 ? server.roundTripTime : Math.min(server.roundTripTime, min)),\n    -1\n  );\n\n  const high = low + topologyDescription.localThresholdMS;\n\n  return servers.reduce((result, server) => {\n    if (server.roundTripTime <= high && server.roundTripTime >= low) result.push(server);\n    return result;\n  }, []);\n}\n\n// filters\nfunction primaryFilter(server) {\n  return server.type === ServerType.RSPrimary;\n}\n\nfunction secondaryFilter(server) {\n  return server.type === ServerType.RSSecondary;\n}\n\nfunction nearestFilter(server) {\n  return server.type === ServerType.RSSecondary || server.type === ServerType.RSPrimary;\n}\n\nfunction knownFilter(server) {\n  return server.type !== ServerType.Unknown;\n}\n\n/**\n * Returns a function which selects servers based on a provided read preference\n *\n * @param {ReadPreference} readPreference The read preference to select with\n */\nfunction readPreferenceServerSelector(readPreference) {\n  if (!readPreference.isValid()) {\n    throw new TypeError('Invalid read preference specified');\n  }\n\n  return function(topologyDescription, servers) {\n    const commonWireVersion = topologyDescription.commonWireVersion;\n    if (\n      commonWireVersion &&\n      readPreference.minWireVersion &&\n      readPreference.minWireVersion > commonWireVersion\n    ) {\n      throw new MongoError(\n        `Minimum wire version '${readPreference.minWireVersion}' required, but found '${commonWireVersion}'`\n      );\n    }\n\n    if (topologyDescription.type === TopologyType.Unknown) {\n      return [];\n    }\n\n    if (\n      topologyDescription.type === TopologyType.Single ||\n      topologyDescription.type === TopologyType.Sharded\n    ) {\n      return latencyWindowReducer(topologyDescription, servers.filter(knownFilter));\n    }\n\n    const mode = readPreference.mode;\n    if (mode === ReadPreference.PRIMARY) {\n      return servers.filter(primaryFilter);\n    }\n\n    if (mode === ReadPreference.PRIMARY_PREFERRED) {\n      const result = servers.filter(primaryFilter);\n      if (result.length) {\n        return result;\n      }\n    }\n\n    const filter = mode === ReadPreference.NEAREST ? nearestFilter : secondaryFilter;\n    const selectedServers = latencyWindowReducer(\n      topologyDescription,\n      tagSetReducer(\n        readPreference,\n        maxStalenessReducer(readPreference, topologyDescription, servers.filter(filter))\n      )\n    );\n\n    if (mode === ReadPreference.SECONDARY_PREFERRED && selectedServers.length === 0) {\n      return servers.filter(primaryFilter);\n    }\n\n    return selectedServers;\n  };\n}\n\nmodule.exports = {\n  writableServerSelector,\n  readPreferenceServerSelector\n};\n"},"lineCount":null}},"error":null,"hash":"33552d713dfc7640c40e3d2ec69b6669","cacheData":{"env":{}}}