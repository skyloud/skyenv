{"id":"HhF2","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"./operation","loc":{"line":4,"column":30},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/drop_index.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/operation.js"},{"name":"./command","loc":{"line":5,"column":33},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/drop_index.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/command.js"},{"name":"../utils","loc":{"line":7,"column":31},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/drop_index.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/utils.js"}],"generated":{"js":"\"use strict\";const e=require(\"./operation\").Aspect,t=require(\"./operation\").defineAspects,i=require(\"./command\"),n=require(\"../utils\").applyWriteConcern,o=require(\"../utils\").handleCallback;class r extends i{constructor(e,t,i){super(e.s.db,i,e),this.collection=e,this.indexName=t}_buildCommand(){const e=this.collection,t=this.indexName,i=this.options;let o={dropIndexes:e.collectionName,index:t};return o=n(o,{db:e.s.db,collection:e},i)}execute(e){super.execute((t,i)=>{if(\"function\"==typeof e)return t?o(e,t,null):void o(e,null,i)})}}t(r,e.WRITE_OPERATION),module.exports=r;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"Aspect","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"require","original":{"line":3,"column":15},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":3,"column":23},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"Aspect","original":{"line":3,"column":38},"generated":{"line":1,"column":44}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"defineAspects","original":{"line":4,"column":6},"generated":{"line":1,"column":51}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"require","original":{"line":4,"column":22},"generated":{"line":1,"column":53}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":4,"column":30},"generated":{"line":1,"column":61}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"defineAspects","original":{"line":4,"column":45},"generated":{"line":1,"column":76}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"CommandOperation","original":{"line":5,"column":6},"generated":{"line":1,"column":90}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"require","original":{"line":5,"column":25},"generated":{"line":1,"column":92}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":5,"column":33},"generated":{"line":1,"column":100}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"applyWriteConcern","original":{"line":6,"column":6},"generated":{"line":1,"column":113}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"require","original":{"line":6,"column":26},"generated":{"line":1,"column":115}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":6,"column":34},"generated":{"line":1,"column":123}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"applyWriteConcern","original":{"line":6,"column":46},"generated":{"line":1,"column":135}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"handleCallback","original":{"line":7,"column":6},"generated":{"line":1,"column":153}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"require","original":{"line":7,"column":23},"generated":{"line":1,"column":155}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":7,"column":31},"generated":{"line":1,"column":163}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"handleCallback","original":{"line":7,"column":43},"generated":{"line":1,"column":175}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":9,"column":0},"generated":{"line":1,"column":190}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"DropIndexOperation","original":{"line":9,"column":6},"generated":{"line":1,"column":196}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"CommandOperation","original":{"line":9,"column":33},"generated":{"line":1,"column":206}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"constructor","original":{"line":10,"column":2},"generated":{"line":1,"column":208}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":10,"column":14},"generated":{"line":1,"column":220}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"indexName","original":{"line":10,"column":26},"generated":{"line":1,"column":222}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"options","original":{"line":10,"column":37},"generated":{"line":1,"column":224}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":11,"column":10},"generated":{"line":1,"column":227}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":11,"column":10},"generated":{"line":1,"column":233}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"s","original":{"line":11,"column":21},"generated":{"line":1,"column":235}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"db","original":{"line":11,"column":23},"generated":{"line":1,"column":237}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"options","original":{"line":11,"column":27},"generated":{"line":1,"column":240}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":11,"column":36},"generated":{"line":1,"column":242}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":13,"column":9},"generated":{"line":1,"column":245}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":13,"column":9},"generated":{"line":1,"column":250}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":13,"column":22},"generated":{"line":1,"column":261}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"indexName","original":{"line":14,"column":9},"generated":{"line":1,"column":263}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"indexName","original":{"line":14,"column":9},"generated":{"line":1,"column":268}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"indexName","original":{"line":14,"column":21},"generated":{"line":1,"column":278}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"_buildCommand","original":{"line":17,"column":2},"generated":{"line":1,"column":280}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":18,"column":10},"generated":{"line":1,"column":296}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":18,"column":10},"generated":{"line":1,"column":302}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":18,"column":23},"generated":{"line":1,"column":304}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":18,"column":28},"generated":{"line":1,"column":309}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"indexName","original":{"line":19,"column":10},"generated":{"line":1,"column":320}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":19,"column":22},"generated":{"line":1,"column":322}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"indexName","original":{"line":19,"column":27},"generated":{"line":1,"column":327}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"options","original":{"line":20,"column":10},"generated":{"line":1,"column":337}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":20,"column":20},"generated":{"line":1,"column":339}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"options","original":{"line":20,"column":25},"generated":{"line":1,"column":344}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"cmd","original":{"line":22,"column":8},"generated":{"line":1,"column":352}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"cmd","original":{"line":22,"column":8},"generated":{"line":1,"column":356}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":22,"column":14},"generated":{"line":1,"column":358}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"dropIndexes","original":{"line":22,"column":16},"generated":{"line":1,"column":359}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":22,"column":29},"generated":{"line":1,"column":371}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collectionName","original":{"line":22,"column":40},"generated":{"line":1,"column":373}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"index","original":{"line":22,"column":56},"generated":{"line":1,"column":388}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"indexName","original":{"line":22,"column":63},"generated":{"line":1,"column":394}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"cmd","original":{"line":27,"column":11},"generated":{"line":1,"column":397}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"cmd","original":{"line":25,"column":4},"generated":{"line":1,"column":404}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"applyWriteConcern","original":{"line":25,"column":10},"generated":{"line":1,"column":406}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"cmd","original":{"line":25,"column":28},"generated":{"line":1,"column":408}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":25,"column":33},"generated":{"line":1,"column":410}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"db","original":{"line":25,"column":35},"generated":{"line":1,"column":411}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":25,"column":39},"generated":{"line":1,"column":414}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"s","original":{"line":25,"column":50},"generated":{"line":1,"column":416}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"db","original":{"line":25,"column":52},"generated":{"line":1,"column":418}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":25,"column":56},"generated":{"line":1,"column":421}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"collection","original":{"line":25,"column":56},"generated":{"line":1,"column":432}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"options","original":{"line":25,"column":70},"generated":{"line":1,"column":435}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"execute","original":{"line":30,"column":2},"generated":{"line":1,"column":438}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"callback","original":{"line":30,"column":10},"generated":{"line":1,"column":446}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"execute","original":{"line":32,"column":10},"generated":{"line":1,"column":449}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"execute","original":{"line":32,"column":10},"generated":{"line":1,"column":455}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":32,"column":18},"generated":{"line":1,"column":463}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"err","original":{"line":32,"column":19},"generated":{"line":1,"column":464}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"result","original":{"line":32,"column":24},"generated":{"line":1,"column":466}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":33,"column":10},"generated":{"line":1,"column":471}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":33,"column":30},"generated":{"line":1,"column":474}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"callback","original":{"line":33,"column":17},"generated":{"line":1,"column":493}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"err","original":{"line":34,"column":10},"generated":{"line":1,"column":495}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"err","original":{"line":34,"column":10},"generated":{"line":1,"column":502}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"handleCallback","original":{"line":34,"column":22},"generated":{"line":1,"column":504}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"callback","original":{"line":34,"column":37},"generated":{"line":1,"column":506}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"err","original":{"line":34,"column":47},"generated":{"line":1,"column":508}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":34,"column":52},"generated":{"line":1,"column":510}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"handleCallback","original":{"line":35,"column":6},"generated":{"line":1,"column":521}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"callback","original":{"line":35,"column":21},"generated":{"line":1,"column":523}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","original":{"line":35,"column":31},"generated":{"line":1,"column":525}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"result","original":{"line":35,"column":37},"generated":{"line":1,"column":530}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"defineAspects","original":{"line":40,"column":0},"generated":{"line":1,"column":536}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"DropIndexOperation","original":{"line":40,"column":14},"generated":{"line":1,"column":538}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"Aspect","original":{"line":40,"column":34},"generated":{"line":1,"column":540}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"WRITE_OPERATION","original":{"line":40,"column":41},"generated":{"line":1,"column":542}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"module","original":{"line":42,"column":0},"generated":{"line":1,"column":559}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"exports","original":{"line":42,"column":7},"generated":{"line":1,"column":566}},{"source":"../node_modules/mongodb/lib/operations/drop_index.js","name":"DropIndexOperation","original":{"line":42,"column":17},"generated":{"line":1,"column":574}}],"sources":{"../node_modules/mongodb/lib/operations/drop_index.js":"'use strict';\n\nconst Aspect = require('./operation').Aspect;\nconst defineAspects = require('./operation').defineAspects;\nconst CommandOperation = require('./command');\nconst applyWriteConcern = require('../utils').applyWriteConcern;\nconst handleCallback = require('../utils').handleCallback;\n\nclass DropIndexOperation extends CommandOperation {\n  constructor(collection, indexName, options) {\n    super(collection.s.db, options, collection);\n\n    this.collection = collection;\n    this.indexName = indexName;\n  }\n\n  _buildCommand() {\n    const collection = this.collection;\n    const indexName = this.indexName;\n    const options = this.options;\n\n    let cmd = { dropIndexes: collection.collectionName, index: indexName };\n\n    // Decorate command with writeConcern if supported\n    cmd = applyWriteConcern(cmd, { db: collection.s.db, collection }, options);\n\n    return cmd;\n  }\n\n  execute(callback) {\n    // Execute command\n    super.execute((err, result) => {\n      if (typeof callback !== 'function') return;\n      if (err) return handleCallback(callback, err, null);\n      handleCallback(callback, null, result);\n    });\n  }\n}\n\ndefineAspects(DropIndexOperation, Aspect.WRITE_OPERATION);\n\nmodule.exports = DropIndexOperation;\n"},"lineCount":null}},"error":null,"hash":"245dd7f3c780940205610dcf13d88734","cacheData":{"env":{}}}