{"id":"eaH5","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"./find_and_modify","loc":{"line":3,"column":39},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/find_one_and_replace.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/find_and_modify.js"},{"name":"../utils","loc":{"line":4,"column":35},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/operations/find_one_and_replace.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/utils.js"}],"generated":{"js":"\"use strict\";function t(e){return(t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(e)}const e=require(\"./find_and_modify\"),o=require(\"../utils\").hasAtomicOperators;class r extends e{constructor(e,r,n,i){const u=Object.assign({},i);if(u.fields=i.projection,u.update=!0,u.new=void 0!==i.returnOriginal&&!i.returnOriginal,u.upsert=void 0!==i.upsert&&!!i.upsert,null==r||\"object\"!==t(r))throw new TypeError(\"Filter parameter must be an object\");if(null==n||\"object\"!==t(n))throw new TypeError(\"Replacement parameter must be an object\");if(o(n))throw new TypeError(\"Replacement document must not contain atomic operators\");super(e,r,u.sort,n,u)}}module.exports=r;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":22}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":24}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":27}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":34}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":36}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":55}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":63}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":80}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":87}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":96}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":105}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":108}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":122}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":125}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":134}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":137}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":144}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":147}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":166}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":174}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":176}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":190}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":198}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":202}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":209}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":219}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":235}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":31,"column":0},"generated":{"line":1,"column":239}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":3,"column":0},"generated":{"line":1,"column":242}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"FindAndModifyOperation","original":{"line":3,"column":6},"generated":{"line":1,"column":248}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"require","original":{"line":3,"column":31},"generated":{"line":1,"column":250}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":3,"column":39},"generated":{"line":1,"column":258}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"hasAtomicOperators","original":{"line":4,"column":6},"generated":{"line":1,"column":279}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"require","original":{"line":4,"column":27},"generated":{"line":1,"column":281}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":4,"column":35},"generated":{"line":1,"column":289}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"hasAtomicOperators","original":{"line":4,"column":47},"generated":{"line":1,"column":301}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":6,"column":0},"generated":{"line":1,"column":320}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"FindOneAndReplaceOperation","original":{"line":6,"column":6},"generated":{"line":1,"column":326}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"FindAndModifyOperation","original":{"line":6,"column":41},"generated":{"line":1,"column":336}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"constructor","original":{"line":7,"column":2},"generated":{"line":1,"column":338}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"collection","original":{"line":7,"column":14},"generated":{"line":1,"column":350}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"filter","original":{"line":7,"column":26},"generated":{"line":1,"column":352}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"replacement","original":{"line":7,"column":34},"generated":{"line":1,"column":354}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"options","original":{"line":7,"column":47},"generated":{"line":1,"column":356}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"finalOptions","original":{"line":9,"column":10},"generated":{"line":1,"column":359}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"finalOptions","original":{"line":9,"column":10},"generated":{"line":1,"column":365}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"Object","original":{"line":9,"column":25},"generated":{"line":1,"column":367}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"assign","original":{"line":9,"column":32},"generated":{"line":1,"column":374}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":9,"column":39},"generated":{"line":1,"column":381}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"options","original":{"line":9,"column":43},"generated":{"line":1,"column":384}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"filter","original":{"line":15,"column":8},"generated":{"line":1,"column":387}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"finalOptions","original":{"line":10,"column":4},"generated":{"line":1,"column":390}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"fields","original":{"line":10,"column":17},"generated":{"line":1,"column":392}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"options","original":{"line":10,"column":26},"generated":{"line":1,"column":399}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"projection","original":{"line":10,"column":34},"generated":{"line":1,"column":401}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"finalOptions","original":{"line":11,"column":4},"generated":{"line":1,"column":412}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"update","original":{"line":11,"column":17},"generated":{"line":1,"column":414}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":11,"column":26},"generated":{"line":1,"column":422}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"finalOptions","original":{"line":12,"column":4},"generated":{"line":1,"column":424}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"new","original":{"line":12,"column":17},"generated":{"line":1,"column":426}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":12,"column":50},"generated":{"line":1,"column":435}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"options","original":{"line":12,"column":23},"generated":{"line":1,"column":439}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"returnOriginal","original":{"line":12,"column":31},"generated":{"line":1,"column":441}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"options","original":{"line":12,"column":60},"generated":{"line":1,"column":458}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"returnOriginal","original":{"line":12,"column":68},"generated":{"line":1,"column":460}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"finalOptions","original":{"line":13,"column":4},"generated":{"line":1,"column":475}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"upsert","original":{"line":13,"column":17},"generated":{"line":1,"column":477}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":13,"column":45},"generated":{"line":1,"column":489}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"options","original":{"line":13,"column":26},"generated":{"line":1,"column":493}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"upsert","original":{"line":13,"column":34},"generated":{"line":1,"column":495}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"options","original":{"line":13,"column":56},"generated":{"line":1,"column":505}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"upsert","original":{"line":13,"column":64},"generated":{"line":1,"column":507}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":15,"column":18},"generated":{"line":1,"column":514}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"filter","original":{"line":15,"column":8},"generated":{"line":1,"column":520}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":15,"column":44},"generated":{"line":1,"column":523}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":15,"column":26},"generated":{"line":1,"column":534}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"filter","original":{"line":15,"column":33},"generated":{"line":1,"column":536}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":16,"column":12},"generated":{"line":1,"column":539}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":16,"column":12},"generated":{"line":1,"column":545}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"TypeError","original":{"line":16,"column":16},"generated":{"line":1,"column":549}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":16,"column":26},"generated":{"line":1,"column":559}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"replacement","original":{"line":19,"column":8},"generated":{"line":1,"column":597}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":19,"column":23},"generated":{"line":1,"column":600}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"replacement","original":{"line":19,"column":8},"generated":{"line":1,"column":606}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":19,"column":54},"generated":{"line":1,"column":609}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":19,"column":31},"generated":{"line":1,"column":620}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"replacement","original":{"line":19,"column":38},"generated":{"line":1,"column":622}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":20,"column":12},"generated":{"line":1,"column":625}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":20,"column":12},"generated":{"line":1,"column":631}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"TypeError","original":{"line":20,"column":16},"generated":{"line":1,"column":635}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":20,"column":26},"generated":{"line":1,"column":645}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"hasAtomicOperators","original":{"line":23,"column":8},"generated":{"line":1,"column":688}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"hasAtomicOperators","original":{"line":23,"column":8},"generated":{"line":1,"column":691}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"replacement","original":{"line":23,"column":27},"generated":{"line":1,"column":693}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":24,"column":12},"generated":{"line":1,"column":696}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":24,"column":12},"generated":{"line":1,"column":702}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"TypeError","original":{"line":24,"column":16},"generated":{"line":1,"column":706}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","original":{"line":24,"column":26},"generated":{"line":1,"column":716}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"collection","original":{"line":27,"column":10},"generated":{"line":1,"column":774}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"collection","original":{"line":27,"column":10},"generated":{"line":1,"column":780}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"filter","original":{"line":27,"column":22},"generated":{"line":1,"column":782}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"finalOptions","original":{"line":27,"column":30},"generated":{"line":1,"column":784}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"sort","original":{"line":27,"column":43},"generated":{"line":1,"column":786}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"replacement","original":{"line":27,"column":49},"generated":{"line":1,"column":791}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"finalOptions","original":{"line":27,"column":62},"generated":{"line":1,"column":793}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"module","original":{"line":31,"column":0},"generated":{"line":1,"column":797}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"exports","original":{"line":31,"column":7},"generated":{"line":1,"column":804}},{"source":"../node_modules/mongodb/lib/operations/find_one_and_replace.js","name":"FindOneAndReplaceOperation","original":{"line":31,"column":17},"generated":{"line":1,"column":812}}],"sources":{"../node_modules/mongodb/lib/operations/find_one_and_replace.js":"'use strict';\n\nconst FindAndModifyOperation = require('./find_and_modify');\nconst hasAtomicOperators = require('../utils').hasAtomicOperators;\n\nclass FindOneAndReplaceOperation extends FindAndModifyOperation {\n  constructor(collection, filter, replacement, options) {\n    // Final options\n    const finalOptions = Object.assign({}, options);\n    finalOptions.fields = options.projection;\n    finalOptions.update = true;\n    finalOptions.new = options.returnOriginal !== void 0 ? !options.returnOriginal : false;\n    finalOptions.upsert = options.upsert !== void 0 ? !!options.upsert : false;\n\n    if (filter == null || typeof filter !== 'object') {\n      throw new TypeError('Filter parameter must be an object');\n    }\n\n    if (replacement == null || typeof replacement !== 'object') {\n      throw new TypeError('Replacement parameter must be an object');\n    }\n\n    if (hasAtomicOperators(replacement)) {\n      throw new TypeError('Replacement document must not contain atomic operators');\n    }\n\n    super(collection, filter, finalOptions.sort, replacement, finalOptions);\n  }\n}\n\nmodule.exports = FindOneAndReplaceOperation;\n"},"lineCount":null}},"error":null,"hash":"bef2a102b4ef7be58b9cdf29b192fb54","cacheData":{"env":{}}}