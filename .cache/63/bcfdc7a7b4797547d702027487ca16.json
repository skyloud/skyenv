{"id":"OMKE","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"../connection/commands","loc":{"line":3,"column":27},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/connection/commands.js"},{"name":"../error","loc":{"line":5,"column":34},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/error.js"},{"name":"./shared","loc":{"line":6,"column":36},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/shared.js"},{"name":"../utils","loc":{"line":7,"column":31},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/utils.js"},{"name":"./command","loc":{"line":8,"column":24},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/wireprotocol/command.js"}],"generated":{"js":"\"use strict\";function o(r){return(o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&\"function\"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?\"symbol\":typeof o})(r)}const r=require(\"../connection/commands\").KillCursor,e=require(\"../error\").MongoError,n=require(\"../error\").MongoNetworkError,s=require(\"./shared\").collectionNamespace,t=require(\"../utils\").maxWireVersion,i=require(\"./command\");function u(u,c,l,m){m=\"function\"==typeof m?m:()=>{};const f=l.cursorId;if(t(u)<4){const e=u.s.bson,n=u.s.pool,s=new r(e,c,[f]),t={immediateRelease:!0,noResponse:!0};if(\"object\"===o(l.session)&&(t.session=l.session),n&&n.isConnected())try{n.write(s,t,m)}catch(a){\"function\"==typeof m?m(a,null):console.warn(a)}return}const y={killCursors:s(c),cursors:[f]},d={};\"object\"===o(l.session)&&(d.session=l.session),i(u,c,y,d,(o,r)=>{if(o)return m(o);const s=r.message;return s.cursorNotFound?m(new n(\"cursor killed or timed out\"),null):Array.isArray(s.documents)&&0!==s.documents.length?void m(null,s.documents[0]):m(new e(\"invalid killCursors result returned for cursor id \".concat(f)))})}module.exports=u;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":22}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":24}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":27}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":34}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":36}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":55}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":63}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":80}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":87}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":96}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":105}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":108}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":122}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":125}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":134}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":137}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":144}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":147}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":166}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":174}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":176}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":190}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":198}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":202}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":209}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":219}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":235}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":70,"column":0},"generated":{"line":1,"column":239}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":3,"column":0},"generated":{"line":1,"column":242}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"KillCursor","original":{"line":3,"column":6},"generated":{"line":1,"column":248}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"require","original":{"line":3,"column":19},"generated":{"line":1,"column":250}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":3,"column":27},"generated":{"line":1,"column":258}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"KillCursor","original":{"line":3,"column":53},"generated":{"line":1,"column":284}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"MongoError","original":{"line":4,"column":6},"generated":{"line":1,"column":295}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"require","original":{"line":4,"column":19},"generated":{"line":1,"column":297}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":4,"column":27},"generated":{"line":1,"column":305}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"MongoError","original":{"line":4,"column":39},"generated":{"line":1,"column":317}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"MongoNetworkError","original":{"line":5,"column":6},"generated":{"line":1,"column":328}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"require","original":{"line":5,"column":26},"generated":{"line":1,"column":330}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":5,"column":34},"generated":{"line":1,"column":338}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"MongoNetworkError","original":{"line":5,"column":46},"generated":{"line":1,"column":350}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"collectionNamespace","original":{"line":6,"column":6},"generated":{"line":1,"column":368}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"require","original":{"line":6,"column":28},"generated":{"line":1,"column":370}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":6,"column":36},"generated":{"line":1,"column":378}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"collectionNamespace","original":{"line":6,"column":48},"generated":{"line":1,"column":390}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"maxWireVersion","original":{"line":7,"column":6},"generated":{"line":1,"column":410}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"require","original":{"line":7,"column":23},"generated":{"line":1,"column":412}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":7,"column":31},"generated":{"line":1,"column":420}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"maxWireVersion","original":{"line":7,"column":43},"generated":{"line":1,"column":432}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"command","original":{"line":8,"column":6},"generated":{"line":1,"column":447}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"require","original":{"line":8,"column":16},"generated":{"line":1,"column":449}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":8,"column":24},"generated":{"line":1,"column":457}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":10,"column":0},"generated":{"line":1,"column":470}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"killCursors","original":{"line":10,"column":9},"generated":{"line":1,"column":479}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"server","original":{"line":10,"column":21},"generated":{"line":1,"column":481}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"ns","original":{"line":10,"column":29},"generated":{"line":1,"column":483}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorState","original":{"line":10,"column":33},"generated":{"line":1,"column":485}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":10,"column":46},"generated":{"line":1,"column":487}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":11,"column":2},"generated":{"line":1,"column":490}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":11,"column":33},"generated":{"line":1,"column":492}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":11,"column":20},"generated":{"line":1,"column":511}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":11,"column":46},"generated":{"line":1,"column":513}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":11,"column":57},"generated":{"line":1,"column":515}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorId","original":{"line":12,"column":8},"generated":{"line":1,"column":522}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorId","original":{"line":12,"column":8},"generated":{"line":1,"column":528}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorState","original":{"line":12,"column":19},"generated":{"line":1,"column":530}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorId","original":{"line":12,"column":31},"generated":{"line":1,"column":532}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"maxWireVersion","original":{"line":14,"column":6},"generated":{"line":1,"column":541}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"maxWireVersion","original":{"line":14,"column":6},"generated":{"line":1,"column":544}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"server","original":{"line":14,"column":21},"generated":{"line":1,"column":546}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":14,"column":31},"generated":{"line":1,"column":549}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":14,"column":34},"generated":{"line":1,"column":551}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"bson","original":{"line":15,"column":10},"generated":{"line":1,"column":552}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"bson","original":{"line":15,"column":10},"generated":{"line":1,"column":558}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"server","original":{"line":15,"column":17},"generated":{"line":1,"column":560}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"s","original":{"line":15,"column":24},"generated":{"line":1,"column":562}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"bson","original":{"line":15,"column":26},"generated":{"line":1,"column":564}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"pool","original":{"line":16,"column":10},"generated":{"line":1,"column":569}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"server","original":{"line":16,"column":17},"generated":{"line":1,"column":571}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"s","original":{"line":16,"column":24},"generated":{"line":1,"column":573}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"pool","original":{"line":16,"column":26},"generated":{"line":1,"column":575}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"killCursor","original":{"line":17,"column":10},"generated":{"line":1,"column":580}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":17,"column":23},"generated":{"line":1,"column":582}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"KillCursor","original":{"line":17,"column":27},"generated":{"line":1,"column":586}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"bson","original":{"line":17,"column":38},"generated":{"line":1,"column":588}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"ns","original":{"line":17,"column":44},"generated":{"line":1,"column":590}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":17,"column":48},"generated":{"line":1,"column":592}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorId","original":{"line":17,"column":49},"generated":{"line":1,"column":593}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"options","original":{"line":18,"column":10},"generated":{"line":1,"column":597}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":18,"column":20},"generated":{"line":1,"column":599}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"immediateRelease","original":{"line":19,"column":6},"generated":{"line":1,"column":600}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":19,"column":24},"generated":{"line":1,"column":618}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"noResponse","original":{"line":20,"column":6},"generated":{"line":1,"column":620}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":20,"column":18},"generated":{"line":1,"column":632}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"pool","original":{"line":27,"column":8},"generated":{"line":1,"column":635}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":23,"column":39},"generated":{"line":1,"column":638}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":23,"column":8},"generated":{"line":1,"column":649}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorState","original":{"line":23,"column":15},"generated":{"line":1,"column":651}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"session","original":{"line":23,"column":27},"generated":{"line":1,"column":653}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"options","original":{"line":24,"column":6},"generated":{"line":1,"column":664}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"session","original":{"line":24,"column":14},"generated":{"line":1,"column":666}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorState","original":{"line":24,"column":24},"generated":{"line":1,"column":674}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"session","original":{"line":24,"column":36},"generated":{"line":1,"column":676}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"pool","original":{"line":27,"column":8},"generated":{"line":1,"column":685}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"pool","original":{"line":27,"column":16},"generated":{"line":1,"column":688}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"isConnected","original":{"line":27,"column":21},"generated":{"line":1,"column":690}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":28,"column":10},"generated":{"line":1,"column":704}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"pool","original":{"line":29,"column":8},"generated":{"line":1,"column":708}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"write","original":{"line":29,"column":13},"generated":{"line":1,"column":710}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"killCursor","original":{"line":29,"column":19},"generated":{"line":1,"column":716}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"options","original":{"line":29,"column":31},"generated":{"line":1,"column":718}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":29,"column":40},"generated":{"line":1,"column":720}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":30,"column":8},"generated":{"line":1,"column":723}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"err","original":{"line":30,"column":15},"generated":{"line":1,"column":729}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":31,"column":32},"generated":{"line":1,"column":732}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":31,"column":19},"generated":{"line":1,"column":751}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":32,"column":10},"generated":{"line":1,"column":753}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"err","original":{"line":32,"column":19},"generated":{"line":1,"column":755}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":32,"column":24},"generated":{"line":1,"column":757}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"console","original":{"line":34,"column":10},"generated":{"line":1,"column":763}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"warn","original":{"line":34,"column":18},"generated":{"line":1,"column":771}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"err","original":{"line":34,"column":23},"generated":{"line":1,"column":776}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":39,"column":4},"generated":{"line":1,"column":779}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"killCursorCmd","original":{"line":42,"column":8},"generated":{"line":1,"column":786}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"killCursorCmd","original":{"line":42,"column":8},"generated":{"line":1,"column":792}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":42,"column":24},"generated":{"line":1,"column":794}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"killCursors","original":{"line":43,"column":4},"generated":{"line":1,"column":795}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"collectionNamespace","original":{"line":43,"column":17},"generated":{"line":1,"column":807}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"ns","original":{"line":43,"column":37},"generated":{"line":1,"column":809}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursors","original":{"line":44,"column":4},"generated":{"line":1,"column":812}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":44,"column":13},"generated":{"line":1,"column":820}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorId","original":{"line":44,"column":14},"generated":{"line":1,"column":821}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"options","original":{"line":47,"column":8},"generated":{"line":1,"column":825}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":47,"column":18},"generated":{"line":1,"column":827}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":48,"column":37},"generated":{"line":1,"column":830}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":48,"column":6},"generated":{"line":1,"column":841}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorState","original":{"line":48,"column":13},"generated":{"line":1,"column":843}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"session","original":{"line":48,"column":25},"generated":{"line":1,"column":845}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"options","original":{"line":48,"column":47},"generated":{"line":1,"column":856}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"session","original":{"line":48,"column":55},"generated":{"line":1,"column":858}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorState","original":{"line":48,"column":65},"generated":{"line":1,"column":866}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"session","original":{"line":48,"column":77},"generated":{"line":1,"column":868}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"command","original":{"line":50,"column":2},"generated":{"line":1,"column":877}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"server","original":{"line":50,"column":10},"generated":{"line":1,"column":879}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"ns","original":{"line":50,"column":18},"generated":{"line":1,"column":881}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"killCursorCmd","original":{"line":50,"column":22},"generated":{"line":1,"column":883}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"options","original":{"line":50,"column":37},"generated":{"line":1,"column":885}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":50,"column":46},"generated":{"line":1,"column":887}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"err","original":{"line":50,"column":47},"generated":{"line":1,"column":888}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"result","original":{"line":50,"column":52},"generated":{"line":1,"column":890}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"err","original":{"line":51,"column":8},"generated":{"line":1,"column":895}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"err","original":{"line":51,"column":8},"generated":{"line":1,"column":898}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":52,"column":13},"generated":{"line":1,"column":900}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":52,"column":13},"generated":{"line":1,"column":907}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"err","original":{"line":52,"column":22},"generated":{"line":1,"column":909}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"response","original":{"line":55,"column":10},"generated":{"line":1,"column":912}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"response","original":{"line":55,"column":10},"generated":{"line":1,"column":918}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"result","original":{"line":55,"column":21},"generated":{"line":1,"column":920}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"message","original":{"line":55,"column":28},"generated":{"line":1,"column":922}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"response","original":{"line":56,"column":8},"generated":{"line":1,"column":930}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"response","original":{"line":56,"column":8},"generated":{"line":1,"column":937}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorNotFound","original":{"line":56,"column":17},"generated":{"line":1,"column":939}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":57,"column":13},"generated":{"line":1,"column":954}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":57,"column":22},"generated":{"line":1,"column":956}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"MongoNetworkError","original":{"line":57,"column":26},"generated":{"line":1,"column":960}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":57,"column":44},"generated":{"line":1,"column":962}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":57,"column":75},"generated":{"line":1,"column":992}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"Array","original":{"line":60,"column":9},"generated":{"line":1,"column":998}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"isArray","original":{"line":60,"column":15},"generated":{"line":1,"column":1004}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"response","original":{"line":60,"column":23},"generated":{"line":1,"column":1012}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"documents","original":{"line":60,"column":32},"generated":{"line":1,"column":1014}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":60,"column":76},"generated":{"line":1,"column":1026}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"response","original":{"line":60,"column":46},"generated":{"line":1,"column":1030}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"documents","original":{"line":60,"column":55},"generated":{"line":1,"column":1032}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"length","original":{"line":60,"column":65},"generated":{"line":1,"column":1042}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":66,"column":4},"generated":{"line":1,"column":1054}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":66,"column":13},"generated":{"line":1,"column":1056}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"response","original":{"line":66,"column":19},"generated":{"line":1,"column":1061}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"documents","original":{"line":66,"column":28},"generated":{"line":1,"column":1063}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":66,"column":38},"generated":{"line":1,"column":1073}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"callback","original":{"line":61,"column":13},"generated":{"line":1,"column":1077}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","original":{"line":62,"column":8},"generated":{"line":1,"column":1079}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"MongoError","original":{"line":62,"column":12},"generated":{"line":1,"column":1083}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorId","original":{"line":62,"column":76},"generated":{"line":1,"column":1085}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorId","original":{"line":62,"column":76},"generated":{"line":1,"column":1138}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"cursorId","original":{"line":62,"column":76},"generated":{"line":1,"column":1145}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"module","original":{"line":70,"column":0},"generated":{"line":1,"column":1152}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"exports","original":{"line":70,"column":7},"generated":{"line":1,"column":1159}},{"source":"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js","name":"killCursors","original":{"line":70,"column":17},"generated":{"line":1,"column":1167}}],"sources":{"../node_modules/mongodb/lib/core/wireprotocol/kill_cursors.js":"'use strict';\n\nconst KillCursor = require('../connection/commands').KillCursor;\nconst MongoError = require('../error').MongoError;\nconst MongoNetworkError = require('../error').MongoNetworkError;\nconst collectionNamespace = require('./shared').collectionNamespace;\nconst maxWireVersion = require('../utils').maxWireVersion;\nconst command = require('./command');\n\nfunction killCursors(server, ns, cursorState, callback) {\n  callback = typeof callback === 'function' ? callback : () => {};\n  const cursorId = cursorState.cursorId;\n\n  if (maxWireVersion(server) < 4) {\n    const bson = server.s.bson;\n    const pool = server.s.pool;\n    const killCursor = new KillCursor(bson, ns, [cursorId]);\n    const options = {\n      immediateRelease: true,\n      noResponse: true\n    };\n\n    if (typeof cursorState.session === 'object') {\n      options.session = cursorState.session;\n    }\n\n    if (pool && pool.isConnected()) {\n      try {\n        pool.write(killCursor, options, callback);\n      } catch (err) {\n        if (typeof callback === 'function') {\n          callback(err, null);\n        } else {\n          console.warn(err);\n        }\n      }\n    }\n\n    return;\n  }\n\n  const killCursorCmd = {\n    killCursors: collectionNamespace(ns),\n    cursors: [cursorId]\n  };\n\n  const options = {};\n  if (typeof cursorState.session === 'object') options.session = cursorState.session;\n\n  command(server, ns, killCursorCmd, options, (err, result) => {\n    if (err) {\n      return callback(err);\n    }\n\n    const response = result.message;\n    if (response.cursorNotFound) {\n      return callback(new MongoNetworkError('cursor killed or timed out'), null);\n    }\n\n    if (!Array.isArray(response.documents) || response.documents.length === 0) {\n      return callback(\n        new MongoError(`invalid killCursors result returned for cursor id ${cursorId}`)\n      );\n    }\n\n    callback(null, response.documents[0]);\n  });\n}\n\nmodule.exports = killCursors;\n"},"lineCount":null}},"error":null,"hash":"79f45f132e5d1102e207ce54e7d57fa6","cacheData":{"env":{}}}