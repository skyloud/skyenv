{"id":"iY6P","dependencies":[{"name":"/Users/etienne/skyenv/package.json","includedInParent":true,"mtime":1596478551490},{"name":"/Users/etienne/skyenv/node_modules/mongodb/package.json","includedInParent":true,"mtime":1596467161400},{"name":"./core","loc":{"line":3,"column":27},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/aggregation_cursor.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/index.js"},{"name":"./cursor","loc":{"line":4,"column":23},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/aggregation_cursor.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/cursor.js"},{"name":"./core/cursor","loc":{"line":5,"column":28},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/aggregation_cursor.js","resolved":"/Users/etienne/skyenv/node_modules/mongodb/lib/core/cursor.js"},{"name":"util","loc":{"line":6,"column":26},"parent":"/Users/etienne/skyenv/node_modules/mongodb/lib/aggregation_cursor.js","resolved":"/Users/etienne/skyenv/node_modules/util/util.js"}],"generated":{"js":"\"use strict\";const e=require(\"./core\").MongoError,t=require(\"./cursor\"),r=require(\"./core/cursor\").CursorState,i=require(\"util\").deprecate;class o extends t{constructor(e,t,r){super(e,t,r)}batchSize(t){if(this.s.state===r.CLOSED||this.isDead())throw e.create({message:\"Cursor is closed\",driver:!0});if(\"number\"!=typeof t)throw e.create({message:\"batchSize requires an integer\",driver:!0});return this.operation.options.batchSize=t,this.setCursorBatchSize(t),this}geoNear(e){return this.operation.addToPipeline({$geoNear:e}),this}group(e){return this.operation.addToPipeline({$group:e}),this}limit(e){return this.operation.addToPipeline({$limit:e}),this}match(e){return this.operation.addToPipeline({$match:e}),this}maxTimeMS(e){return this.operation.options.maxTimeMS=e,this}out(e){return this.operation.addToPipeline({$out:e}),this}project(e){return this.operation.addToPipeline({$project:e}),this}lookup(e){return this.operation.addToPipeline({$lookup:e}),this}redact(e){return this.operation.addToPipeline({$redact:e}),this}skip(e){return this.operation.addToPipeline({$skip:e}),this}sort(e){return this.operation.addToPipeline({$sort:e}),this}unwind(e){return this.operation.addToPipeline({$unwind:e}),this}getLogger(){return this.logger}}o.prototype.get=o.prototype.toArray,i(o.prototype.geoNear,\"The `$geoNear` stage is deprecated in MongoDB 4.0, and removed in version 4.2.\"),module.exports=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"MongoError","original":{"line":3,"column":6},"generated":{"line":1,"column":19}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"require","original":{"line":3,"column":19},"generated":{"line":1,"column":21}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":3,"column":27},"generated":{"line":1,"column":29}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"MongoError","original":{"line":3,"column":37},"generated":{"line":1,"column":39}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"Cursor","original":{"line":4,"column":6},"generated":{"line":1,"column":50}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"require","original":{"line":4,"column":15},"generated":{"line":1,"column":52}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":4,"column":23},"generated":{"line":1,"column":60}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"CursorState","original":{"line":5,"column":6},"generated":{"line":1,"column":72}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"require","original":{"line":5,"column":20},"generated":{"line":1,"column":74}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":5,"column":28},"generated":{"line":1,"column":82}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"CursorState","original":{"line":5,"column":45},"generated":{"line":1,"column":99}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"deprecate","original":{"line":6,"column":6},"generated":{"line":1,"column":111}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"require","original":{"line":6,"column":18},"generated":{"line":1,"column":113}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":6,"column":26},"generated":{"line":1,"column":121}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"deprecate","original":{"line":6,"column":34},"generated":{"line":1,"column":129}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":56,"column":0},"generated":{"line":1,"column":139}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"AggregationCursor","original":{"line":56,"column":6},"generated":{"line":1,"column":145}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"Cursor","original":{"line":56,"column":32},"generated":{"line":1,"column":155}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"constructor","original":{"line":57,"column":2},"generated":{"line":1,"column":157}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"topology","original":{"line":57,"column":14},"generated":{"line":1,"column":169}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":57,"column":24},"generated":{"line":1,"column":171}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"options","original":{"line":57,"column":35},"generated":{"line":1,"column":173}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"topology","original":{"line":58,"column":10},"generated":{"line":1,"column":176}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"topology","original":{"line":58,"column":10},"generated":{"line":1,"column":182}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":58,"column":20},"generated":{"line":1,"column":184}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"options","original":{"line":58,"column":31},"generated":{"line":1,"column":186}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"batchSize","original":{"line":68,"column":2},"generated":{"line":1,"column":189}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"value","original":{"line":68,"column":12},"generated":{"line":1,"column":199}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":69,"column":8},"generated":{"line":1,"column":202}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":69,"column":8},"generated":{"line":1,"column":205}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"s","original":{"line":69,"column":13},"generated":{"line":1,"column":210}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"state","original":{"line":69,"column":15},"generated":{"line":1,"column":212}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"CursorState","original":{"line":69,"column":25},"generated":{"line":1,"column":220}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"CLOSED","original":{"line":69,"column":37},"generated":{"line":1,"column":222}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":69,"column":47},"generated":{"line":1,"column":230}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"isDead","original":{"line":69,"column":52},"generated":{"line":1,"column":235}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"MongoError","original":{"line":70,"column":12},"generated":{"line":1,"column":244}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"MongoError","original":{"line":70,"column":12},"generated":{"line":1,"column":250}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"create","original":{"line":70,"column":23},"generated":{"line":1,"column":252}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":70,"column":30},"generated":{"line":1,"column":259}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"message","original":{"line":70,"column":32},"generated":{"line":1,"column":260}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":70,"column":41},"generated":{"line":1,"column":268}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"driver","original":{"line":70,"column":61},"generated":{"line":1,"column":287}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":70,"column":69},"generated":{"line":1,"column":295}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":73,"column":8},"generated":{"line":1,"column":299}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":73,"column":25},"generated":{"line":1,"column":302}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"value","original":{"line":73,"column":15},"generated":{"line":1,"column":319}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"MongoError","original":{"line":74,"column":12},"generated":{"line":1,"column":321}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"MongoError","original":{"line":74,"column":12},"generated":{"line":1,"column":327}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"create","original":{"line":74,"column":23},"generated":{"line":1,"column":329}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":74,"column":30},"generated":{"line":1,"column":336}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"message","original":{"line":74,"column":32},"generated":{"line":1,"column":337}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":74,"column":41},"generated":{"line":1,"column":345}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"driver","original":{"line":74,"column":74},"generated":{"line":1,"column":377}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":74,"column":82},"generated":{"line":1,"column":385}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":79,"column":11},"generated":{"line":1,"column":389}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":77,"column":9},"generated":{"line":1,"column":396}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":77,"column":9},"generated":{"line":1,"column":401}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"options","original":{"line":77,"column":19},"generated":{"line":1,"column":411}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"batchSize","original":{"line":77,"column":27},"generated":{"line":1,"column":419}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"value","original":{"line":77,"column":39},"generated":{"line":1,"column":429}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"setCursorBatchSize","original":{"line":78,"column":9},"generated":{"line":1,"column":431}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"setCursorBatchSize","original":{"line":78,"column":9},"generated":{"line":1,"column":436}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"value","original":{"line":78,"column":28},"generated":{"line":1,"column":455}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":79,"column":11},"generated":{"line":1,"column":458}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"geoNear","original":{"line":88,"column":2},"generated":{"line":1,"column":463}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":88,"column":10},"generated":{"line":1,"column":471}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":90,"column":11},"generated":{"line":1,"column":474}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":89,"column":9},"generated":{"line":1,"column":481}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":89,"column":9},"generated":{"line":1,"column":486}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":89,"column":19},"generated":{"line":1,"column":496}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":89,"column":33},"generated":{"line":1,"column":510}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$geoNear","original":{"line":89,"column":35},"generated":{"line":1,"column":511}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":89,"column":45},"generated":{"line":1,"column":520}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":90,"column":11},"generated":{"line":1,"column":524}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"group","original":{"line":99,"column":2},"generated":{"line":1,"column":529}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":99,"column":8},"generated":{"line":1,"column":535}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":101,"column":11},"generated":{"line":1,"column":538}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":100,"column":9},"generated":{"line":1,"column":545}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":100,"column":9},"generated":{"line":1,"column":550}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":100,"column":19},"generated":{"line":1,"column":560}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":100,"column":33},"generated":{"line":1,"column":574}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$group","original":{"line":100,"column":35},"generated":{"line":1,"column":575}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":100,"column":43},"generated":{"line":1,"column":582}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":101,"column":11},"generated":{"line":1,"column":586}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"limit","original":{"line":110,"column":2},"generated":{"line":1,"column":591}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"value","original":{"line":110,"column":8},"generated":{"line":1,"column":597}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":112,"column":11},"generated":{"line":1,"column":600}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":111,"column":9},"generated":{"line":1,"column":607}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":111,"column":9},"generated":{"line":1,"column":612}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":111,"column":19},"generated":{"line":1,"column":622}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":111,"column":33},"generated":{"line":1,"column":636}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$limit","original":{"line":111,"column":35},"generated":{"line":1,"column":637}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"value","original":{"line":111,"column":43},"generated":{"line":1,"column":644}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":112,"column":11},"generated":{"line":1,"column":648}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"match","original":{"line":121,"column":2},"generated":{"line":1,"column":653}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":121,"column":8},"generated":{"line":1,"column":659}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":123,"column":11},"generated":{"line":1,"column":662}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":122,"column":9},"generated":{"line":1,"column":669}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":122,"column":9},"generated":{"line":1,"column":674}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":122,"column":19},"generated":{"line":1,"column":684}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":122,"column":33},"generated":{"line":1,"column":698}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$match","original":{"line":122,"column":35},"generated":{"line":1,"column":699}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":122,"column":43},"generated":{"line":1,"column":706}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":123,"column":11},"generated":{"line":1,"column":710}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"maxTimeMS","original":{"line":132,"column":2},"generated":{"line":1,"column":715}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"value","original":{"line":132,"column":12},"generated":{"line":1,"column":725}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":134,"column":11},"generated":{"line":1,"column":728}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":133,"column":9},"generated":{"line":1,"column":735}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":133,"column":9},"generated":{"line":1,"column":740}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"options","original":{"line":133,"column":19},"generated":{"line":1,"column":750}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"maxTimeMS","original":{"line":133,"column":27},"generated":{"line":1,"column":758}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"value","original":{"line":133,"column":39},"generated":{"line":1,"column":768}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":134,"column":11},"generated":{"line":1,"column":770}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"out","original":{"line":143,"column":2},"generated":{"line":1,"column":775}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"destination","original":{"line":143,"column":6},"generated":{"line":1,"column":779}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":145,"column":11},"generated":{"line":1,"column":782}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":144,"column":9},"generated":{"line":1,"column":789}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":144,"column":9},"generated":{"line":1,"column":794}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":144,"column":19},"generated":{"line":1,"column":804}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":144,"column":33},"generated":{"line":1,"column":818}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$out","original":{"line":144,"column":35},"generated":{"line":1,"column":819}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"destination","original":{"line":144,"column":41},"generated":{"line":1,"column":824}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":145,"column":11},"generated":{"line":1,"column":828}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"project","original":{"line":154,"column":2},"generated":{"line":1,"column":833}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":154,"column":10},"generated":{"line":1,"column":841}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":156,"column":11},"generated":{"line":1,"column":844}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":155,"column":9},"generated":{"line":1,"column":851}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":155,"column":9},"generated":{"line":1,"column":856}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":155,"column":19},"generated":{"line":1,"column":866}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":155,"column":33},"generated":{"line":1,"column":880}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$project","original":{"line":155,"column":35},"generated":{"line":1,"column":881}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":155,"column":45},"generated":{"line":1,"column":890}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":156,"column":11},"generated":{"line":1,"column":894}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"lookup","original":{"line":165,"column":2},"generated":{"line":1,"column":899}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":165,"column":9},"generated":{"line":1,"column":906}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":167,"column":11},"generated":{"line":1,"column":909}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":166,"column":9},"generated":{"line":1,"column":916}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":166,"column":9},"generated":{"line":1,"column":921}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":166,"column":19},"generated":{"line":1,"column":931}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":166,"column":33},"generated":{"line":1,"column":945}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$lookup","original":{"line":166,"column":35},"generated":{"line":1,"column":946}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":166,"column":44},"generated":{"line":1,"column":954}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":167,"column":11},"generated":{"line":1,"column":958}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"redact","original":{"line":176,"column":2},"generated":{"line":1,"column":963}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":176,"column":9},"generated":{"line":1,"column":970}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":178,"column":11},"generated":{"line":1,"column":973}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":177,"column":9},"generated":{"line":1,"column":980}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":177,"column":9},"generated":{"line":1,"column":985}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":177,"column":19},"generated":{"line":1,"column":995}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":177,"column":33},"generated":{"line":1,"column":1009}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$redact","original":{"line":177,"column":35},"generated":{"line":1,"column":1010}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":177,"column":44},"generated":{"line":1,"column":1018}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":178,"column":11},"generated":{"line":1,"column":1022}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"skip","original":{"line":187,"column":2},"generated":{"line":1,"column":1027}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"value","original":{"line":187,"column":7},"generated":{"line":1,"column":1032}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":189,"column":11},"generated":{"line":1,"column":1035}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":188,"column":9},"generated":{"line":1,"column":1042}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":188,"column":9},"generated":{"line":1,"column":1047}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":188,"column":19},"generated":{"line":1,"column":1057}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":188,"column":33},"generated":{"line":1,"column":1071}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$skip","original":{"line":188,"column":35},"generated":{"line":1,"column":1072}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"value","original":{"line":188,"column":42},"generated":{"line":1,"column":1078}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":189,"column":11},"generated":{"line":1,"column":1082}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"sort","original":{"line":198,"column":2},"generated":{"line":1,"column":1087}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":198,"column":7},"generated":{"line":1,"column":1092}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":200,"column":11},"generated":{"line":1,"column":1095}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":199,"column":9},"generated":{"line":1,"column":1102}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":199,"column":9},"generated":{"line":1,"column":1107}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":199,"column":19},"generated":{"line":1,"column":1117}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":199,"column":33},"generated":{"line":1,"column":1131}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$sort","original":{"line":199,"column":35},"generated":{"line":1,"column":1132}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"document","original":{"line":199,"column":42},"generated":{"line":1,"column":1138}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":200,"column":11},"generated":{"line":1,"column":1142}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"unwind","original":{"line":209,"column":2},"generated":{"line":1,"column":1147}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"field","original":{"line":209,"column":9},"generated":{"line":1,"column":1154}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":211,"column":11},"generated":{"line":1,"column":1157}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":210,"column":9},"generated":{"line":1,"column":1164}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"operation","original":{"line":210,"column":9},"generated":{"line":1,"column":1169}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"addToPipeline","original":{"line":210,"column":19},"generated":{"line":1,"column":1179}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":210,"column":33},"generated":{"line":1,"column":1193}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"$unwind","original":{"line":210,"column":35},"generated":{"line":1,"column":1194}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"field","original":{"line":210,"column":44},"generated":{"line":1,"column":1202}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":211,"column":11},"generated":{"line":1,"column":1206}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"getLogger","original":{"line":220,"column":2},"generated":{"line":1,"column":1211}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":221,"column":11},"generated":{"line":1,"column":1223}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":221,"column":11},"generated":{"line":1,"column":1230}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"logger","original":{"line":221,"column":16},"generated":{"line":1,"column":1235}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"AggregationCursor","original":{"line":226,"column":0},"generated":{"line":1,"column":1243}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"prototype","original":{"line":226,"column":18},"generated":{"line":1,"column":1245}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"get","original":{"line":226,"column":28},"generated":{"line":1,"column":1255}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"AggregationCursor","original":{"line":226,"column":34},"generated":{"line":1,"column":1259}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"prototype","original":{"line":226,"column":52},"generated":{"line":1,"column":1261}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"toArray","original":{"line":226,"column":62},"generated":{"line":1,"column":1271}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"deprecate","original":{"line":229,"column":0},"generated":{"line":1,"column":1279}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"AggregationCursor","original":{"line":230,"column":2},"generated":{"line":1,"column":1281}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"prototype","original":{"line":230,"column":20},"generated":{"line":1,"column":1283}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"geoNear","original":{"line":230,"column":30},"generated":{"line":1,"column":1293}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","original":{"line":231,"column":2},"generated":{"line":1,"column":1301}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"module","original":{"line":370,"column":0},"generated":{"line":1,"column":1383}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"exports","original":{"line":370,"column":7},"generated":{"line":1,"column":1390}},{"source":"../node_modules/mongodb/lib/aggregation_cursor.js","name":"AggregationCursor","original":{"line":370,"column":17},"generated":{"line":1,"column":1398}}],"sources":{"../node_modules/mongodb/lib/aggregation_cursor.js":"'use strict';\n\nconst MongoError = require('./core').MongoError;\nconst Cursor = require('./cursor');\nconst CursorState = require('./core/cursor').CursorState;\nconst deprecate = require('util').deprecate;\n\n/**\n * @fileOverview The **AggregationCursor** class is an internal class that embodies an aggregation cursor on MongoDB\n * allowing for iteration over the results returned from the underlying query. It supports\n * one by one document iteration, conversion to an array or can be iterated as a Node 4.X\n * or higher stream\n *\n * **AGGREGATIONCURSOR Cannot directly be instantiated**\n * @example\n * const MongoClient = require('mongodb').MongoClient;\n * const test = require('assert');\n * // Connection url\n * const url = 'mongodb://localhost:27017';\n * // Database Name\n * const dbName = 'test';\n * // Connect using MongoClient\n * MongoClient.connect(url, function(err, client) {\n *   // Create a collection we want to drop later\n *   const col = client.db(dbName).collection('createIndexExample1');\n *   // Insert a bunch of documents\n *   col.insert([{a:1, b:1}\n *     , {a:2, b:2}, {a:3, b:3}\n *     , {a:4, b:4}], {w:1}, function(err, result) {\n *     test.equal(null, err);\n *     // Show that duplicate records got dropped\n *     col.aggregation({}, {cursor: {}}).toArray(function(err, items) {\n *       test.equal(null, err);\n *       test.equal(4, items.length);\n *       client.close();\n *     });\n *   });\n * });\n */\n\n/**\n * Namespace provided by the browser.\n * @external Readable\n */\n\n/**\n * Creates a new Aggregation Cursor instance (INTERNAL TYPE, do not instantiate directly)\n * @class AggregationCursor\n * @extends external:Readable\n * @fires AggregationCursor#data\n * @fires AggregationCursor#end\n * @fires AggregationCursor#close\n * @fires AggregationCursor#readable\n * @return {AggregationCursor} an AggregationCursor instance.\n */\nclass AggregationCursor extends Cursor {\n  constructor(topology, operation, options) {\n    super(topology, operation, options);\n  }\n\n  /**\n   * Set the batch size for the cursor.\n   * @method\n   * @param {number} value The number of documents to return per batch. See {@link https://docs.mongodb.com/manual/reference/command/aggregate|aggregation documentation}.\n   * @throws {MongoError}\n   * @return {AggregationCursor}\n   */\n  batchSize(value) {\n    if (this.s.state === CursorState.CLOSED || this.isDead()) {\n      throw MongoError.create({ message: 'Cursor is closed', driver: true });\n    }\n\n    if (typeof value !== 'number') {\n      throw MongoError.create({ message: 'batchSize requires an integer', driver: true });\n    }\n\n    this.operation.options.batchSize = value;\n    this.setCursorBatchSize(value);\n    return this;\n  }\n\n  /**\n   * Add a geoNear stage to the aggregation pipeline\n   * @method\n   * @param {object} document The geoNear stage document.\n   * @return {AggregationCursor}\n   */\n  geoNear(document) {\n    this.operation.addToPipeline({ $geoNear: document });\n    return this;\n  }\n\n  /**\n   * Add a group stage to the aggregation pipeline\n   * @method\n   * @param {object} document The group stage document.\n   * @return {AggregationCursor}\n   */\n  group(document) {\n    this.operation.addToPipeline({ $group: document });\n    return this;\n  }\n\n  /**\n   * Add a limit stage to the aggregation pipeline\n   * @method\n   * @param {number} value The state limit value.\n   * @return {AggregationCursor}\n   */\n  limit(value) {\n    this.operation.addToPipeline({ $limit: value });\n    return this;\n  }\n\n  /**\n   * Add a match stage to the aggregation pipeline\n   * @method\n   * @param {object} document The match stage document.\n   * @return {AggregationCursor}\n   */\n  match(document) {\n    this.operation.addToPipeline({ $match: document });\n    return this;\n  }\n\n  /**\n   * Add a maxTimeMS stage to the aggregation pipeline\n   * @method\n   * @param {number} value The state maxTimeMS value.\n   * @return {AggregationCursor}\n   */\n  maxTimeMS(value) {\n    this.operation.options.maxTimeMS = value;\n    return this;\n  }\n\n  /**\n   * Add a out stage to the aggregation pipeline\n   * @method\n   * @param {number} destination The destination name.\n   * @return {AggregationCursor}\n   */\n  out(destination) {\n    this.operation.addToPipeline({ $out: destination });\n    return this;\n  }\n\n  /**\n   * Add a project stage to the aggregation pipeline\n   * @method\n   * @param {object} document The project stage document.\n   * @return {AggregationCursor}\n   */\n  project(document) {\n    this.operation.addToPipeline({ $project: document });\n    return this;\n  }\n\n  /**\n   * Add a lookup stage to the aggregation pipeline\n   * @method\n   * @param {object} document The lookup stage document.\n   * @return {AggregationCursor}\n   */\n  lookup(document) {\n    this.operation.addToPipeline({ $lookup: document });\n    return this;\n  }\n\n  /**\n   * Add a redact stage to the aggregation pipeline\n   * @method\n   * @param {object} document The redact stage document.\n   * @return {AggregationCursor}\n   */\n  redact(document) {\n    this.operation.addToPipeline({ $redact: document });\n    return this;\n  }\n\n  /**\n   * Add a skip stage to the aggregation pipeline\n   * @method\n   * @param {number} value The state skip value.\n   * @return {AggregationCursor}\n   */\n  skip(value) {\n    this.operation.addToPipeline({ $skip: value });\n    return this;\n  }\n\n  /**\n   * Add a sort stage to the aggregation pipeline\n   * @method\n   * @param {object} document The sort stage document.\n   * @return {AggregationCursor}\n   */\n  sort(document) {\n    this.operation.addToPipeline({ $sort: document });\n    return this;\n  }\n\n  /**\n   * Add a unwind stage to the aggregation pipeline\n   * @method\n   * @param {number} field The unwind field name.\n   * @return {AggregationCursor}\n   */\n  unwind(field) {\n    this.operation.addToPipeline({ $unwind: field });\n    return this;\n  }\n\n  /**\n   * Return the cursor logger\n   * @method\n   * @return {Logger} return the cursor logger\n   * @ignore\n   */\n  getLogger() {\n    return this.logger;\n  }\n}\n\n// aliases\nAggregationCursor.prototype.get = AggregationCursor.prototype.toArray;\n\n// deprecated methods\ndeprecate(\n  AggregationCursor.prototype.geoNear,\n  'The `$geoNear` stage is deprecated in MongoDB 4.0, and removed in version 4.2.'\n);\n\n/**\n * AggregationCursor stream data event, fired for each document in the cursor.\n *\n * @event AggregationCursor#data\n * @type {object}\n */\n\n/**\n * AggregationCursor stream end event\n *\n * @event AggregationCursor#end\n * @type {null}\n */\n\n/**\n * AggregationCursor stream close event\n *\n * @event AggregationCursor#close\n * @type {null}\n */\n\n/**\n * AggregationCursor stream readable event\n *\n * @event AggregationCursor#readable\n * @type {null}\n */\n\n/**\n * Get the next available document from the cursor, returns null if no more documents are available.\n * @function AggregationCursor.prototype.next\n * @param {AggregationCursor~resultCallback} [callback] The result callback.\n * @throws {MongoError}\n * @return {Promise} returns Promise if no callback passed\n */\n\n/**\n * Check if there is any document still available in the cursor\n * @function AggregationCursor.prototype.hasNext\n * @param {AggregationCursor~resultCallback} [callback] The result callback.\n * @throws {MongoError}\n * @return {Promise} returns Promise if no callback passed\n */\n\n/**\n * The callback format for results\n * @callback AggregationCursor~toArrayResultCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {object[]} documents All the documents the satisfy the cursor.\n */\n\n/**\n * Returns an array of documents. The caller is responsible for making sure that there\n * is enough memory to store the results. Note that the array only contain partial\n * results when this cursor had been previously accessed. In that case,\n * cursor.rewind() can be used to reset the cursor.\n * @method AggregationCursor.prototype.toArray\n * @param {AggregationCursor~toArrayResultCallback} [callback] The result callback.\n * @throws {MongoError}\n * @return {Promise} returns Promise if no callback passed\n */\n\n/**\n * The callback format for results\n * @callback AggregationCursor~resultCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n * @param {(object|null)} result The result object if the command was executed successfully.\n */\n\n/**\n * Iterates over all the documents for this cursor. As with **{cursor.toArray}**,\n * not all of the elements will be iterated if this cursor had been previously accessed.\n * In that case, **{cursor.rewind}** can be used to reset the cursor. However, unlike\n * **{cursor.toArray}**, the cursor will only hold a maximum of batch size elements\n * at any given time if batch size is specified. Otherwise, the caller is responsible\n * for making sure that the entire result can fit the memory.\n * @method AggregationCursor.prototype.each\n * @deprecated\n * @param {AggregationCursor~resultCallback} callback The result callback.\n * @throws {MongoError}\n * @return {null}\n */\n\n/**\n * Close the cursor, sending a AggregationCursor command and emitting close.\n * @method AggregationCursor.prototype.close\n * @param {AggregationCursor~resultCallback} [callback] The result callback.\n * @return {Promise} returns Promise if no callback passed\n */\n\n/**\n * Is the cursor closed\n * @method AggregationCursor.prototype.isClosed\n * @return {boolean}\n */\n\n/**\n * Execute the explain for the cursor\n * @method AggregationCursor.prototype.explain\n * @param {AggregationCursor~resultCallback} [callback] The result callback.\n * @return {Promise} returns Promise if no callback passed\n */\n\n/**\n * Clone the cursor\n * @function AggregationCursor.prototype.clone\n * @return {AggregationCursor}\n */\n\n/**\n * Resets the cursor\n * @function AggregationCursor.prototype.rewind\n * @return {AggregationCursor}\n */\n\n/**\n * The callback format for the forEach iterator method\n * @callback AggregationCursor~iteratorCallback\n * @param {Object} doc An emitted document for the iterator\n */\n\n/**\n * The callback error format for the forEach iterator method\n * @callback AggregationCursor~endCallback\n * @param {MongoError} error An error instance representing the error during the execution.\n */\n\n/**\n * Iterates over all the documents for this cursor using the iterator, callback pattern.\n * @method AggregationCursor.prototype.forEach\n * @param {AggregationCursor~iteratorCallback} iterator The iteration callback.\n * @param {AggregationCursor~endCallback} callback The end callback.\n * @throws {MongoError}\n * @return {null}\n */\n\nmodule.exports = AggregationCursor;\n"},"lineCount":null}},"error":null,"hash":"7d01d33f42368f41c9014885ebe4335b","cacheData":{"env":{}}}